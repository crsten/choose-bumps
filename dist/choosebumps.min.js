"use strict";function ChooseBumps(e,t){function n(){this.element=e,w.classList.add("choosebumps"),w.setAttribute("tabindex",0),w.getAttribute("placeholder")&&(V.placeholder=w.getAttribute("placeholder")),g(),C.call(this,t||{})}function r(e){return"string"!=typeof e?console.error("Placeholder must be a string."):(N=e,void w.querySelector(".cb-main-item").setAttribute("placeholder",N))}function c(e){z=!!e,z&&"object"===("undefined"==typeof j?"undefined":_typeof(j))&&j&&(j=[j])}function i(e){e===!0?(E(),w.classList.add("cb-active"),A.scrollTop=0,document.addEventListener("click",i),document.addEventListener("keydown",o),h(),B=!0):(m(),w.classList.remove("cb-active"),document.removeEventListener("click",i),document.removeEventListener("keydown",o),D=null,B=!1)}function o(e){switch(new RegExp("38|40|13").test(e.keyCode)&&e.preventDefault(),e.keyCode){case 38:e.preventDefault(),s();break;case 40:e.preventDefault(),u();break;case 13:if("function"==typeof F&&D===-1)return F(e.target.value),e.target.value="";if(D<0)return;d(Q[parseInt(A.children[D].getAttribute("data-id"),10)],!0),D=null}}function l(e,t,n){n&&n.stopPropagation(),j&&j.constructor===Array?(j.splice(j.indexOf(e),1),j.length||(j=null)):j=null,j||w.querySelector(".cb-main-item").classList.add("cb-placeholder"),G&&t&&G(e),b(),E()}function u(){null===D&&(D=-1);var e=A.children.length-1;D=D<e?D+1:e,f()}function s(){A.children.length-1;D=D?D-1:null,f()}function a(){if(D&&!(D<0)){var e=A.children[D],t=A.scrollTop,n=A.scrollTop+A.clientHeight,r=e.offsetTop,c=e.offsetTop+e.clientHeight;r<t?A.scrollTop=e.offsetTop:c>n&&(A.scrollTop=c-A.clientHeight)}}function f(){var e=A.querySelector(".cb-selected");e&&e.classList.remove("cb-selected");var t=A.children[D];t&&t.classList.add("cb-selected"),a()}function d(e,t,n){w.querySelector(".cb-main-item").classList.remove("cb-placeholder"),m(),z?(j&&j.indexOf(e)<0?j.push(e):j=[e],E(),n&&n.stopPropagation(),h()):(j=e,i(!1)),I&&t&&I(e),b()}function p(e){O=!!e,O?!function(){w.classList.add("cb-search-enabled");var e=document.createElement("input");e.className="cb-search",e.setAttribute("type","text"),e.setAttribute("size",1),e.setAttribute("autocomplete","off"),e.addEventListener("keyup",function(t){new RegExp("38|40|13").test(t.keyCode)===!1&&(U&&clearTimeout(U),U=setTimeout(function(){v(e.value,function(e){/{{.*}}/gi.test(K)&&(Q=e),E(e),D=null,u()})},200))}),e.addEventListener("keypress",function(){this.setAttribute("size",this.value.length+1)}),w.querySelector(".cb-main-item").appendChild(e)}():w.classList.remove("cb-search-enabled")}function m(){O&&(w.querySelector(".cb-search").value="")}function h(){O&&w.querySelector(".cb-search").focus()}function v(e,t){function n(e){return Object.keys(e).reduce(function(t,c){var i=!1;return i="object"===_typeof(e[c])?n(e[c]):r.test(e[c]),i&&(t=!0),t},!1)}if(!e)return Q;var r=new RegExp(e,"i");/{{.*}}/gi.test(K)?y(K.replace(/{{query}}/,e),t):t(Q.filter(function(e){if(H){var t=!1;return H.split(" ").forEach(function(n){var c=n.split("."),i=c.reduce(function(e,t){return e[t]},e);r.test(i)&&(t=!0)}),t}return"string"==typeof e?r.test(e):n(e)}))}function g(){var e=document.createElement("div");e.className="cb-main-item cb-placeholder trigger";var t='<svg class="cb-caret trigger" viewBox="0 0 512 512" height="20" width="20">\n\t\t\t\t\t\t<path class="trigger" d="m508 108c-4-4-11-4-15 1l-237 271l-237-271c-4-5-11-5-15-1c-5 4-5 10-1 15l245 280c2 3 5 4 8 4c3 0 6-1 8-4l245-280c4-5 4-11-1-15z"></path>\n\t\t\t\t\t</svg>';e.innerHTML+=t,w.appendChild(e),A=document.createElement("div"),A.className="cb-items",w.appendChild(A),k=document.createElement("div"),k.className="cb-loader",w.appendChild(k),w.querySelector(".cb-main-item").addEventListener("click",function(e){e.stopPropagation(),i(!B)})}function b(){var e=w.querySelector(".cb-main-item");if(z){if([].slice.call(w.querySelectorAll(".cb-main-item .cb-tag")).forEach(function(t){e.removeChild(t)}),!j)return;j.forEach(function(t){var n=document.createElement("div");n.className="cb-tag",n.innerHTML=S(t,R||P)+'<svg viewBox="0 0 512 512">\n\t\t\t\t\t\t<path d="m271 256l238-238c4-4 4-11 0-15c-4-4-11-4-15 0l-238 238l-238-238c-4-4-11-4-15 0c-4 4-4 11 0 15l238 238l-238 238c-4 4-4 11 0 15c2 2 5 3 8 3c2 0 5-1 7-3l238-238l238 238c2 2 5 3 7 3c3 0 6-1 8-3c4-4 4-11 0-15z"></path>\n\t\t\t\t\t</svg>',n.querySelector("svg").addEventListener("click",l.bind(null,t,!0)),e.insertBefore(n,e.children[e.children.length-1])})}else{if(!j)return[].slice.call(e.querySelectorAll(".cb-selected-item,.cb-tag")).forEach(function(t){return e.removeChild(t)});var t=document.createElement("div");t.className="cb-selected-item",t.innerHTML=S(j,_||P);var n=w.querySelector(".cb-selected-item");n&&e.removeChild(n),e.insertBefore(t,e.children[e.children.length-1])}}function y(e,t){X&&(X.abort(),L(!1)),X=new XMLHttpRequest,X.open("GET",e),X.onreadystatechange=function(){4==this.readyState&&(L(!1),this.status>=200&&this.status<400&&(t(J?J(JSON.parse(this.responseText)):JSON.parse(this.responseText)),X=null))},X.send(),L(!0)}function L(e){e?(k.classList.add("active"),w.querySelector(".cb-caret").classList.add("hide")):(k.classList.remove("active"),w.querySelector(".cb-caret").classList.remove("hide"))}function E(e){A.innerHTML="",M&&(Q=Q.sort(function(e,t){return T(M,e)<T(M,t)?-1:T(M,e)>T(M,t)?1:0}));var t=null;Q.forEach(function(n,r){if(!(e&&e.indexOf(n)<0||z&&j&&j.indexOf(n)>-1||!z&&j===n)){var c=document.createElement("div");c.setAttribute("data-id",r),c.innerHTML=S(n,P),c.addEventListener("click",d.bind(null,n,!0)),!M||t&&T(M,t)===T(M,n)||c.setAttribute("category",T(M,n)),t=n,A.appendChild(c)}})}function S(e,t){for(var n=/{{data\.?(.+?)?}}/,r=void 0;r=n.exec(t);){var c="",i=e;r[1]&&(c="."+r[1],i=T(r[1],e));var o=new RegExp("{{data"+c+"}}");t=t.replace(o,i)}return t}function T(e,t){return e.split(".").reduce(function(e,t){return e[t]},t)}function q(e,t){if("object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"object"!==("undefined"==typeof t?"undefined":_typeof(t)))return e===t;var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!==r.length)return!1;for(var c=0;c<n.length;c++){var i=n[c];if(e[i]!==t[i])return!1}return!0}function x(){if(j&&j.constructor===Array){var e=j.slice();e.forEach(function(e){l(e,!0)})}else l(j,!0);m()}function C(e){for(var t in V)this[t]=e[t]?e[t]:V[t]}if(this instanceof ChooseBumps==!1)return new ChooseBumps(e,t);var w=null,A=null,k=null,O=!1,j=null,B=!1,H=null,N=null,z=!1,M=null,P="",R=null,_=null,D=null,I=null,J=null,F=null,G=null,U=null,X=null,K=null,Q=[],V={placeholder:"Choose",items:[],search:!1,searchfields:"",multiple:!1,template:"{{data}}",tagtemplate:null,selectedtemplate:null,categorize:null,processing:null,onselect:null,onremove:null,onadd:null};return Object.defineProperties(this,{element:{get:function(){return w},set:function(e){if("string"==typeof e){var t=document.querySelector(e);t?w=t:console.error("Element not found.")}else e instanceof HTMLElement?w=e:console.error("Invalid argument")}},items:{get:function(){return K||Q},set:function(e){e instanceof Array?Q=e:"string"==typeof e?(K=e,/{{.*}}/gi.test(K)||y(K,function(e){Q=e})):console.error("Items must be an array or URL.")}},search:{get:function(){return O},set:p},placeholder:{get:function(){return N},set:r},multiple:{get:function(){return z},set:c},selected:{get:function(){return j}},template:{get:function(){return P},set:function(e){"string"==typeof e?(P=e,E(),b()):console.error("Template must be a string.")}},tagtemplate:{get:function(){return R||P},set:function(e){"string"==typeof e&&(R=e,E(),b())}},selectedtemplate:{get:function(){return _||P},set:function(e){"string"==typeof e&&(_=e,E(),b())}},searchfields:{get:function(){return H},set:function(e){"string"==typeof e?H=e:console.error("SearchFields must be a string.")}},onselect:{get:function(){return I},set:function(e){"function"==typeof e?I=e:e||(I=null)}},processing:{get:function(){return J},set:function(e){"function"==typeof e?J=e:e||(J=null)}},onremove:{get:function(){return G},set:function(e){"function"==typeof e?G=e:e||(G=null)}},onadd:{get:function(){return F},set:function(e){"function"==typeof e?F=e:e||(F=null)}},categorize:{get:function(){return M},set:function(e){M="string"==typeof e?e:null,E()}}}),this.select=function(e){if(!e)return x();var t=Q.reduce(function(t,n){return t=q(e,n)?n:t},null);t&&d(t)},this.remove=function(e){if(!e)return x();var t=Q.reduce(function(t,n){return t=q(e,n)?n:t},null);t&&l(t,!0)},this.reset=x,n.call(this),Object.freeze(this)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define("ChooseBumps",e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e:window.ChooseBumps=e}(ChooseBumps);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNob29zZWJ1bXBzLmpzIl0sIm5hbWVzIjpbIkNob29zZUJ1bXBzIiwiZWxlbWVudCIsIm9wdGlvbnMiLCJpbml0IiwidGhpcyIsIkVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJkZWZhdWx0cyIsInBsYWNlaG9sZGVyIiwicmVuZGVySFRNTCIsInNldEFyZ3MiLCJjYWxsIiwic2V0UGxhY2Vob2xkZXIiLCJ4IiwiY29uc29sZSIsImVycm9yIiwiUGxhY2Vob2xkZXIiLCJxdWVyeVNlbGVjdG9yIiwic2V0TXVsdGlwbGUiLCJzdGF0ZSIsIk11bHRpcGxlIiwiU2VsZWN0ZWQiLCJfdHlwZW9mIiwic2V0T3BlbmVkIiwicmVuZGVySXRlbXMiLCJJdGVtQ29udGFpbmVyIiwic2Nyb2xsVG9wIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiQXJyb3dOYXZpZ2F0aW9uIiwiZm9jdXNTZWFyY2giLCJpc09wZW4iLCJyZXNldFNlYXJjaCIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJTZWxlY3RlZEluZGV4IiwiZSIsIlJlZ0V4cCIsInRlc3QiLCJrZXlDb2RlIiwicHJldmVudERlZmF1bHQiLCJzZWxlY3RQcmV2Iiwic2VsZWN0TmV4dCIsIm9uQWRkIiwidGFyZ2V0IiwidmFsdWUiLCJzZWxlY3RJdGVtIiwiSXRlbXMiLCJwYXJzZUludCIsImNoaWxkcmVuIiwicmVtb3ZlU2VsZWN0ZWQiLCJpdGVtIiwidHJpZ2dlckNhbGxiYWNrIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJjb25zdHJ1Y3RvciIsIkFycmF5Iiwic3BsaWNlIiwiaW5kZXhPZiIsImxlbmd0aCIsIm9uUmVtb3ZlIiwicmVuZGVyU2VsZWN0aW9uIiwibWF4IiwidXBkYXRlU2VsZWN0aW9uIiwic2Nyb2xsU2VsZWN0ZWRJbnRvVmlldyIsInNlbGVjdGVkSXRlbSIsImNvbnRhaW5lclRvcCIsImNvbnRhaW5lckJvdHRvbSIsImNsaWVudEhlaWdodCIsInNlbGVjdGVkSXRlbVRvcCIsIm9mZnNldFRvcCIsInNlbGVjdGVkSXRlbUJvdHRvbSIsIm9sZFNlbGVjdGlvbiIsImVsIiwicHVzaCIsIm9uU2VsZWN0Iiwic2V0U2VhcmNoIiwiU2VhcmNoIiwiU2VhcmNoQm94IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIlR5cGVUcmVzaG9sZCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzZWFyY2giLCJyZXN1bHQiLCJGZXRjaFVybCIsImFwcGVuZENoaWxkIiwiZm9jdXMiLCJxdWVyeSIsImNiIiwic2VhcmNoT2JqZWN0Iiwib2JqIiwiT2JqZWN0Iiwia2V5cyIsInJlZHVjZSIsInZhbCIsImtleSIsImNoZWNrIiwicmVnZXgiLCJmZXRjaEl0ZW1zIiwicmVwbGFjZSIsImZpbHRlciIsIlNlYXJjaEZpZWxkcyIsInNwbGl0IiwiZm9yRWFjaCIsImZpZWxkIiwiTWFpbkl0ZW0iLCJDYXJldCIsImlubmVySFRNTCIsIkxvYWRpbmdDb250YWluZXIiLCJtYWluSXRlbSIsInNsaWNlIiwicXVlcnlTZWxlY3RvckFsbCIsInQiLCJyZW1vdmVDaGlsZCIsInRhZyIsInBhcnNlVGVtcGxhdGUiLCJUYWdUZW1wbGF0ZSIsIlRlbXBsYXRlIiwiYmluZCIsImluc2VydEJlZm9yZSIsIlNlbGVjdGVkVGVtcGxhdGUiLCJwcmV2aW91c0l0ZW0iLCJ1cmwiLCJGZXRjaCIsImFib3J0IiwidG9nZ2xlTG9hZGVyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsIlByb2Nlc3NpbmciLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJzZW5kIiwiaXRlbXMiLCJDYXRlZ29yaXplIiwic29ydCIsImEiLCJiIiwiZ2V0UHJvcGVydHlCeVN0cmluZyIsImluZGV4Iiwib3B0aW9uIiwiZGF0YSIsInRlbXBsYXRlIiwicmUiLCJtIiwiZXhlYyIsInNlbGVjdG9yIiwib2JqZWN0IiwiaXNFcXVpdmFsZW50IiwiYVByb3BzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImJQcm9wcyIsImkiLCJwcm9wTmFtZSIsIlJlc2V0IiwiY29weSIsIm9wdHMiLCJzZWFyY2hmaWVsZHMiLCJtdWx0aXBsZSIsInRhZ3RlbXBsYXRlIiwic2VsZWN0ZWR0ZW1wbGF0ZSIsImNhdGVnb3JpemUiLCJwcm9jZXNzaW5nIiwib25zZWxlY3QiLCJvbnJlbW92ZSIsIm9uYWRkIiwiZGVmaW5lUHJvcGVydGllcyIsImdldCIsInNldCIsIkhUTUxFbGVtZW50Iiwic2VsZWN0ZWQiLCJzZWxlY3QiLCJtYXRjaCIsInJlc2V0IiwiZnJlZXplIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsIndpbmRvdyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFRQSxTQUFTQSxhQUFZQyxFQUFRQyxHQTBDNUIsUUFBU0MsS0FDUkMsS0FBS0gsUUFBVUEsRUFDZkksRUFBUUMsVUFBVUMsSUFBSSxlQUN0QkYsRUFBUUcsYUFBYSxXQUFXLEdBQzdCSCxFQUFRSSxhQUFhLGlCQUFnQkMsRUFBU0MsWUFBY04sRUFBUUksYUFBYSxnQkFDcEZHLElBRUFDLEVBQVFDLEtBQUtWLEtBQUtGLE9BR25CLFFBQVNhLEdBQWVDLEdBQ3ZCLE1BQWdCLGdCQUFOQSxHQUF1QkMsUUFBUUMsTUFBTSxrQ0FDL0NDLEVBQWNILE1BQ2RYLEdBQVFlLGNBQWMsaUJBQWlCWixhQUFhLGNBQWNXLElBR25FLFFBQVNFLEdBQVlDLEdBQ3BCQyxJQUFXRCxFQUNSQyxHQUFpQyxZQUFiLG1CQUFBQyxHQUFBLFlBQUFDLFFBQUFELEtBQXlCQSxJQUFVQSxHQUFZQSxJQTVEbEMsUUFpRTVCRSxHQUFVSixHQUNmQSxLQUFVLEdBQ1pLLElBQ0F0QixFQUFRQyxVQUFVQyxJQUFJLGFBQ3RCcUIsRUFBY0MsVUFBWSxFQUMxQkMsU0FBU0MsaUJBQWlCLFFBQVFMLEdBQ2xDSSxTQUFT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SUFBSWtCLEdBQVFsSSxFQUFNZ0QsT0FBTyxTQUFDc0QsRUFBRVEsR0FZM0IsTUFaaUNSLEdBQUlJLEVBQWF0RyxFQUFLMEcsR0FBS0EsRUFBSVIsR0FBRSxLQUNoRTRCLElBQU8vSCxFQUFlK0gsR0FBTSxJQStCaENoTCxLQUFLaUwsTUFBUW5CLEVBR2IvSixFQUFLVyxLQUFLVixNQU1INEYsT0FBT3NGLE9BQU9sTCxNQXJrQnRCLEdBQUlxQixTQUE0QixrQkFBWDhKLFNBQW9ELGdCQUFwQkEsUUFBT0MsU0FBd0IsU0FBVXpGLEdBQU8sYUFBY0EsSUFBUyxTQUFVQSxHQUFPLE1BQU9BLElBQXlCLGtCQUFYd0YsU0FBeUJ4RixFQUFJckMsY0FBZ0I2SCxPQUFTLGVBQWtCeEYsS0Ewa0J6TyxTQUFtQjBGLEdBQ08sa0JBQVhDLFNBQXlCQSxPQUFPQyxJQUFNRCxPQUFPLGNBQWVELEdBQzNDLFlBQVosbUJBQUFHLFNBQUEsWUFBQW5LLFFBQUFtSyxVQUF1QkMsT0FBT0QsUUFBVUgsRUFDcERLLE9BQU85TCxZQUFjeUwsR0FDM0J6TCIsImZpbGUiOiJjaG9vc2VidW1wcy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbi8qICBDaG9vc2VCdW1wc1xyXG4gKiAgQSBkcm9wZG93biBzbyBzaW1wbGUgaXQgd2lsbCBnaXZlIHlvdSBjaG9vc2UtYnVtcHMhXHJcbiAqICBBdXRob3I6IGNhci5qYWNvYnNlbkBnbWFpbC5jb21cclxuICogIExpY2Vuc2U6IE1JVFxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIENob29zZUJ1bXBzKGVsZW1lbnQsb3B0aW9ucykge1xyXG5cdGlmKHRoaXMgaW5zdGFuY2VvZiBDaG9vc2VCdW1wcyA9PT0gZmFsc2UpIHJldHVybiBuZXcgQ2hvb3NlQnVtcHMoZWxlbWVudCxvcHRpb25zKTtcclxuXHJcblx0bGV0IEVsZW1lbnQgPSBudWxsO1xyXG5cdGxldCBJdGVtQ29udGFpbmVyID0gbnVsbDtcclxuXHRsZXQgTG9hZGluZ0NvbnRhaW5lciA9IG51bGw7XHJcblx0bGV0IFNlYXJjaCA9IGZhbHNlO1xyXG5cdGxldCBTZWxlY3RlZCA9IG51bGw7XHJcblx0bGV0IGlzT3BlbiA9IGZhbHNlO1xyXG5cdGxldCBTZWFyY2hGaWVsZHMgPSBudWxsO1xyXG5cdGxldCBQbGFjZWhvbGRlciA9IG51bGw7XHJcblx0bGV0IE11bHRpcGxlID0gZmFsc2U7XHJcblx0bGV0IENhdGVnb3JpemUgPSBudWxsO1xyXG5cdGxldCBUZW1wbGF0ZSA9ICcnO1xyXG5cdGxldCBUYWdUZW1wbGF0ZSA9IG51bGw7XHJcblx0bGV0IFNlbGVjdGVkVGVtcGxhdGUgPSBudWxsO1xyXG5cdGxldCBTZWxlY3RlZEluZGV4ID0gbnVsbDtcclxuXHRsZXQgb25TZWxlY3QgPSBudWxsO1xyXG5cdGxldCBQcm9jZXNzaW5nID0gbnVsbDtcclxuXHRsZXQgb25BZGQgPSBudWxsO1xyXG5cdGxldCBvblJlbW92ZSA9IG51bGw7XHJcblx0bGV0IFR5cGVUcmVzaG9sZCA9IG51bGw7XHJcblx0bGV0IEZldGNoID0gbnVsbDtcclxuXHRsZXQgRmV0Y2hVcmwgPSBudWxsO1xyXG5cdGxldCBJdGVtcyA9IFtdO1xyXG5cclxuXHRsZXQgZGVmYXVsdHMgPSB7XHJcblx0XHRwbGFjZWhvbGRlcjogJ0Nob29zZScsXHJcblx0XHRpdGVtczogW10sXHJcblx0XHRzZWFyY2g6IGZhbHNlLFxyXG5cdFx0c2VhcmNoZmllbGRzOiAnJyxcclxuXHRcdG11bHRpcGxlOiBmYWxzZSxcclxuXHRcdHRlbXBsYXRlOiAne3tkYXRhfX0nLFxyXG5cdFx0dGFndGVtcGxhdGU6IG51bGwsXHJcblx0XHRzZWxlY3RlZHRlbXBsYXRlOiBudWxsLFxyXG5cdFx0Y2F0ZWdvcml6ZTogbnVsbCxcclxuXHRcdHByb2Nlc3Npbmc6IG51bGwsXHJcblx0XHRvbnNlbGVjdDogbnVsbCxcclxuXHRcdG9ucmVtb3ZlOiBudWxsLFxyXG5cdFx0b25hZGQ6IG51bGxcclxuXHR9O1xyXG5cclxuXHRmdW5jdGlvbiBpbml0KCkge1xyXG5cdFx0dGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuXHRcdEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2hvb3NlYnVtcHMnKTtcclxuXHRcdEVsZW1lbnQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsMCk7XHJcblx0XHRpZihFbGVtZW50LmdldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKSkgZGVmYXVsdHMucGxhY2Vob2xkZXIgPSBFbGVtZW50LmdldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKTtcclxuXHRcdHJlbmRlckhUTUwoKTtcclxuXHJcblx0XHRzZXRBcmdzLmNhbGwodGhpcyxvcHRpb25zIHx8IHt9KTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHNldFBsYWNlaG9sZGVyKHgpIHtcclxuXHRcdGlmKHR5cGVvZiB4ICE9PSAnc3RyaW5nJykgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1BsYWNlaG9sZGVyIG11c3QgYmUgYSBzdHJpbmcuJyk7XHJcblx0XHRQbGFjZWhvbGRlciA9IHg7XHJcblx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1tYWluLWl0ZW0nKS5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyxQbGFjZWhvbGRlcik7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBzZXRNdWx0aXBsZShzdGF0ZSkge1xyXG5cdFx0TXVsdGlwbGUgPSAoc3RhdGUpID8gdHJ1ZSA6IGZhbHNlO1xyXG5cdFx0aWYoTXVsdGlwbGUpIGlmKHR5cGVvZiBTZWxlY3RlZCA9PT0gJ29iamVjdCcgJiYgU2VsZWN0ZWQpIFNlbGVjdGVkID0gW1NlbGVjdGVkXTtcclxuXHR9XHJcblxyXG5cdC8qIEludGVyYWN0aW9ucyAqL1xyXG5cclxuXHRmdW5jdGlvbiBzZXRPcGVuZWQoc3RhdGUpIHtcclxuXHRcdGlmKHN0YXRlID09PSB0cnVlKSB7XHJcblx0XHRcdHJlbmRlckl0ZW1zKCk7XHJcblx0XHRcdEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2ItYWN0aXZlJyk7XHJcblx0XHRcdEl0ZW1Db250YWluZXIuc2Nyb2xsVG9wID0gMDtcclxuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNldE9wZW5lZCk7XHJcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLEFycm93TmF2aWdhdGlvbik7XHJcblx0XHRcdGZvY3VzU2VhcmNoKCk7XHJcblx0XHRcdGlzT3BlbiA9IHRydWU7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0cmVzZXRTZWFyY2goKTtcclxuXHRcdFx0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjYi1hY3RpdmUnKTtcclxuXHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNldE9wZW5lZCk7XHJcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLEFycm93TmF2aWdhdGlvbik7XHJcblx0XHRcdFNlbGVjdGVkSW5kZXggPSBudWxsO1xyXG5cdFx0XHRpc09wZW4gPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIEFycm93TmF2aWdhdGlvbihlKSB7XHJcblx0XHRpZihuZXcgUmVnRXhwKCczOHw0MHwxMycpLnRlc3QoZS5rZXlDb2RlKSkgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0c3dpdGNoKGUua2V5Q29kZSkge1xyXG5cdFx0XHRjYXNlIDM4OlxyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHNlbGVjdFByZXYoKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgNDA6XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0c2VsZWN0TmV4dCgpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAxMzpcclxuXHRcdFx0aWYodHlwZW9mIG9uQWRkID09PSAnZnVuY3Rpb24nICYmIFNlbGVjdGVkSW5kZXggPT09IC0xKXtcclxuXHRcdFx0XHRvbkFkZChlLnRhcmdldC52YWx1ZSk7XHJcblx0XHRcdFx0cmV0dXJuIGUudGFyZ2V0LnZhbHVlID0gJyc7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoU2VsZWN0ZWRJbmRleCA8IDApIHJldHVybjtcclxuXHRcdFx0c2VsZWN0SXRlbShJdGVtc1twYXJzZUludChJdGVtQ29udGFpbmVyLmNoaWxkcmVuW1NlbGVjdGVkSW5kZXhdLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpLDEwKV0sdHJ1ZSk7XHJcblx0XHRcdFNlbGVjdGVkSW5kZXggPSBudWxsO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qIFNlbGVjdGluZyAqL1xyXG5cclxuXHRmdW5jdGlvbiByZW1vdmVTZWxlY3RlZChpdGVtLHRyaWdnZXJDYWxsYmFjayxldmVudCkge1xyXG5cdFx0aWYoZXZlbnQpIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0aWYoU2VsZWN0ZWQgJiYgU2VsZWN0ZWQuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XHJcblx0XHRcdFNlbGVjdGVkLnNwbGljZShTZWxlY3RlZC5pbmRleE9mKGl0ZW0pLDEpO1xyXG5cdFx0XHRpZighU2VsZWN0ZWQubGVuZ3RoKSBTZWxlY3RlZCA9IG51bGw7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0U2VsZWN0ZWQgPSBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmKCFTZWxlY3RlZCkgRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2ItbWFpbi1pdGVtJykuY2xhc3NMaXN0LmFkZCgnY2ItcGxhY2Vob2xkZXInKTtcclxuXHRcdGlmKG9uUmVtb3ZlICYmIHRyaWdnZXJDYWxsYmFjaykgb25SZW1vdmUoaXRlbSk7XHJcblx0XHRyZW5kZXJTZWxlY3Rpb24oKTtcclxuXHRcdHJlbmRlckl0ZW1zKCk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBzZWxlY3ROZXh0KCkge1xyXG4gICAgICAgIGlmKFNlbGVjdGVkSW5kZXggPT09IG51bGwpIFNlbGVjdGVkSW5kZXggPSAtMTtcclxuICAgICAgICBsZXQgbWF4ID0gSXRlbUNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICBTZWxlY3RlZEluZGV4ID0gKFNlbGVjdGVkSW5kZXggPCBtYXgpID8gU2VsZWN0ZWRJbmRleCArIDEgOiBtYXg7XHJcbiAgICAgICAgdXBkYXRlU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2VsZWN0UHJldigpIHtcclxuICAgICAgICBsZXQgbWF4ID0gSXRlbUNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICBTZWxlY3RlZEluZGV4ID0gKCFTZWxlY3RlZEluZGV4KSA/IG51bGwgOiBTZWxlY3RlZEluZGV4IC0gMTtcclxuICAgICAgICB1cGRhdGVTZWxlY3Rpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzY3JvbGxTZWxlY3RlZEludG9WaWV3KCkge1xyXG5cdFx0aWYoIVNlbGVjdGVkSW5kZXggfHwgU2VsZWN0ZWRJbmRleCA8IDApIHJldHVybjtcclxuXHRcdGxldCBzZWxlY3RlZEl0ZW0gPSBJdGVtQ29udGFpbmVyLmNoaWxkcmVuW1NlbGVjdGVkSW5kZXhdO1xyXG5cdFx0bGV0IGNvbnRhaW5lclRvcCA9IEl0ZW1Db250YWluZXIuc2Nyb2xsVG9wO1xyXG5cdFx0bGV0IGNvbnRhaW5lckJvdHRvbSA9IEl0ZW1Db250YWluZXIuc2Nyb2xsVG9wICsgSXRlbUNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XHJcblx0XHRsZXQgc2VsZWN0ZWRJdGVtVG9wID0gc2VsZWN0ZWRJdGVtLm9mZnNldFRvcDtcclxuXHRcdGxldCBzZWxlY3RlZEl0ZW1Cb3R0b20gPSBzZWxlY3RlZEl0ZW0ub2Zmc2V0VG9wICsgc2VsZWN0ZWRJdGVtLmNsaWVudEhlaWdodDtcclxuXHRcdGlmKHNlbGVjdGVkSXRlbVRvcCA8IGNvbnRhaW5lclRvcCkgSXRlbUNvbnRhaW5lci5zY3JvbGxUb3AgPSBzZWxlY3RlZEl0ZW0ub2Zmc2V0VG9wO1xyXG5cdFx0ZWxzZSBpZihzZWxlY3RlZEl0ZW1Cb3R0b20gPiBjb250YWluZXJCb3R0b20pIEl0ZW1Db250YWluZXIuc2Nyb2xsVG9wID0gc2VsZWN0ZWRJdGVtQm90dG9tIC0gSXRlbUNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0aW9uKCkge1xyXG4gICAgICAgIHZhciBvbGRTZWxlY3Rpb24gPSBJdGVtQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5jYi1zZWxlY3RlZCcpO1xyXG4gICAgICAgIGlmKG9sZFNlbGVjdGlvbikgb2xkU2VsZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2NiLXNlbGVjdGVkJyk7XHJcbiAgICAgICAgbGV0IGVsID0gSXRlbUNvbnRhaW5lci5jaGlsZHJlbltTZWxlY3RlZEluZGV4XTtcclxuICAgICAgICBpZihlbCkgZWwuY2xhc3NMaXN0LmFkZCgnY2Itc2VsZWN0ZWQnKTtcclxuICAgICAgICBzY3JvbGxTZWxlY3RlZEludG9WaWV3KCk7XHJcbiAgICB9XHJcblxyXG5cdGZ1bmN0aW9uIHNlbGVjdEl0ZW0oaXRlbSx0cmlnZ2VyQ2FsbGJhY2ssZXZlbnQpIHtcclxuXHRcdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLW1haW4taXRlbScpLmNsYXNzTGlzdC5yZW1vdmUoJ2NiLXBsYWNlaG9sZGVyJyk7XHJcblx0XHRyZXNldFNlYXJjaCgpO1xyXG5cclxuXHRcdGlmKE11bHRpcGxlKSB7XHJcblx0XHRcdGlmKFNlbGVjdGVkICYmIFNlbGVjdGVkLmluZGV4T2YoaXRlbSkgPCAwKSBTZWxlY3RlZC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHRlbHNlIFNlbGVjdGVkID0gW2l0ZW1dO1xyXG5cclxuXHRcdFx0cmVuZGVySXRlbXMoKTtcclxuXHRcdFx0aWYoZXZlbnQpIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRmb2N1c1NlYXJjaCgpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdFNlbGVjdGVkID0gaXRlbTtcclxuXHRcdFx0c2V0T3BlbmVkKGZhbHNlKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZihvblNlbGVjdCAmJiB0cmlnZ2VyQ2FsbGJhY2spIG9uU2VsZWN0KGl0ZW0pO1xyXG5cdFx0cmVuZGVyU2VsZWN0aW9uKCk7XHJcblx0fVxyXG5cclxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuICAgIC8qIFNlYXJjaGluZyAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIHNldFNlYXJjaChzdGF0ZSkge1xyXG5cdFx0U2VhcmNoID0gKHN0YXRlKSA/IHRydWUgOiBmYWxzZTtcclxuXHJcblx0XHRpZihTZWFyY2gpIHtcclxuXHRcdFx0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjYi1zZWFyY2gtZW5hYmxlZCcpO1xyXG5cdFx0XHRsZXQgU2VhcmNoQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuXHRcdFx0XHRTZWFyY2hCb3guY2xhc3NOYW1lID0gJ2NiLXNlYXJjaCc7XHJcblx0XHRcdFx0U2VhcmNoQm94LnNldEF0dHJpYnV0ZSgndHlwZScsJ3RleHQnKTtcclxuXHRcdFx0XHRTZWFyY2hCb3guc2V0QXR0cmlidXRlKCdzaXplJywxKTtcclxuXHRcdFx0XHRTZWFyY2hCb3guc2V0QXR0cmlidXRlKCdhdXRvY29tcGxldGUnLCdvZmYnKTtcclxuXHJcblx0XHRcdFx0U2VhcmNoQm94LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJyxmdW5jdGlvbiBLZXlVcChlKSB7XHJcblx0XHRcdFx0XHRpZihuZXcgUmVnRXhwKCczOHw0MHwxMycpLnRlc3QoZS5rZXlDb2RlKSA9PT0gZmFsc2UpIHtcclxuXHRcdFx0XHRcdFx0VHlwZVRyZXNob2xkICYmIGNsZWFyVGltZW91dChUeXBlVHJlc2hvbGQpO1xyXG5cdFx0XHRcdFx0XHRUeXBlVHJlc2hvbGQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRcdFx0c2VhcmNoKFNlYXJjaEJveC52YWx1ZSxmdW5jdGlvbihyZXN1bHQpe1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYoL3t7Lip9fS9pZy50ZXN0KEZldGNoVXJsKSkgSXRlbXMgPSByZXN1bHQ7XHJcblx0XHRcdFx0XHRcdFx0XHRyZW5kZXJJdGVtcyhyZXN1bHQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0U2VsZWN0ZWRJbmRleCA9IG51bGw7XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxlY3ROZXh0KCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH0sMjAwKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0U2VhcmNoQm94LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJyxmdW5jdGlvbiBLZXlQcmVzcygpIHtcclxuXHRcdFx0XHRcdHRoaXMuc2V0QXR0cmlidXRlKCdzaXplJyx0aGlzLnZhbHVlLmxlbmd0aCArIDEpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2ItbWFpbi1pdGVtJykuYXBwZW5kQ2hpbGQoU2VhcmNoQm94KTtcclxuXHRcdH1lbHNlIEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2Itc2VhcmNoLWVuYWJsZWQnKTtcclxuXHR9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzZXRTZWFyY2goKSB7XHJcblx0XHRpZighU2VhcmNoKSByZXR1cm47XHJcblx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1zZWFyY2gnKS52YWx1ZSA9ICcnO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZm9jdXNTZWFyY2goKSB7XHJcblx0XHRpZighU2VhcmNoKSByZXR1cm47XHJcblx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1zZWFyY2gnKS5mb2N1cygpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gc2VhcmNoKHF1ZXJ5LGNiKSB7XHJcblx0XHRpZighcXVlcnkpIHJldHVybiBJdGVtcztcclxuXHRcdGxldCByZWdleCA9IG5ldyBSZWdFeHAocXVlcnksJ2knKTtcclxuXHJcblx0XHRpZigve3suKn19L2lnLnRlc3QoRmV0Y2hVcmwpKSB7XHJcblx0XHRcdGZldGNoSXRlbXMoRmV0Y2hVcmwucmVwbGFjZSgve3txdWVyeX19LyxxdWVyeSksY2IpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdGNiKEl0ZW1zLmZpbHRlcihmdW5jdGlvbiBGaWx0ZXIoeCkge1xyXG5cdFx0XHRcdGlmKFNlYXJjaEZpZWxkcykge1xyXG5cdFx0XHRcdFx0bGV0IHN0YXRlID0gZmFsc2U7XHJcblx0XHRcdFx0XHRTZWFyY2hGaWVsZHMuc3BsaXQoJyAnKS5mb3JFYWNoKGZ1bmN0aW9uIEZvckVhY2goZmllbGQpIHtcclxuXHRcdFx0XHRcdFx0bGV0IGtleXMgPSBmaWVsZC5zcGxpdCgnLicpO1xyXG5cdFx0XHRcdFx0XHRsZXQgdmFsdWUgPSBrZXlzLnJlZHVjZShmdW5jdGlvbiBSZWR1Y2UodmFsLGl0ZW0pIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdmFsW2l0ZW1dO1xyXG5cdFx0XHRcdFx0XHR9LHgpO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYocmVnZXgudGVzdCh2YWx1ZSkpIHN0YXRlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdHJldHVybiBzdGF0ZTtcclxuXHRcdFx0XHR9ZWxzZVxyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgcmV0dXJuIHJlZ2V4LnRlc3QoeCk7XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0cmV0dXJuIHNlYXJjaE9iamVjdCh4KTtcclxuXHRcdFx0fSkpO1xyXG5cdFx0fVxyXG5cclxuXHJcblxyXG5cclxuXHRcdGZ1bmN0aW9uIHNlYXJjaE9iamVjdChvYmopIHtcclxuXHRcdFx0cmV0dXJuIE9iamVjdC5rZXlzKG9iaikucmVkdWNlKGZ1bmN0aW9uIFJlZHVjZSh2YWwsa2V5KSB7XHJcblx0XHRcdFx0bGV0IGNoZWNrID0gZmFsc2U7XHJcblx0XHRcdFx0aWYodHlwZW9mIG9ialtrZXldID09PSAnb2JqZWN0JykgY2hlY2sgPSBzZWFyY2hPYmplY3Qob2JqW2tleV0pO1xyXG5cdFx0XHRcdGVsc2UgY2hlY2sgPSByZWdleC50ZXN0KG9ialtrZXldKTtcclxuXHJcblx0XHRcdFx0aWYoY2hlY2spIHZhbCA9IHRydWU7XHJcblxyXG5cdFx0XHRcdHJldHVybiB2YWw7XHJcblx0XHRcdH0sZmFsc2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcblx0LyogUmVuZGVyaW5nICovXHJcblxyXG5cdGZ1bmN0aW9uIHJlbmRlckhUTUwoKSB7IC8vY29tbWVudFxyXG5cdFx0bGV0IE1haW5JdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdE1haW5JdGVtLmNsYXNzTmFtZSA9ICdjYi1tYWluLWl0ZW0gY2ItcGxhY2Vob2xkZXIgdHJpZ2dlcic7XHJcblxyXG5cclxuXHRcdGxldCBDYXJldCA9IGA8c3ZnIGNsYXNzPVwiY2ItY2FyZXQgdHJpZ2dlclwiIHZpZXdCb3g9XCIwIDAgNTEyIDUxMlwiIGhlaWdodD1cIjIwXCIgd2lkdGg9XCIyMFwiPlxyXG5cdFx0XHRcdFx0XHQ8cGF0aCBjbGFzcz1cInRyaWdnZXJcIiBkPVwibTUwOCAxMDhjLTQtNC0xMS00LTE1IDFsLTIzNyAyNzFsLTIzNy0yNzFjLTQtNS0xMS01LTE1LTFjLTUgNC01IDEwLTEgMTVsMjQ1IDI4MGMyIDMgNSA0IDggNGMzIDAgNi0xIDgtNGwyNDUtMjgwYzQtNSA0LTExLTEtMTV6XCI+PC9wYXRoPlxyXG5cdFx0XHRcdFx0PC9zdmc+YDtcclxuXHJcblx0XHRNYWluSXRlbS5pbm5lckhUTUwgKz0gQ2FyZXQ7XHJcblx0XHRFbGVtZW50LmFwcGVuZENoaWxkKE1haW5JdGVtKTtcclxuXHJcblx0XHRJdGVtQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRJdGVtQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdjYi1pdGVtcyc7XHJcblx0XHRFbGVtZW50LmFwcGVuZENoaWxkKEl0ZW1Db250YWluZXIpO1xyXG5cclxuXHRcdExvYWRpbmdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdExvYWRpbmdDb250YWluZXIuY2xhc3NOYW1lID0gJ2NiLWxvYWRlcic7XHJcblx0XHRFbGVtZW50LmFwcGVuZENoaWxkKExvYWRpbmdDb250YWluZXIpO1xyXG5cclxuXHRcdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLW1haW4taXRlbScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoZSkgPT4ge1xyXG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRzZXRPcGVuZWQoIWlzT3Blbik7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHJlbmRlclNlbGVjdGlvbigpIHtcclxuXHJcblx0XHRsZXQgbWFpbkl0ZW0gPSBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1tYWluLWl0ZW0nKTtcclxuXHJcblx0XHRpZihNdWx0aXBsZSkge1xyXG5cdFx0XHRbXS5zbGljZS5jYWxsKEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNiLW1haW4taXRlbSAuY2ItdGFnJykpLmZvckVhY2goKHQpID0+IHtcclxuXHRcdFx0XHRtYWluSXRlbS5yZW1vdmVDaGlsZCh0KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRpZighU2VsZWN0ZWQpIHJldHVybjtcclxuXHRcdFx0U2VsZWN0ZWQuZm9yRWFjaChpdGVtID0+IHtcclxuXHRcdFx0XHRsZXQgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0XHR0YWcuY2xhc3NOYW1lID0gJ2NiLXRhZyc7XHJcblx0XHRcdFx0XHR0YWcuaW5uZXJIVE1MID0gcGFyc2VUZW1wbGF0ZShpdGVtLFRhZ1RlbXBsYXRlIHx8IFRlbXBsYXRlKSArIGA8c3ZnIHZpZXdCb3g9XCIwIDAgNTEyIDUxMlwiPlxyXG5cdFx0XHRcdFx0XHQ8cGF0aCBkPVwibTI3MSAyNTZsMjM4LTIzOGM0LTQgNC0xMSAwLTE1Yy00LTQtMTEtNC0xNSAwbC0yMzggMjM4bC0yMzgtMjM4Yy00LTQtMTEtNC0xNSAwYy00IDQtNCAxMSAwIDE1bDIzOCAyMzhsLTIzOCAyMzhjLTQgNC00IDExIDAgMTVjMiAyIDUgMyA4IDNjMiAwIDUtMSA3LTNsMjM4LTIzOGwyMzggMjM4YzIgMiA1IDMgNyAzYzMgMCA2LTEgOC0zYzQtNCA0LTExIDAtMTV6XCI+PC9wYXRoPlxyXG5cdFx0XHRcdFx0PC9zdmc+YDtcclxuXHJcblx0XHRcdFx0XHR0YWcucXVlcnlTZWxlY3Rvcignc3ZnJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHJlbW92ZVNlbGVjdGVkLmJpbmQobnVsbCxpdGVtLHRydWUpKTtcclxuXHJcblx0XHRcdFx0bWFpbkl0ZW0uaW5zZXJ0QmVmb3JlKHRhZyxtYWluSXRlbS5jaGlsZHJlblttYWluSXRlbS5jaGlsZHJlbi5sZW5ndGggLSAxXSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aWYoIVNlbGVjdGVkKSByZXR1cm4gW10uc2xpY2UuY2FsbChtYWluSXRlbS5xdWVyeVNlbGVjdG9yQWxsKCcuY2Itc2VsZWN0ZWQtaXRlbSwuY2ItdGFnJykpLmZvckVhY2goIGUgPT4gbWFpbkl0ZW0ucmVtb3ZlQ2hpbGQoZSkpO1xyXG5cdFx0XHRsZXQgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRcdGl0ZW0uY2xhc3NOYW1lID0gJ2NiLXNlbGVjdGVkLWl0ZW0nO1xyXG5cdFx0XHRcdGl0ZW0uaW5uZXJIVE1MID0gcGFyc2VUZW1wbGF0ZShTZWxlY3RlZCxTZWxlY3RlZFRlbXBsYXRlIHx8IFRlbXBsYXRlKTtcclxuXHJcblxyXG5cdFx0XHRsZXQgcHJldmlvdXNJdGVtID0gRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2Itc2VsZWN0ZWQtaXRlbScpO1xyXG5cdFx0XHRpZihwcmV2aW91c0l0ZW0pIG1haW5JdGVtLnJlbW92ZUNoaWxkKHByZXZpb3VzSXRlbSk7XHJcblx0XHRcdG1haW5JdGVtLmluc2VydEJlZm9yZShpdGVtLG1haW5JdGVtLmNoaWxkcmVuW21haW5JdGVtLmNoaWxkcmVuLmxlbmd0aCAtIDFdKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGZldGNoSXRlbXModXJsLGNiKSB7XHJcblx0XHRpZihGZXRjaCkge1xyXG5cdFx0XHRGZXRjaC5hYm9ydCgpO1xyXG5cdFx0XHR0b2dnbGVMb2FkZXIoZmFsc2UpO1xyXG5cdFx0fVxyXG5cdFx0RmV0Y2ggPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHRcdEZldGNoLm9wZW4oJ0dFVCcsdXJsKTtcclxuXHRcdEZldGNoLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdGlmKHRoaXMucmVhZHlTdGF0ZSA9PSA0KSB7XHJcblx0XHRcdFx0dG9nZ2xlTG9hZGVyKGZhbHNlKTtcclxuXHRcdFx0XHRpZih0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCA0MDApIHtcclxuXHRcdFx0XHRcdGNiKChQcm9jZXNzaW5nKSA/IFByb2Nlc3NpbmcoSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCkpIDogSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCkpO1xyXG5cdFx0XHRcdFx0RmV0Y2ggPSBudWxsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0RmV0Y2guc2VuZCgpO1xyXG5cdFx0dG9nZ2xlTG9hZGVyKHRydWUpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gdG9nZ2xlTG9hZGVyKHN0YXRlKSB7XHJcblx0XHRpZihzdGF0ZSkge1xyXG5cdFx0XHRMb2FkaW5nQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG5cdFx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1jYXJldCcpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRMb2FkaW5nQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdFx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1jYXJldCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcblx0XHRJdGVtQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG5cclxuXHRcdGlmKENhdGVnb3JpemUpXHJcblx0XHRcdEl0ZW1zID0gSXRlbXMuc29ydCgoYSxiKSA9PiB7XHJcblx0XHRcdFx0aWYoZ2V0UHJvcGVydHlCeVN0cmluZyhDYXRlZ29yaXplLGEpIDwgZ2V0UHJvcGVydHlCeVN0cmluZyhDYXRlZ29yaXplLGIpKSByZXR1cm4gLTE7XHJcblx0XHRcdFx0aWYoZ2V0UHJvcGVydHlCeVN0cmluZyhDYXRlZ29yaXplLGEpID4gZ2V0UHJvcGVydHlCeVN0cmluZyhDYXRlZ29yaXplLGIpKSByZXR1cm4gMTtcclxuXHRcdFx0XHRyZXR1cm4gMDtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0bGV0IHByZXZpb3VzSXRlbSA9IG51bGw7XHJcblx0XHRJdGVtcy5mb3JFYWNoKChpdGVtLGluZGV4KSA9PiB7XHJcblx0XHRcdGlmKGl0ZW1zICYmIGl0ZW1zLmluZGV4T2YoaXRlbSkgPCAwKSByZXR1cm47XHJcblx0XHRcdGlmKE11bHRpcGxlICYmIFNlbGVjdGVkICYmIFNlbGVjdGVkLmluZGV4T2YoaXRlbSkgPiAtMSB8fCAhTXVsdGlwbGUgJiYgU2VsZWN0ZWQgPT09IGl0ZW0pIHJldHVybjtcclxuXHRcdFx0bGV0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRcdG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpbmRleCk7XHJcblx0XHRcdFx0b3B0aW9uLmlubmVySFRNTCA9IHBhcnNlVGVtcGxhdGUoaXRlbSxUZW1wbGF0ZSk7XHJcblx0XHRcdFx0b3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3RJdGVtLmJpbmQobnVsbCxpdGVtLHRydWUpKTtcclxuXHJcblx0XHRcdGlmKENhdGVnb3JpemUgJiYgKCFwcmV2aW91c0l0ZW0gfHwgZ2V0UHJvcGVydHlCeVN0cmluZyhDYXRlZ29yaXplLHByZXZpb3VzSXRlbSkgIT09IGdldFByb3BlcnR5QnlTdHJpbmcoQ2F0ZWdvcml6ZSxpdGVtKSkpIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ2NhdGVnb3J5JyxnZXRQcm9wZXJ0eUJ5U3RyaW5nKENhdGVnb3JpemUsaXRlbSkpO1xyXG5cclxuXHRcdFx0cHJldmlvdXNJdGVtID0gaXRlbTtcclxuXHRcdFx0SXRlbUNvbnRhaW5lci5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBwYXJzZVRlbXBsYXRlKGRhdGEsdGVtcGxhdGUpIHtcclxuXHRcdGxldCByZSA9IC97e2RhdGFcXC4/KC4rPyk/fX0vO1xyXG5cdFx0bGV0IG07XHJcblx0XHR3aGlsZShtID0gcmUuZXhlYyh0ZW1wbGF0ZSkpIHtcclxuXHRcdFx0bGV0IHNlbGVjdG9yID0gJyc7XHJcblx0XHRcdGxldCB2YWx1ZSA9IGRhdGE7XHJcblx0XHRcdGlmKG1bMV0pIHtcclxuXHRcdFx0XHRzZWxlY3RvciA9ICcuJyArIG1bMV07XHJcblx0XHRcdFx0dmFsdWUgPSBnZXRQcm9wZXJ0eUJ5U3RyaW5nKG1bMV0sZGF0YSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGxldCByZXBsYWNlID0gbmV3IFJlZ0V4cCgne3tkYXRhJyArIHNlbGVjdG9yICsgJ319Jyk7XHJcblx0XHRcdHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZShyZXBsYWNlLHZhbHVlKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGVtcGxhdGU7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBnZXRQcm9wZXJ0eUJ5U3RyaW5nKHNlbGVjdG9yLG9iamVjdCkge1xyXG5cdFx0cmV0dXJuIHNlbGVjdG9yLnNwbGl0KCcuJykucmVkdWNlKCh2YWwsaXRlbSkgPT4ge1xyXG5cdFx0XHRyZXR1cm4gdmFsW2l0ZW1dO1xyXG5cdFx0fSxvYmplY3QpO1xyXG5cdH1cclxuXHJcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7XHJcblx0XHQnZWxlbWVudCc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBFbGVtZW50LFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSB7XHJcblx0XHRcdFx0XHRsZXQgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHgpO1xyXG5cdFx0XHRcdFx0aWYoZWwpIEVsZW1lbnQgPSBlbDtcclxuXHRcdFx0XHRcdGVsc2UgY29uc29sZS5lcnJvcignRWxlbWVudCBub3QgZm91bmQuJyk7XHJcblx0XHRcdFx0fWVsc2UgaWYoeCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSBFbGVtZW50ID0geDtcclxuXHRcdFx0XHRlbHNlIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgYXJndW1lbnQnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCdpdGVtcyc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBGZXRjaFVybCB8fCBJdGVtcyxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHggaW5zdGFuY2VvZiBBcnJheSkgSXRlbXMgPSB4O1xyXG5cdFx0XHRcdGVsc2UgaWYodHlwZW9mIHggPT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdEZldGNoVXJsID0geFxyXG5cdFx0XHRcdFx0aWYoISgve3suKn19L2lnLnRlc3QoRmV0Y2hVcmwpKSkgZmV0Y2hJdGVtcyhGZXRjaFVybCxmdW5jdGlvbihyZXN1bHQpIHtcclxuXHRcdFx0XHRcdFx0SXRlbXMgPSByZXN1bHQ7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBjb25zb2xlLmVycm9yKCdJdGVtcyBtdXN0IGJlIGFuIGFycmF5IG9yIFVSTC4nKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCdzZWFyY2gnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gU2VhcmNoLFxyXG5cdFx0XHRzZXQ6IHNldFNlYXJjaFxyXG5cdFx0fSxcclxuXHRcdCdwbGFjZWhvbGRlcic6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBQbGFjZWhvbGRlcixcclxuXHRcdFx0c2V0OiBzZXRQbGFjZWhvbGRlclxyXG5cdFx0fSxcclxuXHRcdCdtdWx0aXBsZSc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBNdWx0aXBsZSxcclxuXHRcdFx0c2V0OiBzZXRNdWx0aXBsZVxyXG5cdFx0fSxcclxuXHRcdCdzZWxlY3RlZCc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBTZWxlY3RlZFxyXG5cdFx0fSxcclxuXHRcdCd0ZW1wbGF0ZSc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBUZW1wbGF0ZSxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcdFx0VGVtcGxhdGUgPSB4O1xyXG5cdFx0XHRcdFx0cmVuZGVySXRlbXMoKTtcclxuXHRcdFx0XHRcdHJlbmRlclNlbGVjdGlvbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGNvbnNvbGUuZXJyb3IoJ1RlbXBsYXRlIG11c3QgYmUgYSBzdHJpbmcuJyk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQndGFndGVtcGxhdGUnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gVGFnVGVtcGxhdGUgfHwgVGVtcGxhdGUsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZih0eXBlb2YgeCA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdFRhZ1RlbXBsYXRlID0geDtcclxuXHRcdFx0XHRcdHJlbmRlckl0ZW1zKCk7XHJcblx0XHRcdFx0XHRyZW5kZXJTZWxlY3Rpb24oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQnc2VsZWN0ZWR0ZW1wbGF0ZSc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBTZWxlY3RlZFRlbXBsYXRlIHx8IFRlbXBsYXRlLFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSB7XHJcblx0XHRcdFx0XHRTZWxlY3RlZFRlbXBsYXRlID0geDtcclxuXHRcdFx0XHRcdHJlbmRlckl0ZW1zKCk7XHJcblx0XHRcdFx0XHRyZW5kZXJTZWxlY3Rpb24oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQnc2VhcmNoZmllbGRzJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IFNlYXJjaEZpZWxkcyxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgU2VhcmNoRmllbGRzID0geDtcclxuXHRcdFx0XHRlbHNlIGNvbnNvbGUuZXJyb3IoJ1NlYXJjaEZpZWxkcyBtdXN0IGJlIGEgc3RyaW5nLicpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J29uc2VsZWN0Jzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IG9uU2VsZWN0LFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdmdW5jdGlvbicpIG9uU2VsZWN0ID0geDtcclxuXHRcdFx0XHRlbHNlIGlmKCF4KSBvblNlbGVjdCA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQncHJvY2Vzc2luZyc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBQcm9jZXNzaW5nLFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdmdW5jdGlvbicpIFByb2Nlc3NpbmcgPSB4O1xyXG5cdFx0XHRcdGVsc2UgaWYoIXgpIFByb2Nlc3NpbmcgPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J29ucmVtb3ZlJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IG9uUmVtb3ZlLFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdmdW5jdGlvbicpIG9uUmVtb3ZlID0geDtcclxuXHRcdFx0XHRlbHNlIGlmKCF4KSBvblJlbW92ZSA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQnb25hZGQnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gb25BZGQsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZih0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJykgb25BZGQgPSB4O1xyXG5cdFx0XHRcdGVsc2UgaWYoIXgpIG9uQWRkID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCdjYXRlZ29yaXplJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IENhdGVnb3JpemUsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZih0eXBlb2YgeCA9PT0gJ3N0cmluZycpIENhdGVnb3JpemUgPSB4O1xyXG5cdFx0XHRcdGVsc2UgQ2F0ZWdvcml6ZSA9IG51bGw7XHJcblxyXG5cdFx0XHRcdHJlbmRlckl0ZW1zKClcdDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHR0aGlzLnNlbGVjdCA9IGZ1bmN0aW9uIFNlbGVjdChpdGVtKSB7XHJcblx0XHRpZighaXRlbSkgcmV0dXJuIFJlc2V0KCk7XHJcblx0XHRsZXQgbWF0Y2ggPSBJdGVtcy5yZWR1Y2UoKG0saSkgPT4gbSA9IGlzRXF1aXZhbGVudChpdGVtLGkpID8gaSA6IG0sbnVsbCk7XHJcblx0XHRpZihtYXRjaCkgc2VsZWN0SXRlbShtYXRjaCk7XHJcblx0fTtcclxuXHJcblx0dGhpcy5yZW1vdmUgPSBmdW5jdGlvbiBSZW1vdmUoaXRlbSkge1xyXG5cdFx0aWYoIWl0ZW0pIHJldHVybiBSZXNldCgpO1xyXG5cdFx0bGV0IG1hdGNoID0gSXRlbXMucmVkdWNlKChtLGkpID0+IG0gPSBpc0VxdWl2YWxlbnQoaXRlbSxpKSA/IGkgOiBtLG51bGwpO1xyXG5cdFx0aWYobWF0Y2gpIHJlbW92ZVNlbGVjdGVkKG1hdGNoLHRydWUpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gaXNFcXVpdmFsZW50KGEsIGIpIHtcclxuXHRcdGlmKHR5cGVvZiBhICE9PSAnb2JqZWN0JyAmJiB0eXBlb2YgYiAhPT0gJ29iamVjdCcpIHJldHVybiBhID09PSBiO1xyXG5cdFx0bGV0IGFQcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEpO1xyXG5cdFx0bGV0IGJQcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpO1xyXG5cclxuXHRcdGlmIChhUHJvcHMubGVuZ3RoICE9PSBiUHJvcHMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBhUHJvcHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0bGV0IHByb3BOYW1lID0gYVByb3BzW2ldO1xyXG5cclxuXHRcdFx0aWYoYVtwcm9wTmFtZV0gIT09IGJbcHJvcE5hbWVdKSByZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIFJlc2V0KCkge1xyXG5cdFx0aWYoU2VsZWN0ZWQgJiYgU2VsZWN0ZWQuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XHJcblx0XHRcdHZhciBjb3B5ID0gU2VsZWN0ZWQuc2xpY2UoKTtcclxuXHRcdFx0Y29weS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuXHRcdFx0XHRyZW1vdmVTZWxlY3RlZChpdGVtLHRydWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRyZW1vdmVTZWxlY3RlZChTZWxlY3RlZCx0cnVlKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXNldFNlYXJjaCgpO1xyXG5cdH1cclxuXHJcblx0dGhpcy5yZXNldCA9IFJlc2V0O1xyXG5cclxuXHJcblx0aW5pdC5jYWxsKHRoaXMpO1xyXG5cclxuXHRmdW5jdGlvbiBzZXRBcmdzKG9wdHMpIHtcclxuICAgICAgICBmb3IobGV0IGtleSBpbiBkZWZhdWx0cykgdGhpc1trZXldID0gKG9wdHNba2V5XSkgPyBvcHRzW2tleV0gOiBkZWZhdWx0c1trZXldIDtcclxuICAgIH07XHJcblxyXG5cdHJldHVybiBPYmplY3QuZnJlZXplKHRoaXMpO1xyXG4gfVxyXG5cclxuXHJcbi8qIFNwcmVhZCBpdCB0byB0aGUgd29ybGQhICovXHJcbiAoZnVuY3Rpb24gRmFjdG9yeSAoZmFjdG9yeSkge1xyXG4gICAgaWYgKCB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKSBkZWZpbmUoJ0Nob29zZUJ1bXBzJywgZmFjdG9yeSk7XHJcbiAgICBlbHNlIGlmICggdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICkgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5O1xyXG4gICAgZWxzZSB3aW5kb3cuQ2hvb3NlQnVtcHMgPSBmYWN0b3J5O1xyXG59KShDaG9vc2VCdW1wcyk7XHJcbiJdfQ==
