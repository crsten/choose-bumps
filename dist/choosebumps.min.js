(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define([],b):'object'==typeof exports?exports.ChooseBumps=b():a.ChooseBumps=b()})(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)}([function(a,b,c){'use strict';function d(a,b){function c(a){a='boolean'==typeof a?a:!E,!0===a?(t(),z.classList.add('cb-active'),A.scrollTop=0,document.addEventListener('click',c),document.addEventListener('keydown',f),document.addEventListener('keyup',e),n(),E=!0):(m(),z.classList.remove('cb-active'),document.removeEventListener('click',c),document.removeEventListener('keydown',f),document.removeEventListener('keyup',e),N=null,E=!1)}function e(a){27===a.keyCode&&c(!1)}function f(a){switch(/38|40|13/.test(a.keyCode)&&a.preventDefault(),a.keyCode){case 38:a.preventDefault(),i();break;case 40:a.preventDefault(),h();break;case 13:if('function'==typeof Q&&-1===N)return Q(a.target.value),a.target.value='';if(void 0===N||null==N||0>N)return c();;l(X[parseInt(A.children[N].getAttribute('data-id'),10)],!0),N=null;}}function g(a,b,c){c&&c.stopPropagation(),D&&D.constructor===Array?(D.splice(D.indexOf(a),1),!D.length&&(D=null)):D=null,D||z.querySelector('.cb-main-item').classList.add('cb-placeholder'),R&&b&&R(a),q(),t()}function h(){null==N&&(N=-1);let a=A.children.length-1;N=N<a?N+1:a,k()}function i(){A.children.length-1;N=N?N-1:null,k()}function j(){if(N&&!(0>N)){let a=A.children[N],b=A.scrollTop,c=A.scrollTop+A.clientHeight,d=a.offsetTop,e=a.offsetTop+a.clientHeight;d<b?A.scrollTop=a.offsetTop:e>c&&(A.scrollTop=e-A.clientHeight)}}function k(){var a=A.querySelector('.cb-selected');a&&a.classList.remove('cb-selected');let b=A.children[N];b&&b.classList.add('cb-selected'),j()}function l(a,b,d){z.querySelector('.cb-main-item').classList.remove('cb-placeholder'),m(),I?((!D||!D.reduce((b,c)=>b||w(a,c),!1))&&(D?D.push(a):D=[a]),t(),d&&d.stopPropagation(),n()):(D=a,c(!1)),O&&b&&O(a),q()}function m(){C&&(z.querySelector('.cb-search').value='')}function n(){C&&z.querySelector('.cb-search').focus()}function o(a,b){function c(a){return Object.keys(a).reduce(function(b,e){let f=!1;return f='object'==typeof a[e]?c(a[e]):d.test(a[e]),f&&(b=!0),b},!1)}if(!a)return X;let d=new RegExp(a,'i');/{{.*}}/ig.test(U)?r(U.replace(/{{query}}/,a),b):V?(s(!0),V(a,function(a){b(P?P(a):a),s(!1)})):b(X.filter(function(a){if(F){let b=!1;return F.split(' ').forEach(function(c){let e=c.split('.'),f=e.reduce(function(a,b){return a[b]},a);d.test(f)&&(b=!0)}),b}return'string'==typeof a?d.test(a):c(a)}))}function p(){let a=document.createElement('div');a.className='cb-main-item cb-placeholder trigger';let b=`<svg class="cb-caret trigger" viewBox="0 0 512 512" height="20" width="20">
						<path class="trigger" d="m508 108c-4-4-11-4-15 1l-237 271l-237-271c-4-5-11-5-15-1c-5 4-5 10-1 15l245 280c2 3 5 4 8 4c3 0 6-1 8-4l245-280c4-5 4-11-1-15z"></path>
					</svg>`;a.innerHTML+=b,z.appendChild(a),A=document.createElement('div'),A.className='cb-items',z.appendChild(A),B=document.createElement('div'),B.className='cb-loader',z.appendChild(B),a.addEventListener('click',(a)=>{a.stopPropagation(),c(!E)}),z.addEventListener('keypress',(a)=>{13===a.keyCode&&c()})}function q(){let a=z.querySelector('.cb-main-item');if(I){if([].slice.call(z.querySelectorAll('.cb-main-item .cb-tag')).forEach((b)=>{a.removeChild(b)}),!D)return;D.forEach((b)=>{let c=document.createElement('div');c.className='cb-tag',c.innerHTML=u(b,L||K)+`<svg viewBox="0 0 512 512">
						<path d="m271 256l238-238c4-4 4-11 0-15c-4-4-11-4-15 0l-238 238l-238-238c-4-4-11-4-15 0c-4 4-4 11 0 15l238 238l-238 238c-4 4-4 11 0 15c2 2 5 3 8 3c2 0 5-1 7-3l238-238l238 238c2 2 5 3 7 3c3 0 6-1 8-3c4-4 4-11 0-15z"></path>
					</svg>`,c.querySelector('svg').addEventListener('click',g.bind(null,b,!0)),a.insertBefore(c,a.children[a.children.length-1])})}else{if(!D)return[].slice.call(a.querySelectorAll('.cb-selected-item,.cb-tag')).forEach((b)=>a.removeChild(b));let b=document.createElement('div');b.className='cb-selected-item',b.innerHTML=u(D,M||K);let c=z.querySelector('.cb-selected-item');c&&a.removeChild(c),a.insertBefore(b,a.children[a.children.length-1])}}function r(a,b){T&&(T.abort(),s(!1)),T=new XMLHttpRequest,T.open('GET',a),T.onreadystatechange=function(){4==this.readyState&&(s(!1),200<=this.status&&400>this.status?(b(P?P(JSON.parse(this.responseText)):JSON.parse(this.responseText)),T=null):(b([]),T=null))},T.send(),s(!0)}function s(a){a?(B.style.display='block',z.querySelector('.cb-caret').style.display='none'):(B.style.display='',z.querySelector('.cb-caret').style.display='')}function t(a){A.innerHTML='',J&&(X=X.sort((c,a)=>v(J,c)<v(J,a)?-1:v(J,c)>v(J,a)?1:0));let b=null;X.forEach((c,d)=>{if(!(a&&0>a.indexOf(c))&&!(I&&D&&D.reduce((a,b)=>a||w(c,b),!1)||!I&&D===c)){let a=document.createElement('div');a.setAttribute('data-id',d),a.innerHTML=u(c,K),a.addEventListener('click',l.bind(null,c,!0)),J&&(!b||v(J,b)!==v(J,c))&&a.setAttribute('category',v(J,c)),b=c,A.appendChild(a)}})}function u(a,b){for(let c,d=/{{data\.?(.+?)?}}/;c=d.exec(b);){let d='',e=a;c[1]&&(d='.'+c[1],e=v(c[1],a));let f=new RegExp('{{data'+d+'}}');b=b.replace(f,e)}return b}function v(a,b){return a.split('.').reduce((a,b)=>a[b],b)}function w(c,d){if('object'!=typeof c&&'object'!=typeof d)return c===d;let e=Object.getOwnPropertyNames(c),f=Object.getOwnPropertyNames(d);if(e.length!==f.length)return!1;for(let a,b=0;b<e.length;b++)if(a=e[b],c[a]!==d[a])return!1;return!0}function x(){if(D&&D.constructor===Array){var a=D.slice();a.forEach(function(a){g(a,!0)})}else g(D,!0);m()}function y(a){for(let b in Y)this[b]=a[b]?a[b]:Y[b]}if(!1==this instanceof d)return new d(a,b);let z=null,A=null,B=null,C=!1,D=null,E=!1,F=null,G=null,H=null,I=!1,J=null,K='',L=null,M=null,N=null,O=null,P=null,Q=null,R=null,S=null,T=null,U=null,V=null,W=0,X=[],Y={placeholder:'Choose',items:[],search:!1,searchfields:'',noresults:'',multiple:!1,template:'{{data}}',tagtemplate:null,selectedtemplate:null,categorize:null,processing:null,minlength:null,onselect:null,onremove:null,onadd:null};return Object.defineProperties(this,{element:{get:()=>z,set:(a)=>{if('string'==typeof a){let b=document.querySelector(a);b?z=b:console.error('Element not found.')}else a instanceof HTMLElement?z=a:console.error('Invalid argument')}},items:{get:()=>U||V||X,set:(a)=>{a instanceof Array?X=a:'string'==typeof a?(U=a,!/{{.*}}/ig.test(U)&&r(U,function(a){X=a})):'function'==typeof a?(V=a,s(!0),V(null,function(a){X=a instanceof Array?P?P(a):a:[],s(!1)})):console.error('Items must be an array or URL.')}},minlength:{get:()=>W,set:(a)=>{W=isNaN(a)?0:a}},search:{get:()=>C,set:function(a){if(C=!!a,C){z.classList.add('cb-search-enabled');let a=document.createElement('input');a.className='cb-search',a.setAttribute('type','text'),a.setAttribute('size',1),a.setAttribute('autocomplete','off'),a.addEventListener('keyup',function(b){A.removeAttribute('no-results-text'),!1===/38|40|13/.test(b.keyCode)&&this.value.length>=W&&(S&&clearTimeout(S),S=setTimeout(function(){o(a.value,function(b){/{{.*}}/ig.test(U)&&(X=b),V&&(X=b),!X.length&&H&&A.setAttribute('no-results-text',H.replace('{{query}}',a.value)),t(b),N=null,h()})},200))}),a.addEventListener('keypress',function(){this.setAttribute('size',this.value.length+1)}),z.querySelector('.cb-main-item').appendChild(a)}else z.classList.remove('cb-search-enabled')}},placeholder:{get:()=>G,set:function(a){return'string'==typeof a?void(G=a,z.querySelector('.cb-main-item').setAttribute('placeholder',G)):console.error('Placeholder must be a string.')}},noresults:{get:()=>H,set:(a)=>{H='string'==typeof a?a:null}},multiple:{get:()=>I,set:function(a){I=!!a,I&&'object'==typeof D&&D&&(D=[D])}},selected:{get:()=>D},template:{get:()=>K,set:(a)=>{'string'==typeof a?(K=a,t(),q()):console.error('Template must be a string.')}},tagtemplate:{get:()=>L||K,set:(a)=>{'string'==typeof a&&(L=a,t(),q())}},selectedtemplate:{get:()=>M||K,set:(a)=>{'string'==typeof a&&(M=a,t(),q())}},searchfields:{get:()=>F,set:(a)=>{'string'==typeof a?F=a:console.error('SearchFields must be a string.')}},onselect:{get:()=>O,set:(a)=>{'function'==typeof a?O=a:!a&&(O=null)}},processing:{get:()=>P,set:(a)=>{'function'==typeof a?P=a:!a&&(P=null)}},onremove:{get:()=>R,set:(a)=>{'function'==typeof a?R=a:!a&&(R=null)}},onadd:{get:()=>Q,set:(a)=>{'function'==typeof a?Q=a:!a&&(Q=null)}},categorize:{get:()=>J,set:(a)=>{J='string'==typeof a?a:null,t()}}}),this.select=function(a){if(!a)return x();U&&/{{.*}}/ig.test(U)&&(X=[a]);let b=X.length?X.reduce((b,c)=>b=w(a,c)?c:b,null):a;b&&l(b)},this.remove=function(a){if(!a)return x();let b=X.reduce((b,c)=>b=w(a,c)?c:b,null);b&&g(b,!0)},this.reset=x,function(){this.element=a,z.classList.add('choosebumps'),z.setAttribute('tabindex',0),z.getAttribute('placeholder')&&(Y.placeholder=z.getAttribute('placeholder')),p(),y.call(this,b||{})}.call(this),Object.freeze(this)}Object.defineProperty(b,'__esModule',{value:!0});var e=c(1),f=c.n(e);b['default']=d},function(){}])['default']});