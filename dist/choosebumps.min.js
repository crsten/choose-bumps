(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define([],b):'object'==typeof exports?exports.ChooseBumps=b():a.ChooseBumps=b()})(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)}([function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(1),e=c.n(d);b['default']=function(a,b){function c(a){a='boolean'==typeof a?a:!D,!0===a?(s(),y.classList.add('cb-active'),z.scrollTop=0,document.addEventListener('click',c),document.addEventListener('keydown',e),document.addEventListener('keyup',d),m(),D=!0):(l(),y.classList.remove('cb-active'),document.removeEventListener('click',c),document.removeEventListener('keydown',e),document.removeEventListener('keyup',d),M=null,D=!1)}function d(a){27===a.keyCode&&c(!1)}function e(a){switch(/38|40|13/.test(a.keyCode)&&a.preventDefault(),a.keyCode){case 38:a.preventDefault(),h();break;case 40:a.preventDefault(),g();break;case 13:if('function'==typeof P&&-1===M)return P(a.target.value),a.target.value='';if(void 0===M||null==M||0>M)return c();;k(W[parseInt(z.children[M].getAttribute('data-id'),10)],!0),M=null;}}function f(a,b,c){c&&c.stopPropagation(),C&&C.constructor===Array?(C.splice(C.indexOf(a),1),!C.length&&(C=null)):C=null,C||y.querySelector('.cb-main-item').classList.add('cb-placeholder'),Q&&b&&Q(a),p(),s()}function g(){null==M&&(M=-1);let a=z.children.length-1;M=M<a?M+1:a,j()}function h(){z.children.length-1;M=M?M-1:null,j()}function i(){if(M&&!(0>M)){let a=z.children[M],b=z.scrollTop,c=z.scrollTop+z.clientHeight,d=a.offsetTop,e=a.offsetTop+a.clientHeight;d<b?z.scrollTop=a.offsetTop:e>c&&(z.scrollTop=e-z.clientHeight)}}function j(){var a=z.querySelector('.cb-selected');a&&a.classList.remove('cb-selected');let b=z.children[M];b&&b.classList.add('cb-selected'),i()}function k(a,b,d){y.querySelector('.cb-main-item').classList.remove('cb-placeholder'),l(),H?((!C||!C.reduce((b,c)=>b||v(a,c),!1))&&(C?C.push(a):C=[a]),s(),d&&d.stopPropagation(),m()):(C=a,c(!1)),N&&b&&N(a),p()}function l(){B&&(y.querySelector('.cb-search').value='')}function m(){B&&y.querySelector('.cb-search').focus()}function n(a,b){function c(a){return Object.keys(a).reduce(function(b,e){let f=!1;return f='object'==typeof a[e]?c(a[e]):d.test(a[e]),f&&(b=!0),b},!1)}if(!a)return W;let d=new RegExp(a,'i');/{{.*}}/ig.test(T)?q(T.replace(/{{query}}/,a),b):U?(r(!0),U(a,function(a){b(O?O(a):a),r(!1)})):b(W.filter(function(a){if(E){let b=!1;return E.split(' ').forEach(function(c){let e=c.split('.'),f=e.reduce(function(a,b){return a[b]},a);d.test(f)&&(b=!0)}),b}return'string'==typeof a?d.test(a):c(a)}))}function o(){let a=document.createElement('div');a.className='cb-main-item cb-placeholder trigger';let b=`<svg class="cb-caret trigger" viewBox="0 0 512 512" height="20" width="20">
						<path class="trigger" d="m508 108c-4-4-11-4-15 1l-237 271l-237-271c-4-5-11-5-15-1c-5 4-5 10-1 15l245 280c2 3 5 4 8 4c3 0 6-1 8-4l245-280c4-5 4-11-1-15z"></path>
					</svg>`;a.innerHTML+=b,y.appendChild(a),z=document.createElement('div'),z.className='cb-items',y.appendChild(z),A=document.createElement('div'),A.className='cb-loader',y.appendChild(A),a.addEventListener('click',(a)=>{a.stopPropagation(),c(!D)}),y.addEventListener('keypress',(a)=>{13===a.keyCode&&c()})}function p(){let a=y.querySelector('.cb-main-item');if(H){if([].slice.call(y.querySelectorAll('.cb-main-item .cb-tag')).forEach((b)=>{a.removeChild(b)}),!C)return;C.forEach((b)=>{let c=document.createElement('div');c.className='cb-tag',c.innerHTML=t(b,K||J)+`<svg viewBox="0 0 512 512">
						<path d="m271 256l238-238c4-4 4-11 0-15c-4-4-11-4-15 0l-238 238l-238-238c-4-4-11-4-15 0c-4 4-4 11 0 15l238 238l-238 238c-4 4-4 11 0 15c2 2 5 3 8 3c2 0 5-1 7-3l238-238l238 238c2 2 5 3 7 3c3 0 6-1 8-3c4-4 4-11 0-15z"></path>
					</svg>`,c.querySelector('svg').addEventListener('click',f.bind(null,b,!0)),a.insertBefore(c,a.children[a.children.length-1])})}else{if(!C)return[].slice.call(a.querySelectorAll('.cb-selected-item,.cb-tag')).forEach((b)=>a.removeChild(b));let b=document.createElement('div');b.className='cb-selected-item',b.innerHTML=t(C,L||J);let c=y.querySelector('.cb-selected-item');c&&a.removeChild(c),a.insertBefore(b,a.children[a.children.length-1])}}function q(a,b){S&&(S.abort(),r(!1)),S=new XMLHttpRequest,S.open('GET',a),S.onreadystatechange=function(){4==this.readyState&&(r(!1),200<=this.status&&400>this.status?(b(O?O(JSON.parse(this.responseText)):JSON.parse(this.responseText)),S=null):(b([]),S=null))},S.send(),r(!0)}function r(a){a?(A.style.display='block',y.querySelector('.cb-caret').style.display='none'):(A.style.display='',y.querySelector('.cb-caret').style.display='')}function s(a){z.innerHTML='',I&&(W=W.sort((c,a)=>u(I,c)<u(I,a)?-1:u(I,c)>u(I,a)?1:0));let b=null;W.forEach((c,d)=>{if(!(a&&0>a.indexOf(c))&&!(H&&C&&C.reduce((a,b)=>a||v(c,b),!1)||!H&&C===c)){let a=document.createElement('div');a.setAttribute('data-id',d),a.innerHTML=t(c,J),a.addEventListener('click',k.bind(null,c,!0)),I&&(!b||u(I,b)!==u(I,c))&&a.setAttribute('category',u(I,c)),b=c,z.appendChild(a)}})}function t(a,b){for(let c,d=/{{data\.?(.+?)?}}/;c=d.exec(b);){let d='',e=a;c[1]&&(d='.'+c[1],e=u(c[1],a));let f=new RegExp('{{data'+d+'}}');b=b.replace(f,e)}return b}function u(a,b){return a.split('.').reduce((a,b)=>a[b],b)}function v(c,d){if('object'!=typeof c&&'object'!=typeof d)return c===d;let e=Object.getOwnPropertyNames(c),f=Object.getOwnPropertyNames(d);if(e.length!==f.length)return!1;for(let a,b=0;b<e.length;b++)if(a=e[b],c[a]!==d[a])return!1;return!0}function w(){if(C&&C.constructor===Array){var a=C.slice();a.forEach(function(a){f(a,!0)})}else f(C,!0);l()}function x(a){for(let b in X)this[b]=a[b]?a[b]:X[b]}if(!1==this instanceof ChooseBumps)return new ChooseBumps(a,b);let y=null,z=null,A=null,B=!1,C=null,D=!1,E=null,F=null,G=null,H=!1,I=null,J='',K=null,L=null,M=null,N=null,O=null,P=null,Q=null,R=null,S=null,T=null,U=null,V=0,W=[],X={placeholder:'Choose',items:[],search:!1,searchfields:'',noresults:'',multiple:!1,template:'{{data}}',tagtemplate:null,selectedtemplate:null,categorize:null,processing:null,minlength:null,onselect:null,onremove:null,onadd:null};return Object.defineProperties(this,{element:{get:()=>y,set:(a)=>{if('string'==typeof a){let b=document.querySelector(a);b?y=b:console.error('Element not found.')}else a instanceof HTMLElement?y=a:console.error('Invalid argument')}},items:{get:()=>T||U||W,set:(a)=>{a instanceof Array?W=a:'string'==typeof a?(T=a,!/{{.*}}/ig.test(T)&&q(T,function(a){W=a})):'function'==typeof a?(U=a,r(!0),U(null,function(a){W=a instanceof Array?O?O(a):a:[],r(!1)})):console.error('Items must be an array or URL.')}},minlength:{get:()=>V,set:(a)=>{V=isNaN(a)?0:a}},search:{get:()=>B,set:function(a){if(B=!!a,B){y.classList.add('cb-search-enabled');let a=document.createElement('input');a.className='cb-search',a.setAttribute('type','text'),a.setAttribute('size',1),a.setAttribute('autocomplete','off'),a.addEventListener('keyup',function(b){z.removeAttribute('no-results-text'),!1===/38|40|13/.test(b.keyCode)&&this.value.length>=V&&(R&&clearTimeout(R),R=setTimeout(function(){n(a.value,function(b){/{{.*}}/ig.test(T)&&(W=b),U&&(W=b),!W.length&&G&&z.setAttribute('no-results-text',G.replace('{{query}}',a.value)),s(b),M=null,g()})},200))}),a.addEventListener('keypress',function(){this.setAttribute('size',this.value.length+1)}),y.querySelector('.cb-main-item').appendChild(a)}else y.classList.remove('cb-search-enabled')}},placeholder:{get:()=>F,set:function(a){return'string'==typeof a?void(F=a,y.querySelector('.cb-main-item').setAttribute('placeholder',F)):console.error('Placeholder must be a string.')}},noresults:{get:()=>G,set:(a)=>{G='string'==typeof a?a:null}},multiple:{get:()=>H,set:function(a){H=!!a,H&&'object'==typeof C&&C&&(C=[C])}},selected:{get:()=>C},template:{get:()=>J,set:(a)=>{'string'==typeof a?(J=a,s(),p()):console.error('Template must be a string.')}},tagtemplate:{get:()=>K||J,set:(a)=>{'string'==typeof a&&(K=a,s(),p())}},selectedtemplate:{get:()=>L||J,set:(a)=>{'string'==typeof a&&(L=a,s(),p())}},searchfields:{get:()=>E,set:(a)=>{'string'==typeof a?E=a:console.error('SearchFields must be a string.')}},onselect:{get:()=>N,set:(a)=>{'function'==typeof a?N=a:!a&&(N=null)}},processing:{get:()=>O,set:(a)=>{'function'==typeof a?O=a:!a&&(O=null)}},onremove:{get:()=>Q,set:(a)=>{'function'==typeof a?Q=a:!a&&(Q=null)}},onadd:{get:()=>P,set:(a)=>{'function'==typeof a?P=a:!a&&(P=null)}},categorize:{get:()=>I,set:(a)=>{I='string'==typeof a?a:null,s()}}}),this.select=function(a){if(!a)return w();T&&/{{.*}}/ig.test(T)&&(W=[a]);let b=W.length?W.reduce((b,c)=>b=v(a,c)?c:b,null):a;b&&k(b)},this.remove=function(a){if(!a)return w();let b=W.reduce((b,c)=>b=v(a,c)?c:b,null);b&&f(b,!0)},this.reset=w,function(){this.element=a,y.classList.add('choosebumps'),y.setAttribute('tabindex',0),y.getAttribute('placeholder')&&(X.placeholder=y.getAttribute('placeholder')),o(),x.call(this,b||{})}.call(this),Object.freeze(this)}},function(){}])['default']});