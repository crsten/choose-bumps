"use strict";function ChooseBumps(e,t){function n(){this.element=e,C.classList.add("choosebumps"),C.setAttribute("tabindex",0),C.getAttribute("placeholder")&&(Y.placeholder=C.getAttribute("placeholder")),y(),A.call(this,t||{})}function r(e){return"string"!=typeof e?console.error("Placeholder must be a string."):(H=e,void C.querySelector(".cb-main-item").setAttribute("placeholder",H))}function c(e){M=!!e,M&&"object"===("undefined"==typeof N?"undefined":_typeof(N))&&N&&(N=[N])}function o(e){e===!0?(L(),C.classList.add("cb-active"),k.scrollTop=0,document.addEventListener("click",o),document.addEventListener("keydown",i),h(),j=!0):(m(),C.classList.remove("cb-active"),document.removeEventListener("click",o),document.removeEventListener("keydown",i),I=null,j=!1)}function i(e){switch(new RegExp("38|40|13").test(e.keyCode)&&e.preventDefault(),e.keyCode){case 38:e.preventDefault(),s();break;case 40:e.preventDefault(),u();break;case 13:if("function"==typeof G&&I===-1)return G(e.target.value),e.target.value="";if(I<0)return;d(W[parseInt(k.children[I].getAttribute("data-id"),10)],!0),I=null}}function l(e,t,n){n&&n.stopPropagation(),N&&N.constructor===Array?(N.splice(N.indexOf(e),1),N.length||(N=null)):N=null,N||C.querySelector(".cb-main-item").classList.add("cb-placeholder"),U&&t&&U(e),v(),L()}function u(){null===I&&(I=-1);var e=k.children.length-1;I=I<e?I+1:e,f()}function s(){k.children.length-1;I=I?I-1:null,f()}function a(){if(I&&!(I<0)){var e=k.children[I],t=k.scrollTop,n=k.scrollTop+k.clientHeight,r=e.offsetTop,c=e.offsetTop+e.clientHeight;r<t?k.scrollTop=e.offsetTop:c>n&&(k.scrollTop=c-k.clientHeight)}}function f(){var e=k.querySelector(".cb-selected");e&&e.classList.remove("cb-selected");var t=k.children[I];t&&t.classList.add("cb-selected"),a()}function d(e,t,n){C.querySelector(".cb-main-item").classList.remove("cb-placeholder"),m(),M?(N&&N.indexOf(e)<0?N.push(e):N=[e],L(),n&&n.stopPropagation(),h()):(N=e,o(!1)),J&&t&&J(e),v()}function p(e){O=!!e,O?!function(){C.classList.add("cb-search-enabled");var e=document.createElement("input");e.className="cb-search",e.setAttribute("type","text"),e.setAttribute("size",1),e.setAttribute("autocomplete","off"),e.addEventListener("keyup",function(t){k.removeAttribute("no-results-text"),new RegExp("38|40|13").test(t.keyCode)===!1&&this.value.length>=V&&(X&&clearTimeout(X),X=setTimeout(function(){g(e.value,function(t){/{{.*}}/gi.test(Q)&&(W=t),!W.length&&z&&k.setAttribute("no-results-text",z.replace("{{query}}",e.value)),L(t),I=null,u()})},200))}),e.addEventListener("keypress",function(){this.setAttribute("size",this.value.length+1)}),C.querySelector(".cb-main-item").appendChild(e)}():C.classList.remove("cb-search-enabled")}function m(){O&&(C.querySelector(".cb-search").value="")}function h(){O&&C.querySelector(".cb-search").focus()}function g(e,t){function n(e){return Object.keys(e).reduce(function(t,c){var o=!1;return o="object"===_typeof(e[c])?n(e[c]):r.test(e[c]),o&&(t=!0),t},!1)}if(!e)return W;var r=new RegExp(e,"i");/{{.*}}/gi.test(Q)?b(Q.replace(/{{query}}/,e),t):t(W.filter(function(e){if(B){var t=!1;return B.split(" ").forEach(function(n){var c=n.split("."),o=c.reduce(function(e,t){return e[t]},e);r.test(o)&&(t=!0)}),t}return"string"==typeof e?r.test(e):n(e)}))}function y(){var e=document.createElement("div");e.className="cb-main-item cb-placeholder trigger";var t='<svg class="cb-caret trigger" viewBox="0 0 512 512" height="20" width="20">\n\t\t\t\t\t\t<path class="trigger" d="m508 108c-4-4-11-4-15 1l-237 271l-237-271c-4-5-11-5-15-1c-5 4-5 10-1 15l245 280c2 3 5 4 8 4c3 0 6-1 8-4l245-280c4-5 4-11-1-15z"></path>\n\t\t\t\t\t</svg>';e.innerHTML+=t,C.appendChild(e),k=document.createElement("div"),k.className="cb-items",C.appendChild(k),w=document.createElement("div"),w.className="cb-loader",C.appendChild(w),C.querySelector(".cb-main-item").addEventListener("click",function(e){e.stopPropagation(),o(!j)})}function v(){var e=C.querySelector(".cb-main-item");if(M){if([].slice.call(C.querySelectorAll(".cb-main-item .cb-tag")).forEach(function(t){e.removeChild(t)}),!N)return;N.forEach(function(t){var n=document.createElement("div");n.className="cb-tag",n.innerHTML=S(t,_||R)+'<svg viewBox="0 0 512 512">\n\t\t\t\t\t\t<path d="m271 256l238-238c4-4 4-11 0-15c-4-4-11-4-15 0l-238 238l-238-238c-4-4-11-4-15 0c-4 4-4 11 0 15l238 238l-238 238c-4 4-4 11 0 15c2 2 5 3 8 3c2 0 5-1 7-3l238-238l238 238c2 2 5 3 7 3c3 0 6-1 8-3c4-4 4-11 0-15z"></path>\n\t\t\t\t\t</svg>',n.querySelector("svg").addEventListener("click",l.bind(null,t,!0)),e.insertBefore(n,e.children[e.children.length-1])})}else{if(!N)return[].slice.call(e.querySelectorAll(".cb-selected-item,.cb-tag")).forEach(function(t){return e.removeChild(t)});var t=document.createElement("div");t.className="cb-selected-item",t.innerHTML=S(N,D||R);var n=C.querySelector(".cb-selected-item");n&&e.removeChild(n),e.insertBefore(t,e.children[e.children.length-1])}}function b(e,t){K&&(K.abort(),E(!1)),K=new XMLHttpRequest,K.open("GET",e),K.onreadystatechange=function(){4==this.readyState&&(E(!1),this.status>=200&&this.status<400&&(t(F?F(JSON.parse(this.responseText)):JSON.parse(this.responseText)),K=null))},K.send(),E(!0)}function E(e){e?(w.style.display="block",C.querySelector(".cb-caret").style.display="none"):(w.style.display="",C.querySelector(".cb-caret").style.display="")}function L(e){k.innerHTML="",P&&(W=W.sort(function(e,t){return x(P,e)<x(P,t)?-1:x(P,e)>x(P,t)?1:0}));var t=null;W.forEach(function(n,r){if(!(e&&e.indexOf(n)<0||M&&N&&N.indexOf(n)>-1||!M&&N===n)){var c=document.createElement("div");c.setAttribute("data-id",r),c.innerHTML=S(n,R),c.addEventListener("click",d.bind(null,n,!0)),!P||t&&x(P,t)===x(P,n)||c.setAttribute("category",x(P,n)),t=n,k.appendChild(c)}})}function S(e,t){for(var n=/{{data\.?(.+?)?}}/,r=void 0;r=n.exec(t);){var c="",o=e;r[1]&&(c="."+r[1],o=x(r[1],e));var i=new RegExp("{{data"+c+"}}");t=t.replace(i,o)}return t}function x(e,t){return e.split(".").reduce(function(e,t){return e[t]},t)}function T(e,t){if("object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"object"!==("undefined"==typeof t?"undefined":_typeof(t)))return e===t;var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!==r.length)return!1;for(var c=0;c<n.length;c++){var o=n[c];if(e[o]!==t[o])return!1}return!0}function q(){if(N&&N.constructor===Array){var e=N.slice();e.forEach(function(e){l(e,!0)})}else l(N,!0);m()}function A(e){for(var t in Y)this[t]=e[t]?e[t]:Y[t]}if(this instanceof ChooseBumps==!1)return new ChooseBumps(e,t);var C=null,k=null,w=null,O=!1,N=null,j=!1,B=null,H=null,z=null,M=!1,P=null,R="",_=null,D=null,I=null,J=null,F=null,G=null,U=null,X=null,K=null,Q=null,V=0,W=[],Y={placeholder:"Choose",items:[],search:!1,searchfields:"",noresults:"",multiple:!1,template:"{{data}}",tagtemplate:null,selectedtemplate:null,categorize:null,processing:null,minlength:null,onselect:null,onremove:null,onadd:null};return Object.defineProperties(this,{element:{get:function(){return C},set:function(e){if("string"==typeof e){var t=document.querySelector(e);t?C=t:console.error("Element not found.")}else e instanceof HTMLElement?C=e:console.error("Invalid argument")}},items:{get:function(){return Q||W},set:function(e){e instanceof Array?W=e:"string"==typeof e?(Q=e,/{{.*}}/gi.test(Q)||b(Q,function(e){W=e})):console.error("Items must be an array or URL.")}},minlength:{get:function(){return V},set:function(e){V=isNaN(e)?0:e}},search:{get:function(){return O},set:p},placeholder:{get:function(){return H},set:r},noresults:{get:function(){return z},set:function(e){z="string"==typeof e?e:null}},multiple:{get:function(){return M},set:c},selected:{get:function(){return N}},template:{get:function(){return R},set:function(e){"string"==typeof e?(R=e,L(),v()):console.error("Template must be a string.")}},tagtemplate:{get:function(){return _||R},set:function(e){"string"==typeof e&&(_=e,L(),v())}},selectedtemplate:{get:function(){return D||R},set:function(e){"string"==typeof e&&(D=e,L(),v())}},searchfields:{get:function(){return B},set:function(e){"string"==typeof e?B=e:console.error("SearchFields must be a string.")}},onselect:{get:function(){return J},set:function(e){"function"==typeof e?J=e:e||(J=null)}},processing:{get:function(){return F},set:function(e){"function"==typeof e?F=e:e||(F=null)}},onremove:{get:function(){return U},set:function(e){"function"==typeof e?U=e:e||(U=null)}},onadd:{get:function(){return G},set:function(e){"function"==typeof e?G=e:e||(G=null)}},categorize:{get:function(){return P},set:function(e){P="string"==typeof e?e:null,L()}}}),this.select=function(e){if(!e)return q();var t=W.reduce(function(t,n){return t=T(e,n)?n:t},null);t&&d(t)},this.remove=function(e){if(!e)return q();var t=W.reduce(function(t,n){return t=T(e,n)?n:t},null);t&&l(t,!0)},this.reset=q,n.call(this),Object.freeze(this)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define("ChooseBumps",e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e:window.ChooseBumps=e}(ChooseBumps);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNob29zZWJ1bXBzLmpzIl0sIm5hbWVzIjpbIkNob29zZUJ1bXBzIiwiZWxlbWVudCIsIm9wdGlvbnMiLCJpbml0IiwidGhpcyIsIkVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJkZWZhdWx0cyIsInBsYWNlaG9sZGVyIiwicmVuZGVySFRNTCIsInNldEFyZ3MiLCJjYWxsIiwic2V0UGxhY2Vob2xkZXIiLCJ4IiwiY29uc29sZSIsImVycm9yIiwiUGxhY2Vob2xkZXIiLCJxdWVyeVNlbGVjdG9yIiwic2V0TXVsdGlwbGUiLCJzdGF0ZSIsIk11bHRpcGxlIiwiU2VsZWN0ZWQiLCJfdHlwZW9mIiwic2V0T3BlbmVkIiwicmVuZGVySXRlbXMiLCJJdGVtQ29udGFpbmVyIiwic2Nyb2xsVG9wIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiQXJyb3dOYXZpZ2F0aW9uIiwiZm9jdXNTZWFyY2giLCJpc09wZW4iLCJyZXNldFNlYXJjaCIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJTZWxlY3RlZEluZGV4IiwiZSIsIlJlZ0V4cCIsInRlc3QiLCJrZXlDb2RlIiwicHJldmVudERlZmF1bHQiLCJzZWxlY3RQcmV2Iiwic2VsZWN0TmV4dCIsIm9uQWRkIiwidGFyZ2V0IiwidmFsdWUiLCJzZWxlY3RJdGVtIiwiSXRlbXMiLCJwYXJzZUludCIsImNoaWxkcmVuIiwicmVtb3ZlU2VsZWN0ZWQiLCJpdGVtIiwidHJpZ2dlckNhbGxiYWNrIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJjb25zdHJ1Y3RvciIsIkFycmF5Iiwic3BsaWNlIiwiaW5kZXhPZiIsImxlbmd0aCIsIm9uUmVtb3ZlIiwicmVuZGVyU2VsZWN0aW9uIiwibWF4IiwidXBkYXRlU2VsZWN0aW9uIiwic2Nyb2xsU2VsZWN0ZWRJbnRvVmlldyIsInNlbGVjdGVkSXRlbSIsImNvbnRhaW5lclRvcCIsImNvbnRhaW5lckJvdHRvbSIsImNsaWVudEhlaWdodCIsInNlbGVjdGVkSXRlbVRvcCIsIm9mZnNldFRvcCIsInNlbGVjdGVkSXRlbUJvdHRvbSIsIm9sZFNlbGVjdGlvbiIsImVsIiwicHVzaCIsIm9uU2VsZWN0Iiwic2V0U2VhcmNoIiwiU2VhcmNoIiwiU2VhcmNoQm94IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInJlbW92ZUF0dHJpYnV0ZSIsIk1pbkxlbmd0aCIsIlR5cGVUcmVzaG9sZCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzZWFyY2giLCJyZXN1bHQiLCJGZXRjaFVybCIsIk5vUmVzdWx0cyIsInJlcGxhY2UiLCJhcHBlbmRDaGlsZCIsImZvY3VzIiwicXVlcnkiLCJjYiIsInNlYXJjaE9iamVjdCIsIm9iaiIsIk9iamVjdCIsImtleXMiLCJyZWR1Y2UiLCJ2YWwiLCJrZXkiLCJjaGVjayIsInJlZ2V4IiwiZmV0Y2hJdGVtcyIsImZpbHRlciIsIlNlYXJjaEZpZWxkcyIsInNwbGl0IiwiZm9yRWFjaCIsImZpZWxkIiwiTWFpbkl0ZW0iLCJDYXJldCIsImlubmVySFRNTCIsIkxvYWRpbmdDb250YWluZXIiLCJtYWluSXRlbSIsInNsaWNlIiwicXVlcnlTZWxlY3RvckFsbCIsInQiLCJyZW1vdmVDaGlsZCIsInRhZyIsInBhcnNlVGVtcGxhdGUiLCJUYWdUZW1wbGF0ZSIsIlRlbXBsYXRlIiwiYmluZCIsImluc2VydEJlZm9yZSIsIlNlbGVjdGVkVGVtcGxhdGUiLCJwcmV2aW91c0l0ZW0iLCJ1cmwiLCJGZXRjaCIsImFib3J0IiwidG9nZ2xlTG9hZGVyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsIlByb2Nlc3NpbmciLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJzZW5kIiwic3R5bGUiLCJkaXNwbGF5IiwiaXRlbXMiLCJDYXRlZ29yaXplIiwic29ydCIsImEiLCJiIiwiZ2V0UHJvcGVydHlCeVN0cmluZyIsImluZGV4Iiwib3B0aW9uIiwiZGF0YSIsInRlbXBsYXRlIiwicmUiLCJtIiwiZXhlYyIsInNlbGVjdG9yIiwib2JqZWN0IiwiaXNFcXVpdmFsZW50IiwiYVByb3BzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImJQcm9wcyIsImkiLCJwcm9wTmFtZSIsIlJlc2V0IiwiY29weSIsIm9wdHMiLCJzZWFyY2hmaWVsZHMiLCJub3Jlc3VsdHMiLCJtdWx0aXBsZSIsInRhZ3RlbXBsYXRlIiwic2VsZWN0ZWR0ZW1wbGF0ZSIsImNhdGVnb3JpemUiLCJwcm9jZXNzaW5nIiwibWlubGVuZ3RoIiwib25zZWxlY3QiLCJvbnJlbW92ZSIsIm9uYWRkIiwiZGVmaW5lUHJvcGVydGllcyIsImdldCIsInNldCIsIkhUTUxFbGVtZW50IiwiaXNOYU4iLCJzZWxlY3RlZCIsInNlbGVjdCIsIm1hdGNoIiwicmVzZXQiLCJmcmVlemUiLCJTeW1ib2wiLCJpdGVyYXRvciIsImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJleHBvcnRzIiwibW9kdWxlIiwid2luZG93Il0sIm1hcHBpbmdzIjoiQUFBQSxZQVFBLFNBQVNBLGFBQVlDLEVBQVFDLEdBOEM1QixRQUFTQyxLQUNSQyxLQUFLSCxRQUFVQSxFQUNmSSxFQUFRQyxVQUFVQyxJQUFJLGVBQ3RCRixFQUFRRyxhQUFhLFdBQVcsR0FDN0JILEVBQVFJLGFBQWEsaUJBQWdCQyxFQUFTQyxZQUFjTixFQUFRSSxhQUFhLGdCQUNwRkcsSUFFQUMsRUFBUUMsS0FBS1YsS0FBS0YsT0FHbkIsUUFBU2EsR0FBZUMsR0FDdkIsTUFBZ0IsZ0JBQU5BLEdBQXVCQyxRQUFRQyxNQUFNLGtDQUMvQ0MsRUFBY0gsTUFDZFgsR0FBUWUsY0FBYyxpQkFBaUJaLGFBQWEsY0FBY1csSUFHbkUsUUFBU0UsR0FBWUMsR0FDcEJDLElBQVdELEVBQ1JDLEdBQWlDLFlBQWIsbUJBQUFDLEdBQUEsWUFBQUMsUUFBQUQsS0FBeUJBLElBQVVBLEdBQVlBLElBaEVsQyxRQXFFNUJFLEdBQVVKLEdBQ2ZB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LCJmaWxlIjoiY2hvb3NlYnVtcHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vKiAgQ2hvb3NlQnVtcHNcclxuICogIEEgZHJvcGRvd24gc28gc2ltcGxlIGl0IHdpbGwgZ2l2ZSB5b3UgY2hvb3NlLWJ1bXBzIVxyXG4gKiAgQXV0aG9yOiBjYXIuamFjb2JzZW5AZ21haWwuY29tXHJcbiAqICBMaWNlbnNlOiBNSVRcclxuICovXHJcblxyXG5mdW5jdGlvbiBDaG9vc2VCdW1wcyhlbGVtZW50LG9wdGlvbnMpIHtcclxuXHRpZih0aGlzIGluc3RhbmNlb2YgQ2hvb3NlQnVtcHMgPT09IGZhbHNlKSByZXR1cm4gbmV3IENob29zZUJ1bXBzKGVsZW1lbnQsb3B0aW9ucyk7XHJcblxyXG5cdGxldCBFbGVtZW50ID0gbnVsbDtcclxuXHRsZXQgSXRlbUNvbnRhaW5lciA9IG51bGw7XHJcblx0bGV0IExvYWRpbmdDb250YWluZXIgPSBudWxsO1xyXG5cdGxldCBTZWFyY2ggPSBmYWxzZTtcclxuXHRsZXQgU2VsZWN0ZWQgPSBudWxsO1xyXG5cdGxldCBpc09wZW4gPSBmYWxzZTtcclxuXHRsZXQgU2VhcmNoRmllbGRzID0gbnVsbDtcclxuXHRsZXQgUGxhY2Vob2xkZXIgPSBudWxsO1xyXG5cdGxldCBOb1Jlc3VsdHMgPSBudWxsO1xyXG5cdGxldCBNdWx0aXBsZSA9IGZhbHNlO1xyXG5cdGxldCBDYXRlZ29yaXplID0gbnVsbDtcclxuXHRsZXQgVGVtcGxhdGUgPSAnJztcclxuXHRsZXQgVGFnVGVtcGxhdGUgPSBudWxsO1xyXG5cdGxldCBTZWxlY3RlZFRlbXBsYXRlID0gbnVsbDtcclxuXHRsZXQgU2VsZWN0ZWRJbmRleCA9IG51bGw7XHJcblx0bGV0IG9uU2VsZWN0ID0gbnVsbDtcclxuXHRsZXQgUHJvY2Vzc2luZyA9IG51bGw7XHJcblx0bGV0IG9uQWRkID0gbnVsbDtcclxuXHRsZXQgb25SZW1vdmUgPSBudWxsO1xyXG5cdGxldCBUeXBlVHJlc2hvbGQgPSBudWxsO1xyXG5cdGxldCBGZXRjaCA9IG51bGw7XHJcblx0bGV0IEZldGNoVXJsID0gbnVsbDtcclxuXHRsZXQgTWluTGVuZ3RoID0gMDtcclxuXHRsZXQgSXRlbXMgPSBbXTtcclxuXHJcblx0bGV0IGRlZmF1bHRzID0ge1xyXG5cdFx0cGxhY2Vob2xkZXI6ICdDaG9vc2UnLFxyXG5cdFx0aXRlbXM6IFtdLFxyXG5cdFx0c2VhcmNoOiBmYWxzZSxcclxuXHRcdHNlYXJjaGZpZWxkczogJycsXHJcblx0XHRub3Jlc3VsdHM6ICcnLFxyXG5cdFx0bXVsdGlwbGU6IGZhbHNlLFxyXG5cdFx0dGVtcGxhdGU6ICd7e2RhdGF9fScsXHJcblx0XHR0YWd0ZW1wbGF0ZTogbnVsbCxcclxuXHRcdHNlbGVjdGVkdGVtcGxhdGU6IG51bGwsXHJcblx0XHRjYXRlZ29yaXplOiBudWxsLFxyXG5cdFx0cHJvY2Vzc2luZzogbnVsbCxcclxuXHRcdG1pbmxlbmd0aDogbnVsbCxcclxuXHRcdG9uc2VsZWN0OiBudWxsLFxyXG5cdFx0b25yZW1vdmU6IG51bGwsXHJcblx0XHRvbmFkZDogbnVsbFxyXG5cdH07XHJcblxyXG5cdGZ1bmN0aW9uIGluaXQoKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG5cdFx0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjaG9vc2VidW1wcycpO1xyXG5cdFx0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywwKTtcclxuXHRcdGlmKEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicpKSBkZWZhdWx0cy5wbGFjZWhvbGRlciA9IEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicpO1xyXG5cdFx0cmVuZGVySFRNTCgpO1xyXG5cclxuXHRcdHNldEFyZ3MuY2FsbCh0aGlzLG9wdGlvbnMgfHwge30pO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gc2V0UGxhY2Vob2xkZXIoeCkge1xyXG5cdFx0aWYodHlwZW9mIHggIT09ICdzdHJpbmcnKSByZXR1cm4gY29uc29sZS5lcnJvcignUGxhY2Vob2xkZXIgbXVzdCBiZSBhIHN0cmluZy4nKTtcclxuXHRcdFBsYWNlaG9sZGVyID0geDtcclxuXHRcdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLW1haW4taXRlbScpLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLFBsYWNlaG9sZGVyKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHNldE11bHRpcGxlKHN0YXRlKSB7XHJcblx0XHRNdWx0aXBsZSA9IChzdGF0ZSkgPyB0cnVlIDogZmFsc2U7XHJcblx0XHRpZihNdWx0aXBsZSkgaWYodHlwZW9mIFNlbGVjdGVkID09PSAnb2JqZWN0JyAmJiBTZWxlY3RlZCkgU2VsZWN0ZWQgPSBbU2VsZWN0ZWRdO1xyXG5cdH1cclxuXHJcblx0LyogSW50ZXJhY3Rpb25zICovXHJcblxyXG5cdGZ1bmN0aW9uIHNldE9wZW5lZChzdGF0ZSkge1xyXG5cdFx0aWYoc3RhdGUgPT09IHRydWUpIHtcclxuXHRcdFx0cmVuZGVySXRlbXMoKTtcclxuXHRcdFx0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjYi1hY3RpdmUnKTtcclxuXHRcdFx0SXRlbUNvbnRhaW5lci5zY3JvbGxUb3AgPSAwO1xyXG5cdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2V0T3BlbmVkKTtcclxuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsQXJyb3dOYXZpZ2F0aW9uKTtcclxuXHRcdFx0Zm9jdXNTZWFyY2goKTtcclxuXHRcdFx0aXNPcGVuID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRyZXNldFNlYXJjaCgpO1xyXG5cdFx0XHRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NiLWFjdGl2ZScpO1xyXG5cdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2V0T3BlbmVkKTtcclxuXHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsQXJyb3dOYXZpZ2F0aW9uKTtcclxuXHRcdFx0U2VsZWN0ZWRJbmRleCA9IG51bGw7XHJcblx0XHRcdGlzT3BlbiA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gQXJyb3dOYXZpZ2F0aW9uKGUpIHtcclxuXHRcdGlmKG5ldyBSZWdFeHAoJzM4fDQwfDEzJykudGVzdChlLmtleUNvZGUpKSBlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRzd2l0Y2goZS5rZXlDb2RlKSB7XHJcblx0XHRcdGNhc2UgMzg6XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0c2VsZWN0UHJldigpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSA0MDpcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRzZWxlY3ROZXh0KCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIDEzOlxyXG5cdFx0XHRpZih0eXBlb2Ygb25BZGQgPT09ICdmdW5jdGlvbicgJiYgU2VsZWN0ZWRJbmRleCA9PT0gLTEpe1xyXG5cdFx0XHRcdG9uQWRkKGUudGFyZ2V0LnZhbHVlKTtcclxuXHRcdFx0XHRyZXR1cm4gZS50YXJnZXQudmFsdWUgPSAnJztcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihTZWxlY3RlZEluZGV4IDwgMCkgcmV0dXJuO1xyXG5cdFx0XHRzZWxlY3RJdGVtKEl0ZW1zW3BhcnNlSW50KEl0ZW1Db250YWluZXIuY2hpbGRyZW5bU2VsZWN0ZWRJbmRleF0uZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyksMTApXSx0cnVlKTtcclxuXHRcdFx0U2VsZWN0ZWRJbmRleCA9IG51bGw7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyogU2VsZWN0aW5nICovXHJcblxyXG5cdGZ1bmN0aW9uIHJlbW92ZVNlbGVjdGVkKGl0ZW0sdHJpZ2dlckNhbGxiYWNrLGV2ZW50KSB7XHJcblx0XHRpZihldmVudCkgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRpZihTZWxlY3RlZCAmJiBTZWxlY3RlZC5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcclxuXHRcdFx0U2VsZWN0ZWQuc3BsaWNlKFNlbGVjdGVkLmluZGV4T2YoaXRlbSksMSk7XHJcblx0XHRcdGlmKCFTZWxlY3RlZC5sZW5ndGgpIFNlbGVjdGVkID0gbnVsbDtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRTZWxlY3RlZCA9IG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYoIVNlbGVjdGVkKSBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1tYWluLWl0ZW0nKS5jbGFzc0xpc3QuYWRkKCdjYi1wbGFjZWhvbGRlcicpO1xyXG5cdFx0aWYob25SZW1vdmUgJiYgdHJpZ2dlckNhbGxiYWNrKSBvblJlbW92ZShpdGVtKTtcclxuXHRcdHJlbmRlclNlbGVjdGlvbigpO1xyXG5cdFx0cmVuZGVySXRlbXMoKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHNlbGVjdE5leHQoKSB7XHJcbiAgICAgICAgaWYoU2VsZWN0ZWRJbmRleCA9PT0gbnVsbCkgU2VsZWN0ZWRJbmRleCA9IC0xO1xyXG4gICAgICAgIGxldCBtYXggPSBJdGVtQ29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgIFNlbGVjdGVkSW5kZXggPSAoU2VsZWN0ZWRJbmRleCA8IG1heCkgPyBTZWxlY3RlZEluZGV4ICsgMSA6IG1heDtcclxuICAgICAgICB1cGRhdGVTZWxlY3Rpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZWxlY3RQcmV2KCkge1xyXG4gICAgICAgIGxldCBtYXggPSBJdGVtQ29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgIFNlbGVjdGVkSW5kZXggPSAoIVNlbGVjdGVkSW5kZXgpID8gbnVsbCA6IFNlbGVjdGVkSW5kZXggLSAxO1xyXG4gICAgICAgIHVwZGF0ZVNlbGVjdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNjcm9sbFNlbGVjdGVkSW50b1ZpZXcoKSB7XHJcblx0XHRpZighU2VsZWN0ZWRJbmRleCB8fCBTZWxlY3RlZEluZGV4IDwgMCkgcmV0dXJuO1xyXG5cdFx0bGV0IHNlbGVjdGVkSXRlbSA9IEl0ZW1Db250YWluZXIuY2hpbGRyZW5bU2VsZWN0ZWRJbmRleF07XHJcblx0XHRsZXQgY29udGFpbmVyVG9wID0gSXRlbUNvbnRhaW5lci5zY3JvbGxUb3A7XHJcblx0XHRsZXQgY29udGFpbmVyQm90dG9tID0gSXRlbUNvbnRhaW5lci5zY3JvbGxUb3AgKyBJdGVtQ29udGFpbmVyLmNsaWVudEhlaWdodDtcclxuXHRcdGxldCBzZWxlY3RlZEl0ZW1Ub3AgPSBzZWxlY3RlZEl0ZW0ub2Zmc2V0VG9wO1xyXG5cdFx0bGV0IHNlbGVjdGVkSXRlbUJvdHRvbSA9IHNlbGVjdGVkSXRlbS5vZmZzZXRUb3AgKyBzZWxlY3RlZEl0ZW0uY2xpZW50SGVpZ2h0O1xyXG5cdFx0aWYoc2VsZWN0ZWRJdGVtVG9wIDwgY29udGFpbmVyVG9wKSBJdGVtQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNlbGVjdGVkSXRlbS5vZmZzZXRUb3A7XHJcblx0XHRlbHNlIGlmKHNlbGVjdGVkSXRlbUJvdHRvbSA+IGNvbnRhaW5lckJvdHRvbSkgSXRlbUNvbnRhaW5lci5zY3JvbGxUb3AgPSBzZWxlY3RlZEl0ZW1Cb3R0b20gLSBJdGVtQ29udGFpbmVyLmNsaWVudEhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVTZWxlY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIG9sZFNlbGVjdGlvbiA9IEl0ZW1Db250YWluZXIucXVlcnlTZWxlY3RvcignLmNiLXNlbGVjdGVkJyk7XHJcbiAgICAgICAgaWYob2xkU2VsZWN0aW9uKSBvbGRTZWxlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnY2Itc2VsZWN0ZWQnKTtcclxuICAgICAgICBsZXQgZWwgPSBJdGVtQ29udGFpbmVyLmNoaWxkcmVuW1NlbGVjdGVkSW5kZXhdO1xyXG4gICAgICAgIGlmKGVsKSBlbC5jbGFzc0xpc3QuYWRkKCdjYi1zZWxlY3RlZCcpO1xyXG4gICAgICAgIHNjcm9sbFNlbGVjdGVkSW50b1ZpZXcoKTtcclxuICAgIH1cclxuXHJcblx0ZnVuY3Rpb24gc2VsZWN0SXRlbShpdGVtLHRyaWdnZXJDYWxsYmFjayxldmVudCkge1xyXG5cdFx0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2ItbWFpbi1pdGVtJykuY2xhc3NMaXN0LnJlbW92ZSgnY2ItcGxhY2Vob2xkZXInKTtcclxuXHRcdHJlc2V0U2VhcmNoKCk7XHJcblxyXG5cdFx0aWYoTXVsdGlwbGUpIHtcclxuXHRcdFx0aWYoU2VsZWN0ZWQgJiYgU2VsZWN0ZWQuaW5kZXhPZihpdGVtKSA8IDApIFNlbGVjdGVkLnB1c2goaXRlbSk7XHJcblx0XHRcdGVsc2UgU2VsZWN0ZWQgPSBbaXRlbV07XHJcblxyXG5cdFx0XHRyZW5kZXJJdGVtcygpO1xyXG5cdFx0XHRpZihldmVudCkgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdGZvY3VzU2VhcmNoKCk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0U2VsZWN0ZWQgPSBpdGVtO1xyXG5cdFx0XHRzZXRPcGVuZWQoZmFsc2UpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmKG9uU2VsZWN0ICYmIHRyaWdnZXJDYWxsYmFjaykgb25TZWxlY3QoaXRlbSk7XHJcblx0XHRyZW5kZXJTZWxlY3Rpb24oKTtcclxuXHR9XHJcblxyXG5cdC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcblxyXG4gICAgLyogU2VhcmNoaW5nICovXHJcblxyXG4gICAgZnVuY3Rpb24gc2V0U2VhcmNoKHN0YXRlKSB7XHJcblx0XHRTZWFyY2ggPSAoc3RhdGUpID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuXHRcdGlmKFNlYXJjaCkge1xyXG5cdFx0XHRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NiLXNlYXJjaC1lbmFibGVkJyk7XHJcblx0XHRcdGxldCBTZWFyY2hCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG5cdFx0XHRcdFNlYXJjaEJveC5jbGFzc05hbWUgPSAnY2Itc2VhcmNoJztcclxuXHRcdFx0XHRTZWFyY2hCb3guc2V0QXR0cmlidXRlKCd0eXBlJywndGV4dCcpO1xyXG5cdFx0XHRcdFNlYXJjaEJveC5zZXRBdHRyaWJ1dGUoJ3NpemUnLDEpO1xyXG5cdFx0XHRcdFNlYXJjaEJveC5zZXRBdHRyaWJ1dGUoJ2F1dG9jb21wbGV0ZScsJ29mZicpO1xyXG5cclxuXHRcdFx0XHRTZWFyY2hCb3guYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLGZ1bmN0aW9uIEtleVVwKGUpIHtcclxuXHRcdFx0XHRcdEl0ZW1Db250YWluZXIucmVtb3ZlQXR0cmlidXRlKCduby1yZXN1bHRzLXRleHQnKTtcclxuXHRcdFx0XHRcdGlmKG5ldyBSZWdFeHAoJzM4fDQwfDEzJykudGVzdChlLmtleUNvZGUpID09PSBmYWxzZSAmJiB0aGlzLnZhbHVlLmxlbmd0aCA+PSBNaW5MZW5ndGgpIHtcclxuXHRcdFx0XHRcdFx0VHlwZVRyZXNob2xkICYmIGNsZWFyVGltZW91dChUeXBlVHJlc2hvbGQpO1xyXG5cdFx0XHRcdFx0XHRUeXBlVHJlc2hvbGQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRcdFx0c2VhcmNoKFNlYXJjaEJveC52YWx1ZSxmdW5jdGlvbihyZXN1bHQpe1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYoL3t7Lip9fS9pZy50ZXN0KEZldGNoVXJsKSkgSXRlbXMgPSByZXN1bHQ7XHJcblxyXG5cdFx0XHRcdFx0XHRcdFx0aWYoIUl0ZW1zLmxlbmd0aCAmJiBOb1Jlc3VsdHMpIEl0ZW1Db250YWluZXIuc2V0QXR0cmlidXRlKCduby1yZXN1bHRzLXRleHQnLE5vUmVzdWx0cy5yZXBsYWNlKCd7e3F1ZXJ5fX0nLFNlYXJjaEJveC52YWx1ZSkpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdHJlbmRlckl0ZW1zKHJlc3VsdCk7XHJcblx0XHRcdFx0XHRcdFx0XHRTZWxlY3RlZEluZGV4ID0gbnVsbDtcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGVjdE5leHQoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fSwyMDApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRTZWFyY2hCb3guYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLGZ1bmN0aW9uIEtleVByZXNzKCkge1xyXG5cdFx0XHRcdFx0dGhpcy5zZXRBdHRyaWJ1dGUoJ3NpemUnLHRoaXMudmFsdWUubGVuZ3RoICsgMSk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1tYWluLWl0ZW0nKS5hcHBlbmRDaGlsZChTZWFyY2hCb3gpO1xyXG5cdFx0fWVsc2UgRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjYi1zZWFyY2gtZW5hYmxlZCcpO1xyXG5cdH1cclxuXHJcbiAgICBmdW5jdGlvbiByZXNldFNlYXJjaCgpIHtcclxuXHRcdGlmKCFTZWFyY2gpIHJldHVybjtcclxuXHRcdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLXNlYXJjaCcpLnZhbHVlID0gJyc7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBmb2N1c1NlYXJjaCgpIHtcclxuXHRcdGlmKCFTZWFyY2gpIHJldHVybjtcclxuXHRcdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLXNlYXJjaCcpLmZvY3VzKCk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBzZWFyY2gocXVlcnksY2IpIHtcclxuXHRcdGlmKCFxdWVyeSkgcmV0dXJuIEl0ZW1zO1xyXG5cdFx0bGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChxdWVyeSwnaScpO1xyXG5cclxuXHRcdGlmKC97ey4qfX0vaWcudGVzdChGZXRjaFVybCkpIHtcclxuXHRcdFx0ZmV0Y2hJdGVtcyhGZXRjaFVybC5yZXBsYWNlKC97e3F1ZXJ5fX0vLHF1ZXJ5KSxjYik7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0Y2IoSXRlbXMuZmlsdGVyKGZ1bmN0aW9uIEZpbHRlcih4KSB7XHJcblx0XHRcdFx0aWYoU2VhcmNoRmllbGRzKSB7XHJcblx0XHRcdFx0XHRsZXQgc3RhdGUgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFNlYXJjaEZpZWxkcy5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gRm9yRWFjaChmaWVsZCkge1xyXG5cdFx0XHRcdFx0XHRsZXQga2V5cyA9IGZpZWxkLnNwbGl0KCcuJyk7XHJcblx0XHRcdFx0XHRcdGxldCB2YWx1ZSA9IGtleXMucmVkdWNlKGZ1bmN0aW9uIFJlZHVjZSh2YWwsaXRlbSkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiB2YWxbaXRlbV07XHJcblx0XHRcdFx0XHRcdH0seCk7XHJcblxyXG5cdFx0XHRcdFx0XHRpZihyZWdleC50ZXN0KHZhbHVlKSkgc3RhdGUgPSB0cnVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0cmV0dXJuIHN0YXRlO1xyXG5cdFx0XHRcdH1lbHNlXHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSByZXR1cm4gcmVnZXgudGVzdCh4KTtcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRyZXR1cm4gc2VhcmNoT2JqZWN0KHgpO1xyXG5cdFx0XHR9KSk7XHJcblx0XHR9XHJcblxyXG5cclxuXHJcblxyXG5cdFx0ZnVuY3Rpb24gc2VhcmNoT2JqZWN0KG9iaikge1xyXG5cdFx0XHRyZXR1cm4gT2JqZWN0LmtleXMob2JqKS5yZWR1Y2UoZnVuY3Rpb24gUmVkdWNlKHZhbCxrZXkpIHtcclxuXHRcdFx0XHRsZXQgY2hlY2sgPSBmYWxzZTtcclxuXHRcdFx0XHRpZih0eXBlb2Ygb2JqW2tleV0gPT09ICdvYmplY3QnKSBjaGVjayA9IHNlYXJjaE9iamVjdChvYmpba2V5XSk7XHJcblx0XHRcdFx0ZWxzZSBjaGVjayA9IHJlZ2V4LnRlc3Qob2JqW2tleV0pO1xyXG5cclxuXHRcdFx0XHRpZihjaGVjaykgdmFsID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHZhbDtcclxuXHRcdFx0fSxmYWxzZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuXHQvKiBSZW5kZXJpbmcgKi9cclxuXHJcblx0ZnVuY3Rpb24gcmVuZGVySFRNTCgpIHsgLy9jb21tZW50XHJcblx0XHRsZXQgTWFpbkl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0TWFpbkl0ZW0uY2xhc3NOYW1lID0gJ2NiLW1haW4taXRlbSBjYi1wbGFjZWhvbGRlciB0cmlnZ2VyJztcclxuXHJcblxyXG5cdFx0bGV0IENhcmV0ID0gYDxzdmcgY2xhc3M9XCJjYi1jYXJldCB0cmlnZ2VyXCIgdmlld0JveD1cIjAgMCA1MTIgNTEyXCIgaGVpZ2h0PVwiMjBcIiB3aWR0aD1cIjIwXCI+XHJcblx0XHRcdFx0XHRcdDxwYXRoIGNsYXNzPVwidHJpZ2dlclwiIGQ9XCJtNTA4IDEwOGMtNC00LTExLTQtMTUgMWwtMjM3IDI3MWwtMjM3LTI3MWMtNC01LTExLTUtMTUtMWMtNSA0LTUgMTAtMSAxNWwyNDUgMjgwYzIgMyA1IDQgOCA0YzMgMCA2LTEgOC00bDI0NS0yODBjNC01IDQtMTEtMS0xNXpcIj48L3BhdGg+XHJcblx0XHRcdFx0XHQ8L3N2Zz5gO1xyXG5cclxuXHRcdE1haW5JdGVtLmlubmVySFRNTCArPSBDYXJldDtcclxuXHRcdEVsZW1lbnQuYXBwZW5kQ2hpbGQoTWFpbkl0ZW0pO1xyXG5cclxuXHRcdEl0ZW1Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdEl0ZW1Db250YWluZXIuY2xhc3NOYW1lID0gJ2NiLWl0ZW1zJztcclxuXHRcdEVsZW1lbnQuYXBwZW5kQ2hpbGQoSXRlbUNvbnRhaW5lcik7XHJcblxyXG5cdFx0TG9hZGluZ0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0TG9hZGluZ0NvbnRhaW5lci5jbGFzc05hbWUgPSAnY2ItbG9hZGVyJztcclxuXHRcdEVsZW1lbnQuYXBwZW5kQ2hpbGQoTG9hZGluZ0NvbnRhaW5lcik7XHJcblxyXG5cdFx0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2ItbWFpbi1pdGVtJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChlKSA9PiB7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdHNldE9wZW5lZCghaXNPcGVuKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gcmVuZGVyU2VsZWN0aW9uKCkge1xyXG5cclxuXHRcdGxldCBtYWluSXRlbSA9IEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLW1haW4taXRlbScpO1xyXG5cclxuXHRcdGlmKE11bHRpcGxlKSB7XHJcblx0XHRcdFtdLnNsaWNlLmNhbGwoRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2ItbWFpbi1pdGVtIC5jYi10YWcnKSkuZm9yRWFjaCgodCkgPT4ge1xyXG5cdFx0XHRcdG1haW5JdGVtLnJlbW92ZUNoaWxkKHQpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGlmKCFTZWxlY3RlZCkgcmV0dXJuO1xyXG5cdFx0XHRTZWxlY3RlZC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG5cdFx0XHRcdGxldCB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRcdHRhZy5jbGFzc05hbWUgPSAnY2ItdGFnJztcclxuXHRcdFx0XHRcdHRhZy5pbm5lckhUTUwgPSBwYXJzZVRlbXBsYXRlKGl0ZW0sVGFnVGVtcGxhdGUgfHwgVGVtcGxhdGUpICsgYDxzdmcgdmlld0JveD1cIjAgMCA1MTIgNTEyXCI+XHJcblx0XHRcdFx0XHRcdDxwYXRoIGQ9XCJtMjcxIDI1NmwyMzgtMjM4YzQtNCA0LTExIDAtMTVjLTQtNC0xMS00LTE1IDBsLTIzOCAyMzhsLTIzOC0yMzhjLTQtNC0xMS00LTE1IDBjLTQgNC00IDExIDAgMTVsMjM4IDIzOGwtMjM4IDIzOGMtNCA0LTQgMTEgMCAxNWMyIDIgNSAzIDggM2MyIDAgNS0xIDctM2wyMzgtMjM4bDIzOCAyMzhjMiAyIDUgMyA3IDNjMyAwIDYtMSA4LTNjNC00IDQtMTEgMC0xNXpcIj48L3BhdGg+XHJcblx0XHRcdFx0XHQ8L3N2Zz5gO1xyXG5cclxuXHRcdFx0XHRcdHRhZy5xdWVyeVNlbGVjdG9yKCdzdmcnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycscmVtb3ZlU2VsZWN0ZWQuYmluZChudWxsLGl0ZW0sdHJ1ZSkpO1xyXG5cclxuXHRcdFx0XHRtYWluSXRlbS5pbnNlcnRCZWZvcmUodGFnLG1haW5JdGVtLmNoaWxkcmVuW21haW5JdGVtLmNoaWxkcmVuLmxlbmd0aCAtIDFdKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpZighU2VsZWN0ZWQpIHJldHVybiBbXS5zbGljZS5jYWxsKG1haW5JdGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYi1zZWxlY3RlZC1pdGVtLC5jYi10YWcnKSkuZm9yRWFjaCggZSA9PiBtYWluSXRlbS5yZW1vdmVDaGlsZChlKSk7XHJcblx0XHRcdGxldCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdGl0ZW0uY2xhc3NOYW1lID0gJ2NiLXNlbGVjdGVkLWl0ZW0nO1xyXG5cdFx0XHRpdGVtLmlubmVySFRNTCA9IHBhcnNlVGVtcGxhdGUoU2VsZWN0ZWQsU2VsZWN0ZWRUZW1wbGF0ZSB8fCBUZW1wbGF0ZSk7XHJcblxyXG5cdFx0XHRsZXQgcHJldmlvdXNJdGVtID0gRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2Itc2VsZWN0ZWQtaXRlbScpO1xyXG5cdFx0XHRpZihwcmV2aW91c0l0ZW0pIG1haW5JdGVtLnJlbW92ZUNoaWxkKHByZXZpb3VzSXRlbSk7XHJcblx0XHRcdG1haW5JdGVtLmluc2VydEJlZm9yZShpdGVtLG1haW5JdGVtLmNoaWxkcmVuW21haW5JdGVtLmNoaWxkcmVuLmxlbmd0aCAtIDFdKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGZldGNoSXRlbXModXJsLGNiKSB7XHJcblx0XHRpZihGZXRjaCkge1xyXG5cdFx0XHRGZXRjaC5hYm9ydCgpO1xyXG5cdFx0XHR0b2dnbGVMb2FkZXIoZmFsc2UpO1xyXG5cdFx0fVxyXG5cdFx0RmV0Y2ggPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHRcdEZldGNoLm9wZW4oJ0dFVCcsdXJsKTtcclxuXHRcdEZldGNoLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdGlmKHRoaXMucmVhZHlTdGF0ZSA9PSA0KSB7XHJcblx0XHRcdFx0dG9nZ2xlTG9hZGVyKGZhbHNlKTtcclxuXHRcdFx0XHRpZih0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCA0MDApIHtcclxuXHRcdFx0XHRcdGNiKChQcm9jZXNzaW5nKSA/IFByb2Nlc3NpbmcoSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCkpIDogSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCkpO1xyXG5cdFx0XHRcdFx0RmV0Y2ggPSBudWxsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0RmV0Y2guc2VuZCgpO1xyXG5cdFx0dG9nZ2xlTG9hZGVyKHRydWUpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gdG9nZ2xlTG9hZGVyKHN0YXRlKSB7XHJcblx0XHRpZihzdGF0ZSkge1xyXG5cdFx0XHRMb2FkaW5nQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG5cdFx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1jYXJldCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0TG9hZGluZ0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcblx0XHRcdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLWNhcmV0Jykuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuXHRcdEl0ZW1Db250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcblxyXG5cdFx0aWYoQ2F0ZWdvcml6ZSlcclxuXHRcdFx0SXRlbXMgPSBJdGVtcy5zb3J0KChhLGIpID0+IHtcclxuXHRcdFx0XHRpZihnZXRQcm9wZXJ0eUJ5U3RyaW5nKENhdGVnb3JpemUsYSkgPCBnZXRQcm9wZXJ0eUJ5U3RyaW5nKENhdGVnb3JpemUsYikpIHJldHVybiAtMTtcclxuXHRcdFx0XHRpZihnZXRQcm9wZXJ0eUJ5U3RyaW5nKENhdGVnb3JpemUsYSkgPiBnZXRQcm9wZXJ0eUJ5U3RyaW5nKENhdGVnb3JpemUsYikpIHJldHVybiAxO1xyXG5cdFx0XHRcdHJldHVybiAwO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRsZXQgcHJldmlvdXNJdGVtID0gbnVsbDtcclxuXHRcdEl0ZW1zLmZvckVhY2goKGl0ZW0saW5kZXgpID0+IHtcclxuXHRcdFx0aWYoaXRlbXMgJiYgaXRlbXMuaW5kZXhPZihpdGVtKSA8IDApIHJldHVybjtcclxuXHRcdFx0aWYoTXVsdGlwbGUgJiYgU2VsZWN0ZWQgJiYgU2VsZWN0ZWQuaW5kZXhPZihpdGVtKSA+IC0xIHx8ICFNdWx0aXBsZSAmJiBTZWxlY3RlZCA9PT0gaXRlbSkgcmV0dXJuO1xyXG5cdFx0XHRsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0b3B0aW9uLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGluZGV4KTtcclxuXHRcdFx0XHRvcHRpb24uaW5uZXJIVE1MID0gcGFyc2VUZW1wbGF0ZShpdGVtLFRlbXBsYXRlKTtcclxuXHRcdFx0XHRvcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdEl0ZW0uYmluZChudWxsLGl0ZW0sdHJ1ZSkpO1xyXG5cclxuXHRcdFx0aWYoQ2F0ZWdvcml6ZSAmJiAoIXByZXZpb3VzSXRlbSB8fCBnZXRQcm9wZXJ0eUJ5U3RyaW5nKENhdGVnb3JpemUscHJldmlvdXNJdGVtKSAhPT0gZ2V0UHJvcGVydHlCeVN0cmluZyhDYXRlZ29yaXplLGl0ZW0pKSkgb3B0aW9uLnNldEF0dHJpYnV0ZSgnY2F0ZWdvcnknLGdldFByb3BlcnR5QnlTdHJpbmcoQ2F0ZWdvcml6ZSxpdGVtKSk7XHJcblxyXG5cdFx0XHRwcmV2aW91c0l0ZW0gPSBpdGVtO1xyXG5cdFx0XHRJdGVtQ29udGFpbmVyLmFwcGVuZENoaWxkKG9wdGlvbik7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHBhcnNlVGVtcGxhdGUoZGF0YSx0ZW1wbGF0ZSkge1xyXG5cdFx0bGV0IHJlID0gL3t7ZGF0YVxcLj8oLis/KT99fS87XHJcblx0XHRsZXQgbTtcclxuXHRcdHdoaWxlKG0gPSByZS5leGVjKHRlbXBsYXRlKSkge1xyXG5cdFx0XHRsZXQgc2VsZWN0b3IgPSAnJztcclxuXHRcdFx0bGV0IHZhbHVlID0gZGF0YTtcclxuXHRcdFx0aWYobVsxXSkge1xyXG5cdFx0XHRcdHNlbGVjdG9yID0gJy4nICsgbVsxXTtcclxuXHRcdFx0XHR2YWx1ZSA9IGdldFByb3BlcnR5QnlTdHJpbmcobVsxXSxkYXRhKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bGV0IHJlcGxhY2UgPSBuZXcgUmVnRXhwKCd7e2RhdGEnICsgc2VsZWN0b3IgKyAnfX0nKTtcclxuXHRcdFx0dGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKHJlcGxhY2UsdmFsdWUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0ZW1wbGF0ZTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGdldFByb3BlcnR5QnlTdHJpbmcoc2VsZWN0b3Isb2JqZWN0KSB7XHJcblx0XHRyZXR1cm4gc2VsZWN0b3Iuc3BsaXQoJy4nKS5yZWR1Y2UoKHZhbCxpdGVtKSA9PiB7XHJcblx0XHRcdHJldHVybiB2YWxbaXRlbV07XHJcblx0XHR9LG9iamVjdCk7XHJcblx0fVxyXG5cclxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtcclxuXHRcdCdlbGVtZW50Jzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IEVsZW1lbnQsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZih0eXBlb2YgeCA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdGxldCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoeCk7XHJcblx0XHRcdFx0XHRpZihlbCkgRWxlbWVudCA9IGVsO1xyXG5cdFx0XHRcdFx0ZWxzZSBjb25zb2xlLmVycm9yKCdFbGVtZW50IG5vdCBmb3VuZC4nKTtcclxuXHRcdFx0XHR9ZWxzZSBpZih4IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIEVsZW1lbnQgPSB4O1xyXG5cdFx0XHRcdGVsc2UgY29uc29sZS5lcnJvcignSW52YWxpZCBhcmd1bWVudCcpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J2l0ZW1zJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IEZldGNoVXJsIHx8IEl0ZW1zLFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYoeCBpbnN0YW5jZW9mIEFycmF5KSBJdGVtcyA9IHg7XHJcblx0XHRcdFx0ZWxzZSBpZih0eXBlb2YgeCA9PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcdFx0RmV0Y2hVcmwgPSB4XHJcblx0XHRcdFx0XHRpZighKC97ey4qfX0vaWcudGVzdChGZXRjaFVybCkpKSBmZXRjaEl0ZW1zKEZldGNoVXJsLGZ1bmN0aW9uKHJlc3VsdCkge1xyXG5cdFx0XHRcdFx0XHRJdGVtcyA9IHJlc3VsdDtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGNvbnNvbGUuZXJyb3IoJ0l0ZW1zIG11c3QgYmUgYW4gYXJyYXkgb3IgVVJMLicpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J21pbmxlbmd0aCc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBNaW5MZW5ndGgsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZihpc05hTih4KSkgTWluTGVuZ3RoID0gMDtcclxuXHRcdFx0XHRlbHNlIE1pbkxlbmd0aCA9IHg7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQnc2VhcmNoJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IFNlYXJjaCxcclxuXHRcdFx0c2V0OiBzZXRTZWFyY2hcclxuXHRcdH0sXHJcblx0XHQncGxhY2Vob2xkZXInOiB7XHJcblx0XHRcdGdldDogKCkgPT4gUGxhY2Vob2xkZXIsXHJcblx0XHRcdHNldDogc2V0UGxhY2Vob2xkZXJcclxuXHRcdH0sXHJcblx0XHQnbm9yZXN1bHRzJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IE5vUmVzdWx0cyxcclxuXHRcdFx0c2V0OiAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRpZih0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSBOb1Jlc3VsdHMgPSB2YWx1ZTtcclxuXHRcdFx0XHRlbHNlIE5vUmVzdWx0cyA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQnbXVsdGlwbGUnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gTXVsdGlwbGUsXHJcblx0XHRcdHNldDogc2V0TXVsdGlwbGVcclxuXHRcdH0sXHJcblx0XHQnc2VsZWN0ZWQnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gU2VsZWN0ZWRcclxuXHRcdH0sXHJcblx0XHQndGVtcGxhdGUnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gVGVtcGxhdGUsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZih0eXBlb2YgeCA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdFRlbXBsYXRlID0geDtcclxuXHRcdFx0XHRcdHJlbmRlckl0ZW1zKCk7XHJcblx0XHRcdFx0XHRyZW5kZXJTZWxlY3Rpb24oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBjb25zb2xlLmVycm9yKCdUZW1wbGF0ZSBtdXN0IGJlIGEgc3RyaW5nLicpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J3RhZ3RlbXBsYXRlJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IFRhZ1RlbXBsYXRlIHx8IFRlbXBsYXRlLFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSB7XHJcblx0XHRcdFx0XHRUYWdUZW1wbGF0ZSA9IHg7XHJcblx0XHRcdFx0XHRyZW5kZXJJdGVtcygpO1xyXG5cdFx0XHRcdFx0cmVuZGVyU2VsZWN0aW9uKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J3NlbGVjdGVkdGVtcGxhdGUnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gU2VsZWN0ZWRUZW1wbGF0ZSB8fCBUZW1wbGF0ZSxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcdFx0U2VsZWN0ZWRUZW1wbGF0ZSA9IHg7XHJcblx0XHRcdFx0XHRyZW5kZXJJdGVtcygpO1xyXG5cdFx0XHRcdFx0cmVuZGVyU2VsZWN0aW9uKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J3NlYXJjaGZpZWxkcyc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBTZWFyY2hGaWVsZHMsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZih0eXBlb2YgeCA9PT0gJ3N0cmluZycpIFNlYXJjaEZpZWxkcyA9IHg7XHJcblx0XHRcdFx0ZWxzZSBjb25zb2xlLmVycm9yKCdTZWFyY2hGaWVsZHMgbXVzdCBiZSBhIHN0cmluZy4nKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCdvbnNlbGVjdCc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBvblNlbGVjdCxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nKSBvblNlbGVjdCA9IHg7XHJcblx0XHRcdFx0ZWxzZSBpZigheCkgb25TZWxlY3QgPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J3Byb2Nlc3NpbmcnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gUHJvY2Vzc2luZyxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nKSBQcm9jZXNzaW5nID0geDtcclxuXHRcdFx0XHRlbHNlIGlmKCF4KSBQcm9jZXNzaW5nID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCdvbnJlbW92ZSc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBvblJlbW92ZSxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nKSBvblJlbW92ZSA9IHg7XHJcblx0XHRcdFx0ZWxzZSBpZigheCkgb25SZW1vdmUgPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J29uYWRkJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IG9uQWRkLFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdmdW5jdGlvbicpIG9uQWRkID0geDtcclxuXHRcdFx0XHRlbHNlIGlmKCF4KSBvbkFkZCA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQnY2F0ZWdvcml6ZSc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBDYXRlZ29yaXplLFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSBDYXRlZ29yaXplID0geDtcclxuXHRcdFx0XHRlbHNlIENhdGVnb3JpemUgPSBudWxsO1xyXG5cclxuXHRcdFx0XHRyZW5kZXJJdGVtcygpXHQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0dGhpcy5zZWxlY3QgPSBmdW5jdGlvbiBTZWxlY3QoaXRlbSkge1xyXG5cdFx0aWYoIWl0ZW0pIHJldHVybiBSZXNldCgpO1xyXG5cdFx0bGV0IG1hdGNoID0gSXRlbXMucmVkdWNlKChtLGkpID0+IG0gPSBpc0VxdWl2YWxlbnQoaXRlbSxpKSA/IGkgOiBtLG51bGwpO1xyXG5cdFx0aWYobWF0Y2gpIHNlbGVjdEl0ZW0obWF0Y2gpO1xyXG5cdH07XHJcblxyXG5cdHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gUmVtb3ZlKGl0ZW0pIHtcclxuXHRcdGlmKCFpdGVtKSByZXR1cm4gUmVzZXQoKTtcclxuXHRcdGxldCBtYXRjaCA9IEl0ZW1zLnJlZHVjZSgobSxpKSA9PiBtID0gaXNFcXVpdmFsZW50KGl0ZW0saSkgPyBpIDogbSxudWxsKTtcclxuXHRcdGlmKG1hdGNoKSByZW1vdmVTZWxlY3RlZChtYXRjaCx0cnVlKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGlzRXF1aXZhbGVudChhLCBiKSB7XHJcblx0XHRpZih0eXBlb2YgYSAhPT0gJ29iamVjdCcgJiYgdHlwZW9mIGIgIT09ICdvYmplY3QnKSByZXR1cm4gYSA9PT0gYjtcclxuXHRcdGxldCBhUHJvcHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKTtcclxuXHRcdGxldCBiUHJvcHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKTtcclxuXHJcblx0XHRpZiAoYVByb3BzLmxlbmd0aCAhPT0gYlByb3BzLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgYVByb3BzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGxldCBwcm9wTmFtZSA9IGFQcm9wc1tpXTtcclxuXHJcblx0XHRcdGlmKGFbcHJvcE5hbWVdICE9PSBiW3Byb3BOYW1lXSkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBSZXNldCgpIHtcclxuXHRcdGlmKFNlbGVjdGVkICYmIFNlbGVjdGVkLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xyXG5cdFx0XHR2YXIgY29weSA9IFNlbGVjdGVkLnNsaWNlKCk7XHJcblx0XHRcdGNvcHkuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XHJcblx0XHRcdFx0cmVtb3ZlU2VsZWN0ZWQoaXRlbSx0cnVlKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmVtb3ZlU2VsZWN0ZWQoU2VsZWN0ZWQsdHJ1ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmVzZXRTZWFyY2goKTtcclxuXHR9XHJcblxyXG5cdHRoaXMucmVzZXQgPSBSZXNldDtcclxuXHJcblxyXG5cdGluaXQuY2FsbCh0aGlzKTtcclxuXHJcblx0ZnVuY3Rpb24gc2V0QXJncyhvcHRzKSB7XHJcbiAgICAgICAgZm9yKGxldCBrZXkgaW4gZGVmYXVsdHMpIHRoaXNba2V5XSA9IChvcHRzW2tleV0pID8gb3B0c1trZXldIDogZGVmYXVsdHNba2V5XSA7XHJcbiAgICB9O1xyXG5cclxuXHRyZXR1cm4gT2JqZWN0LmZyZWV6ZSh0aGlzKTtcclxuIH1cclxuXHJcblxyXG4vKiBTcHJlYWQgaXQgdG8gdGhlIHdvcmxkISAqL1xyXG4gKGZ1bmN0aW9uIEZhY3RvcnkgKGZhY3RvcnkpIHtcclxuICAgIGlmICggdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkgZGVmaW5lKCdDaG9vc2VCdW1wcycsIGZhY3RvcnkpO1xyXG4gICAgZWxzZSBpZiAoIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyApIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeTtcclxuICAgIGVsc2Ugd2luZG93LkNob29zZUJ1bXBzID0gZmFjdG9yeTtcclxufSkoQ2hvb3NlQnVtcHMpO1xyXG4iXX0=
