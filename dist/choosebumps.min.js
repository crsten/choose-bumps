"use strict";function ChooseBumps(e,t){function n(){this.element=e,L.classList.add("choosebumps"),L.setAttribute("tabindex",0),v(),E.call(this,t||{})}function r(e){return"string"!=typeof e?console.error("Placeholder must be a string."):(q=e,void L.querySelector(".cb-main-item").setAttribute("placeholder",q))}function c(e){O=!!e,O&&"object"===("undefined"==typeof C?"undefined":_typeof(C))&&C&&(C=[C])}function i(e){e===!0?(g(),L.classList.add("cb-active"),document.addEventListener("click",i),document.addEventListener("keydown",o),p(),k=!0):(m(),L.classList.remove("cb-active"),document.removeEventListener("click",i),document.removeEventListener("keydown",o),N=null,k=!1)}function o(e){switch(new RegExp("38|40|13").test(e.keyCode)&&e.preventDefault(),e.keyCode){case 38:e.preventDefault(),u();break;case 40:e.preventDefault(),s();break;case 13:f(T[parseInt(S.children[N].getAttribute("data-id"),10)]),N=null}}function l(e,t){t.stopPropagation(),C.splice(C.indexOf(e),1),C.length||(C=null),C||L.querySelector(".cb-main-item").classList.add("cb-placeholder"),b(),g()}function s(){null===N&&(N=-1);var e=S.children.length-1;N=e>N?N+1:e,a()}function u(){S.children.length-1;N=N?N-1:null,a()}function a(){var e=S.querySelector(".cb-selected");e&&e.classList.remove("cb-selected");var t=S.children[N];t&&t.classList.add("cb-selected")}function f(e,t){L.querySelector(".cb-main-item").classList.remove("cb-placeholder"),m(),O?(C&&C.indexOf(e)<0?C.push(e):C=[e],g(),t&&t.stopPropagation(),p()):(C=e,i(!1)),P&&P(e),b()}function d(e){if(x=!!e){L.classList.add("cb-search-enabled");var t=document.createElement("input");t.className="cb-search",t.setAttribute("type","text"),t.setAttribute("size",1),t.setAttribute("autocomplete","off"),t.addEventListener("keyup",function(e){new RegExp("38|40|13").test(e.keyCode)===!1&&(g(h(this.value)),N=null,s())}),t.addEventListener("keypress",function(){this.setAttribute("size",this.value.length+1)}),L.querySelector(".cb-main-item").appendChild(t)}else L.classList.remove("cb-search-enabled")}function m(){x&&(L.querySelector(".cb-search").value="")}function p(){x&&L.querySelector(".cb-search").focus()}function h(e){function t(e){return Object.keys(e).reduce(function(r,c){var i=!1;return i="object"===_typeof(e[c])?t(e[c]):n.test(e[c]),i&&(r=!0),r},!1)}if(!e)return T;var n=new RegExp(e,"i");return T.filter(function(e){if(w){var r=!1;return w.split(" ").forEach(function(t){var c=t.split("."),i=c.reduce(function(e,t){return e[t]},e);n.test(i)&&(r=!0)}),r}return"string"==typeof e?n.test(e):t(e)})}function v(){var e=document.createElement("div");e.className="cb-main-item cb-placeholder trigger";var t='<svg class="cb-caret trigger" viewBox="0 0 512 512">\n						<path class="trigger" d="m508 108c-4-4-11-4-15 1l-237 271l-237-271c-4-5-11-5-15-1c-5 4-5 10-1 15l245 280c2 3 5 4 8 4c3 0 6-1 8-4l245-280c4-5 4-11-1-15z"></path>\n					</svg>';e.innerHTML+=t,L.appendChild(e),S=document.createElement("div"),S.className="cb-items",L.appendChild(S),L.querySelector(".cb-main-item").addEventListener("click",function(e){e.stopPropagation(),i(!k)})}function b(){if(C){var e=L.querySelector(".cb-main-item");if(O)[].slice.call(L.querySelectorAll(".cb-main-item .cb-tag")).forEach(function(t){e.removeChild(t)}),C.forEach(function(t){var n=document.createElement("div");n.className="cb-tag",n.innerHTML=y(t,A||j)+'<svg viewBox="0 0 512 512">\n						<path d="m271 256l238-238c4-4 4-11 0-15c-4-4-11-4-15 0l-238 238l-238-238c-4-4-11-4-15 0c-4 4-4 11 0 15l238 238l-238 238c-4 4-4 11 0 15c2 2 5 3 8 3c2 0 5-1 7-3l238-238l238 238c2 2 5 3 7 3c3 0 6-1 8-3c4-4 4-11 0-15z"></path>\n					</svg>',n.querySelector("svg").addEventListener("click",l.bind(null,t)),e.insertBefore(n,e.children[e.children.length-1])});else{var t=document.createElement("div");t.className="cb-selected-item",t.innerHTML=y(C,B||j);var n=L.querySelector(".cb-selected-item");n&&e.removeChild(n),e.insertBefore(t,e.children[e.children.length-1])}}}function g(e){S.innerHTML="",T.forEach(function(t,n){if(!(e&&e.indexOf(t)<0||O&&C&&C.indexOf(t)>-1||!O&&C===t)){var r=document.createElement("div");r.setAttribute("data-id",n),r.innerHTML=y(t,j),r.addEventListener("click",f.bind(null,t)),S.appendChild(r)}})}function y(e,t){for(var n=/{{data\.?(.+?)?}}/,r=void 0;r=n.exec(t);){var c="",i=e;if(r[1]){var o=r[1].split(".");c="."+r[1],i=o.reduce(function(e,t){return e[t]},e)}var l=new RegExp("{{data"+c+"}}");t=t.replace(l,i)}return t}function E(e){for(var t in H)this[t]=e[t]?e[t]:H[t]}if(this instanceof ChooseBumps==!1)return new ChooseBumps(e,t);var L=null,S=null,x=!1,C=null,k=!1,w=null,q=null,O=!1,j="",A=null,B=null,N=null,P=null,T=[],H={placeholder:"Choose",items:[],search:!1,searchfields:"",multiple:!1,template:"{{data}}",tagtemplate:null,selectedtemplate:null,onselect:null};return Object.defineProperties(this,{element:{get:function(){return L},set:function(e){if("string"==typeof e){var t=document.querySelector(e);t?L=t:console.error("Element not found.")}else e instanceof HTMLElement?L=e:console.error("Invalid argument")}},items:{get:function(){return T},set:function(e){e instanceof Array?T=e:console.error("Items must be an array.")}},search:{get:function(){return x},set:d},placeholder:{get:function(){return q},set:r},multiple:{get:function(){return O},set:c},selected:{get:function(){return C}},template:{get:function(){return j},set:function(e){"string"==typeof e?(j=e,g(),b()):console.error("Template must be a string.")}},tagtemplate:{get:function(){return A||j},set:function(e){"string"==typeof e&&(A=e,g(),b())}},selectedtemplate:{get:function(){return B||j},set:function(e){"string"==typeof e&&(B=e,g(),b())}},searchfields:{get:function(){return w},set:function(e){"string"==typeof e?w=e:console.error("SearchFields must be a string.")}},onselect:{get:function(){return P},set:function(e){"function"==typeof e?P=e:e||(P=null)}}}),this.select=function(e){function t(e,t){if("object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"object"!==("undefined"==typeof t?"undefined":_typeof(t)))return e===t;var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!==r.length)return!1;for(var c=0;c<n.length;c++){var i=n[c];if(e[i]!==t[i])return!1}return!0}var n=T.reduce(function(n,r){return n=t(e,r)?r:n},null);n&&f(n)},n.call(this),Object.freeze(this)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define("ChooseBumps",e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e:window.ChooseBumps=e}(ChooseBumps);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNob29zZWJ1bXBzLmpzIl0sIm5hbWVzIjpbIkNob29zZUJ1bXBzIiwiZWxlbWVudCIsIm9wdGlvbnMiLCJpbml0IiwidGhpcyIsIkVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJyZW5kZXJIVE1MIiwic2V0QXJncyIsImNhbGwiLCJzZXRQbGFjZWhvbGRlciIsIngiLCJjb25zb2xlIiwiZXJyb3IiLCJQbGFjZWhvbGRlciIsInF1ZXJ5U2VsZWN0b3IiLCJzZXRNdWx0aXBsZSIsInN0YXRlIiwiTXVsdGlwbGUiLCJTZWxlY3RlZCIsIl90eXBlb2YiLCJzZXRPcGVuZWQiLCJyZW5kZXJJdGVtcyIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIkFycm93TmF2aWdhdGlvbiIsImZvY3VzU2VhcmNoIiwiaXNPcGVuIiwicmVzZXRTZWFyY2giLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiU2VsZWN0ZWRJbmRleCIsImUiLCJSZWdFeHAiLCJ0ZXN0Iiwia2V5Q29kZSIsInByZXZlbnREZWZhdWx0Iiwic2VsZWN0UHJldiIsInNlbGVjdE5leHQiLCJzZWxlY3RJdGVtIiwiSXRlbXMiLCJwYXJzZUludCIsIkl0ZW1Db250YWluZXIiLCJjaGlsZHJlbiIsImdldEF0dHJpYnV0ZSIsInJlbW92ZVNlbGVjdGVkIiwiaXRlbSIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwic3BsaWNlIiwiaW5kZXhPZiIsImxlbmd0aCIsInJlbmRlclNlbGVjdGlvbiIsIm1heCIsInVwZGF0ZVNlbGVjdGlvbiIsIm9sZFNlbGVjdGlvbiIsImVsIiwicHVzaCIsIm9uU2VsZWN0Iiwic2V0U2VhcmNoIiwiU2VhcmNoIiwiU2VhcmNoQm94IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInNlYXJjaCIsInZhbHVlIiwiYXBwZW5kQ2hpbGQiLCJmb2N1cyIsInF1ZXJ5Iiwic2VhcmNoT2JqZWN0Iiwib2JqIiwiT2JqZWN0Iiwia2V5cyIsInJlZHVjZSIsInZhbCIsImtleSIsImNoZWNrIiwicmVnZXgiLCJmaWx0ZXIiLCJTZWFyY2hGaWVsZHMiLCJzcGxpdCIsImZvckVhY2giLCJmaWVsZCIsIk1haW5JdGVtIiwiQ2FyZXQiLCJpbm5lckhUTUwiLCJtYWluSXRlbSIsInNsaWNlIiwicXVlcnlTZWxlY3RvckFsbCIsInQiLCJyZW1vdmVDaGlsZCIsInRhZyIsInBhcnNlVGVtcGxhdGUiLCJUYWdUZW1wbGF0ZSIsIlRlbXBsYXRlIiwiYmluZCIsImluc2VydEJlZm9yZSIsIlNlbGVjdGVkVGVtcGxhdGUiLCJwcmV2aW91c0l0ZW0iLCJpdGVtcyIsImluZGV4Iiwib3B0aW9uIiwiZGF0YSIsInRlbXBsYXRlIiwicmUiLCJtIiwiZXhlYyIsInNlbGVjdG9yIiwicmVwbGFjZSIsIm9wdHMiLCJkZWZhdWx0cyIsInBsYWNlaG9sZGVyIiwic2VhcmNoZmllbGRzIiwibXVsdGlwbGUiLCJ0YWd0ZW1wbGF0ZSIsInNlbGVjdGVkdGVtcGxhdGUiLCJvbnNlbGVjdCIsImRlZmluZVByb3BlcnRpZXMiLCJnZXQiLCJzZXQiLCJIVE1MRWxlbWVudCIsIkFycmF5Iiwic2VsZWN0ZWQiLCJzZWxlY3QiLCJpc0VxdWl2YWxlbnQiLCJhIiwiYiIsImFQcm9wcyIsImdldE93blByb3BlcnR5TmFtZXMiLCJiUHJvcHMiLCJpIiwicHJvcE5hbWUiLCJtYXRjaCIsImZyZWV6ZSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsIndpbmRvdyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFRQSxTQUFTQSxhQUFZQyxFQUFRQyxHQThCNUIsUUFBU0MsS0FDUkMsS0FBS0gsUUFBVUEsRUFDZkksRUFBUUMsVUFBVUMsSUFBSSxlQUN0QkYsRUFBUUcsYUFBYSxXQUFXLEdBQ2hDQyxJQUVBQyxFQUFRQyxLQUFLUCxLQUFLRixPQUduQixRQUFTVSxHQUFlQyxHQUN2QixNQUFnQixnQkFB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cyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxuLyogIENob29zZUJ1bXBzXHJcbiAqICBBIGRyb3Bkb3duIHNvIHNpbXBsZSBpdCB3aWxsIGdpdmUgeW91IGNob29zZS1idW1wcyFcclxuICogIEF1dGhvcjogY2FyLmphY29ic2VuQGdtYWlsLmNvbVxyXG4gKiAgTGljZW5zZTogTUlUXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gQ2hvb3NlQnVtcHMoZWxlbWVudCxvcHRpb25zKSB7XHJcblx0aWYodGhpcyBpbnN0YW5jZW9mIENob29zZUJ1bXBzID09PSBmYWxzZSkgcmV0dXJuIG5ldyBDaG9vc2VCdW1wcyhlbGVtZW50LG9wdGlvbnMpO1xyXG5cclxuXHRsZXQgRWxlbWVudCA9IG51bGw7XHJcblx0bGV0IEl0ZW1Db250YWluZXIgPSBudWxsO1xyXG5cdGxldCBTZWFyY2ggPSBmYWxzZTtcclxuXHRsZXQgU2VsZWN0ZWQgPSBudWxsO1xyXG5cdGxldCBpc09wZW4gPSBmYWxzZTtcclxuXHRsZXQgU2VhcmNoRmllbGRzID0gbnVsbDtcclxuXHRsZXQgUGxhY2Vob2xkZXIgPSBudWxsO1xyXG5cdGxldCBNdWx0aXBsZSA9IGZhbHNlO1xyXG5cdGxldCBUZW1wbGF0ZSA9ICcnO1xyXG5cdGxldCBUYWdUZW1wbGF0ZSA9IG51bGw7XHJcblx0bGV0IFNlbGVjdGVkVGVtcGxhdGUgPSBudWxsO1xyXG5cdGxldCBTZWxlY3RlZEluZGV4ID0gbnVsbDtcclxuXHRsZXQgb25TZWxlY3QgPSBudWxsO1xyXG5cdGxldCBJdGVtcyA9IFtdO1xyXG5cclxuXHRsZXQgZGVmYXVsdHMgPSB7XHJcblx0XHRwbGFjZWhvbGRlcjogJ0Nob29zZScsXHJcblx0XHRpdGVtczogW10sXHJcblx0XHRzZWFyY2g6IGZhbHNlLFxyXG5cdFx0c2VhcmNoZmllbGRzOiAnJyxcclxuXHRcdG11bHRpcGxlOiBmYWxzZSxcclxuXHRcdHRlbXBsYXRlOiAne3tkYXRhfX0nLFxyXG5cdFx0dGFndGVtcGxhdGU6IG51bGwsXHJcblx0XHRzZWxlY3RlZHRlbXBsYXRlOiBudWxsLFxyXG5cdFx0b25zZWxlY3Q6IG51bGxcclxuXHR9O1xyXG5cclxuXHRmdW5jdGlvbiBpbml0KCkge1xyXG5cdFx0dGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuXHRcdEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2hvb3NlYnVtcHMnKTtcclxuXHRcdEVsZW1lbnQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsMCk7XHJcblx0XHRyZW5kZXJIVE1MKCk7XHJcblx0XHRcclxuXHRcdHNldEFyZ3MuY2FsbCh0aGlzLG9wdGlvbnMgfHwge30pO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gc2V0UGxhY2Vob2xkZXIoeCkge1xyXG5cdFx0aWYodHlwZW9mIHggIT09ICdzdHJpbmcnKSByZXR1cm4gY29uc29sZS5lcnJvcignUGxhY2Vob2xkZXIgbXVzdCBiZSBhIHN0cmluZy4nKTtcclxuXHRcdFBsYWNlaG9sZGVyID0geDtcclxuXHRcdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLW1haW4taXRlbScpLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLFBsYWNlaG9sZGVyKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHNldE11bHRpcGxlKHN0YXRlKSB7XHJcblx0XHRNdWx0aXBsZSA9IChzdGF0ZSkgPyB0cnVlIDogZmFsc2U7XHJcblx0XHRpZihNdWx0aXBsZSkgaWYodHlwZW9mIFNlbGVjdGVkID09PSAnb2JqZWN0JyAmJiBTZWxlY3RlZCkgU2VsZWN0ZWQgPSBbU2VsZWN0ZWRdOyBcclxuXHR9XHJcblx0XHJcblx0LyogSW50ZXJhY3Rpb25zICovXHJcblx0XHJcblx0ZnVuY3Rpb24gc2V0T3BlbmVkKHN0YXRlKSB7XHJcblx0XHRpZihzdGF0ZSA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRyZW5kZXJJdGVtcygpO1xyXG5cdFx0XHRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NiLWFjdGl2ZScpO1xyXG5cdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2V0T3BlbmVkKTtcclxuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsQXJyb3dOYXZpZ2F0aW9uKTtcclxuXHRcdFx0Zm9jdXNTZWFyY2goKTtcclxuXHRcdFx0aXNPcGVuID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRyZXNldFNlYXJjaCgpO1xyXG5cdFx0XHRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NiLWFjdGl2ZScpO1xyXG5cdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2V0T3BlbmVkKTtcclxuXHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsQXJyb3dOYXZpZ2F0aW9uKTtcclxuXHRcdFx0U2VsZWN0ZWRJbmRleCA9IG51bGw7XHJcblx0XHRcdGlzT3BlbiA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gQXJyb3dOYXZpZ2F0aW9uKGUpIHtcclxuXHRcdGlmKG5ldyBSZWdFeHAoJzM4fDQwfDEzJykudGVzdChlLmtleUNvZGUpKSBlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRzd2l0Y2goZS5rZXlDb2RlKSB7XHJcblx0XHRcdGNhc2UgMzg6XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0c2VsZWN0UHJldigpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSA0MDpcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRzZWxlY3ROZXh0KCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIDEzOlxyXG5cdFx0XHRzZWxlY3RJdGVtKEl0ZW1zW3BhcnNlSW50KEl0ZW1Db250YWluZXIuY2hpbGRyZW5bU2VsZWN0ZWRJbmRleF0uZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyksMTApXSk7XHJcblx0XHRcdFNlbGVjdGVkSW5kZXggPSBudWxsO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH0gICBcclxuXHR9XHJcblxyXG5cdC8qIFNlbGVjdGluZyAqL1xyXG5cclxuXHRmdW5jdGlvbiByZW1vdmVTZWxlY3RlZChpdGVtLGV2ZW50KSB7XHJcblx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFNlbGVjdGVkLnNwbGljZShTZWxlY3RlZC5pbmRleE9mKGl0ZW0pLDEpO1xyXG5cdFx0aWYoIVNlbGVjdGVkLmxlbmd0aCkgU2VsZWN0ZWQgPSBudWxsO1xyXG5cclxuXHRcdGlmKCFTZWxlY3RlZCkgRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2ItbWFpbi1pdGVtJykuY2xhc3NMaXN0LmFkZCgnY2ItcGxhY2Vob2xkZXInKTtcclxuXHJcblx0XHRyZW5kZXJTZWxlY3Rpb24oKTtcclxuXHRcdHJlbmRlckl0ZW1zKCk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBzZWxlY3ROZXh0KCkge1xyXG4gICAgICAgIGlmKFNlbGVjdGVkSW5kZXggPT09IG51bGwpIFNlbGVjdGVkSW5kZXggPSAtMTtcclxuICAgICAgICBsZXQgbWF4ID0gSXRlbUNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICBTZWxlY3RlZEluZGV4ID0gKFNlbGVjdGVkSW5kZXggPCBtYXgpID8gU2VsZWN0ZWRJbmRleCArIDEgOiBtYXg7XHJcbiAgICAgICAgdXBkYXRlU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2VsZWN0UHJldigpIHtcclxuICAgICAgICBsZXQgbWF4ID0gSXRlbUNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICBTZWxlY3RlZEluZGV4ID0gKCFTZWxlY3RlZEluZGV4KSA/IG51bGwgOiBTZWxlY3RlZEluZGV4IC0gMTtcclxuICAgICAgICB1cGRhdGVTZWxlY3Rpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVTZWxlY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIG9sZFNlbGVjdGlvbiA9IEl0ZW1Db250YWluZXIucXVlcnlTZWxlY3RvcignLmNiLXNlbGVjdGVkJyk7XHJcbiAgICAgICAgaWYob2xkU2VsZWN0aW9uKSBvbGRTZWxlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnY2Itc2VsZWN0ZWQnKTtcclxuICAgICAgICBsZXQgZWwgPSBJdGVtQ29udGFpbmVyLmNoaWxkcmVuW1NlbGVjdGVkSW5kZXhdO1xyXG4gICAgICAgIGlmKGVsKSBlbC5jbGFzc0xpc3QuYWRkKCdjYi1zZWxlY3RlZCcpO1xyXG4gICAgfSBcclxuXHJcblx0ZnVuY3Rpb24gc2VsZWN0SXRlbShpdGVtLGV2ZW50KSB7XHJcblx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1tYWluLWl0ZW0nKS5jbGFzc0xpc3QucmVtb3ZlKCdjYi1wbGFjZWhvbGRlcicpO1xyXG5cdFx0cmVzZXRTZWFyY2goKTtcclxuXHJcblx0XHRpZihNdWx0aXBsZSkge1xyXG5cdFx0XHRpZihTZWxlY3RlZCAmJiBTZWxlY3RlZC5pbmRleE9mKGl0ZW0pIDwgMCkgU2VsZWN0ZWQucHVzaChpdGVtKTtcclxuXHRcdFx0ZWxzZSBTZWxlY3RlZCA9IFtpdGVtXTtcclxuXHJcblx0XHRcdHJlbmRlckl0ZW1zKCk7XHJcblx0XHRcdGlmKGV2ZW50KSBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0Zm9jdXNTZWFyY2goKTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRTZWxlY3RlZCA9IGl0ZW07XHJcblx0XHRcdHNldE9wZW5lZChmYWxzZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYob25TZWxlY3QpIG9uU2VsZWN0KGl0ZW0pO1xyXG5cdFx0cmVuZGVyU2VsZWN0aW9uKCk7XHJcblx0fVxyXG5cclxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuICAgIC8qIFNlYXJjaGluZyAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIHNldFNlYXJjaChzdGF0ZSkge1xyXG5cdFx0U2VhcmNoID0gKHN0YXRlKSA/IHRydWUgOiBmYWxzZTtcclxuXHJcblx0XHRpZihTZWFyY2gpIHtcclxuXHRcdFx0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjYi1zZWFyY2gtZW5hYmxlZCcpO1xyXG5cdFx0XHRsZXQgU2VhcmNoQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuXHRcdFx0XHRTZWFyY2hCb3guY2xhc3NOYW1lID0gJ2NiLXNlYXJjaCc7XHJcblx0XHRcdFx0U2VhcmNoQm94LnNldEF0dHJpYnV0ZSgndHlwZScsJ3RleHQnKTtcclxuXHRcdFx0XHRTZWFyY2hCb3guc2V0QXR0cmlidXRlKCdzaXplJywxKTtcclxuXHRcdFx0XHRTZWFyY2hCb3guc2V0QXR0cmlidXRlKCdhdXRvY29tcGxldGUnLCdvZmYnKTtcclxuXHJcblx0XHRcdFx0U2VhcmNoQm94LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJyxmdW5jdGlvbiBLZXlVcChlKSB7XHJcblx0XHRcdFx0XHRpZihuZXcgUmVnRXhwKCczOHw0MHwxMycpLnRlc3QoZS5rZXlDb2RlKSA9PT0gZmFsc2UpIHtcclxuXHRcdFx0XHRcdFx0cmVuZGVySXRlbXMoc2VhcmNoKHRoaXMudmFsdWUpKTtcclxuXHRcdFx0XHRcdFx0U2VsZWN0ZWRJbmRleCA9IG51bGw7XHJcblx0XHRcdFx0XHRcdHNlbGVjdE5leHQoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0U2VhcmNoQm94LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJyxmdW5jdGlvbiBLZXlQcmVzcygpIHtcclxuXHRcdFx0XHRcdHRoaXMuc2V0QXR0cmlidXRlKCdzaXplJyx0aGlzLnZhbHVlLmxlbmd0aCArIDEpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2ItbWFpbi1pdGVtJykuYXBwZW5kQ2hpbGQoU2VhcmNoQm94KTtcclxuXHRcdH1lbHNlIEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2Itc2VhcmNoLWVuYWJsZWQnKTtcclxuXHR9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzZXRTZWFyY2goKSB7XHJcblx0XHRpZighU2VhcmNoKSByZXR1cm47XHJcblx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1zZWFyY2gnKS52YWx1ZSA9ICcnO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZm9jdXNTZWFyY2goKSB7XHJcblx0XHRpZighU2VhcmNoKSByZXR1cm47XHJcblx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1zZWFyY2gnKS5mb2N1cygpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gc2VhcmNoKHF1ZXJ5KSB7XHJcblx0XHRpZighcXVlcnkpIHJldHVybiBJdGVtcztcclxuXHRcdGxldCByZWdleCA9IG5ldyBSZWdFeHAocXVlcnksJ2knKTtcclxuXHJcblx0XHRyZXR1cm4gSXRlbXMuZmlsdGVyKGZ1bmN0aW9uIEZpbHRlcih4KSB7XHJcblx0XHRcdGlmKFNlYXJjaEZpZWxkcykge1xyXG5cdFx0XHRcdGxldCBzdGF0ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFNlYXJjaEZpZWxkcy5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gRm9yRWFjaChmaWVsZCkge1xyXG5cdFx0XHRcdFx0bGV0IGtleXMgPSBmaWVsZC5zcGxpdCgnLicpO1xyXG5cdFx0XHRcdFx0bGV0IHZhbHVlID0ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gUmVkdWNlKHZhbCxpdGVtKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiB2YWxbaXRlbV07XHJcblx0XHRcdFx0XHR9LHgpO1xyXG5cclxuXHRcdFx0XHRcdGlmKHJlZ2V4LnRlc3QodmFsdWUpKSBzdGF0ZSA9IHRydWU7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdHJldHVybiBzdGF0ZTtcclxuXHRcdFx0fWVsc2VcclxuXHRcdFx0aWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSByZXR1cm4gcmVnZXgudGVzdCh4KTtcclxuXHRcdFx0ZWxzZSBcclxuXHRcdFx0XHRyZXR1cm4gc2VhcmNoT2JqZWN0KHgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZnVuY3Rpb24gc2VhcmNoT2JqZWN0KG9iaikge1xyXG5cdFx0XHRyZXR1cm4gT2JqZWN0LmtleXMob2JqKS5yZWR1Y2UoZnVuY3Rpb24gUmVkdWNlKHZhbCxrZXkpIHtcclxuXHRcdFx0XHRsZXQgY2hlY2sgPSBmYWxzZTtcclxuXHRcdFx0XHRpZih0eXBlb2Ygb2JqW2tleV0gPT09ICdvYmplY3QnKSBjaGVjayA9IHNlYXJjaE9iamVjdChvYmpba2V5XSk7XHJcblx0XHRcdFx0ZWxzZSBjaGVjayA9IHJlZ2V4LnRlc3Qob2JqW2tleV0pO1xyXG5cclxuXHRcdFx0XHRpZihjaGVjaykgdmFsID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHZhbDtcclxuXHRcdFx0fSxmYWxzZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuXHQvKiBSZW5kZXJpbmcgKi9cclxuXHJcblx0ZnVuY3Rpb24gcmVuZGVySFRNTCgpIHtcclxuXHRcdGxldCBNYWluSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRNYWluSXRlbS5jbGFzc05hbWUgPSAnY2ItbWFpbi1pdGVtIGNiLXBsYWNlaG9sZGVyIHRyaWdnZXInO1xyXG5cclxuXHJcblx0XHRsZXQgQ2FyZXQgPSBgPHN2ZyBjbGFzcz1cImNiLWNhcmV0IHRyaWdnZXJcIiB2aWV3Qm94PVwiMCAwIDUxMiA1MTJcIj5cclxuXHRcdFx0XHRcdFx0PHBhdGggY2xhc3M9XCJ0cmlnZ2VyXCIgZD1cIm01MDggMTA4Yy00LTQtMTEtNC0xNSAxbC0yMzcgMjcxbC0yMzctMjcxYy00LTUtMTEtNS0xNS0xYy01IDQtNSAxMC0xIDE1bDI0NSAyODBjMiAzIDUgNCA4IDRjMyAwIDYtMSA4LTRsMjQ1LTI4MGM0LTUgNC0xMS0xLTE1elwiPjwvcGF0aD5cclxuXHRcdFx0XHRcdDwvc3ZnPmA7XHJcblxyXG5cdFx0TWFpbkl0ZW0uaW5uZXJIVE1MICs9IENhcmV0O1xyXG5cdFx0RWxlbWVudC5hcHBlbmRDaGlsZChNYWluSXRlbSk7XHJcblxyXG5cdFx0SXRlbUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0SXRlbUNvbnRhaW5lci5jbGFzc05hbWUgPSAnY2ItaXRlbXMnO1xyXG5cdFx0RWxlbWVudC5hcHBlbmRDaGlsZChJdGVtQ29udGFpbmVyKTtcclxuXHRcdFxyXG5cdFx0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2ItbWFpbi1pdGVtJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChlKSA9PiB7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdHNldE9wZW5lZCghaXNPcGVuKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8qRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsKCkgPT4ge1xyXG5cdFx0XHRpZighaXNPcGVuKSB7XHJcblx0XHRcdFx0c2V0T3BlbmVkKHRydWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTsqL1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gcmVuZGVyU2VsZWN0aW9uKCkge1xyXG5cdFx0aWYoIVNlbGVjdGVkKSByZXR1cm47XHJcblx0XHRsZXQgbWFpbkl0ZW0gPSBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1tYWluLWl0ZW0nKTtcclxuXHJcblx0XHRpZihNdWx0aXBsZSkge1xyXG5cdFx0XHRbXS5zbGljZS5jYWxsKEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNiLW1haW4taXRlbSAuY2ItdGFnJykpLmZvckVhY2goKHQpID0+IHtcclxuXHRcdFx0XHRtYWluSXRlbS5yZW1vdmVDaGlsZCh0KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRTZWxlY3RlZC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG5cdFx0XHRcdGxldCB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRcdHRhZy5jbGFzc05hbWUgPSAnY2ItdGFnJztcclxuXHRcdFx0XHRcdHRhZy5pbm5lckhUTUwgPSBwYXJzZVRlbXBsYXRlKGl0ZW0sVGFnVGVtcGxhdGUgfHwgVGVtcGxhdGUpICsgYDxzdmcgdmlld0JveD1cIjAgMCA1MTIgNTEyXCI+XHJcblx0XHRcdFx0XHRcdDxwYXRoIGQ9XCJtMjcxIDI1NmwyMzgtMjM4YzQtNCA0LTExIDAtMTVjLTQtNC0xMS00LTE1IDBsLTIzOCAyMzhsLTIzOC0yMzhjLTQtNC0xMS00LTE1IDBjLTQgNC00IDExIDAgMTVsMjM4IDIzOGwtMjM4IDIzOGMtNCA0LTQgMTEgMCAxNWMyIDIgNSAzIDggM2MyIDAgNS0xIDctM2wyMzgtMjM4bDIzOCAyMzhjMiAyIDUgMyA3IDNjMyAwIDYtMSA4LTNjNC00IDQtMTEgMC0xNXpcIj48L3BhdGg+XHJcblx0XHRcdFx0XHQ8L3N2Zz5gO1xyXG5cclxuXHRcdFx0XHRcdHRhZy5xdWVyeVNlbGVjdG9yKCdzdmcnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycscmVtb3ZlU2VsZWN0ZWQuYmluZChudWxsLGl0ZW0pKTtcclxuXHJcblx0XHRcdFx0bWFpbkl0ZW0uaW5zZXJ0QmVmb3JlKHRhZyxtYWluSXRlbS5jaGlsZHJlblttYWluSXRlbS5jaGlsZHJlbi5sZW5ndGggLSAxXSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bGV0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRpdGVtLmNsYXNzTmFtZSA9ICdjYi1zZWxlY3RlZC1pdGVtJztcclxuXHRcdFx0XHRpdGVtLmlubmVySFRNTCA9IHBhcnNlVGVtcGxhdGUoU2VsZWN0ZWQsU2VsZWN0ZWRUZW1wbGF0ZSB8fCBUZW1wbGF0ZSk7XHJcblx0XHRcdFxyXG5cclxuXHRcdFx0bGV0IHByZXZpb3VzSXRlbSA9IEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLXNlbGVjdGVkLWl0ZW0nKTtcclxuXHRcdFx0aWYocHJldmlvdXNJdGVtKSBtYWluSXRlbS5yZW1vdmVDaGlsZChwcmV2aW91c0l0ZW0pO1xyXG5cdFx0XHRtYWluSXRlbS5pbnNlcnRCZWZvcmUoaXRlbSxtYWluSXRlbS5jaGlsZHJlblttYWluSXRlbS5jaGlsZHJlbi5sZW5ndGggLSAxXSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiByZW5kZXJJdGVtcyhpdGVtcykge1xyXG5cdFx0SXRlbUNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuXHRcdEl0ZW1zLmZvckVhY2goKGl0ZW0saW5kZXgpID0+IHtcclxuXHRcdFx0aWYoaXRlbXMgJiYgaXRlbXMuaW5kZXhPZihpdGVtKSA8IDApIHJldHVybjtcclxuXHRcdFx0aWYoTXVsdGlwbGUgJiYgU2VsZWN0ZWQgJiYgU2VsZWN0ZWQuaW5kZXhPZihpdGVtKSA+IC0xIHx8ICFNdWx0aXBsZSAmJiBTZWxlY3RlZCA9PT0gaXRlbSkgcmV0dXJuO1xyXG5cdFx0XHRsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0b3B0aW9uLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGluZGV4KTtcclxuXHRcdFx0XHRvcHRpb24uaW5uZXJIVE1MID0gcGFyc2VUZW1wbGF0ZShpdGVtLFRlbXBsYXRlKTtcclxuXHRcdFx0XHRvcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdEl0ZW0uYmluZChudWxsLGl0ZW0pKTtcclxuXHJcblx0XHRcdEl0ZW1Db250YWluZXIuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gcGFyc2VUZW1wbGF0ZShkYXRhLHRlbXBsYXRlKSB7XHJcblx0XHRsZXQgcmUgPSAve3tkYXRhXFwuPyguKz8pP319LztcclxuXHRcdGxldCBtO1xyXG5cdFx0d2hpbGUobSA9IHJlLmV4ZWModGVtcGxhdGUpKSB7XHJcblx0XHRcdGxldCBzZWxlY3RvciA9ICcnO1xyXG5cdFx0XHRsZXQgdmFsdWUgPSBkYXRhO1xyXG5cdFx0XHRpZihtWzFdKSB7XHJcblx0XHRcdFx0bGV0IGtleXMgPSBtWzFdLnNwbGl0KCcuJyk7XHJcblx0XHRcdFx0c2VsZWN0b3IgPSAnLicgKyBtWzFdO1xyXG5cdFx0XHRcdHZhbHVlID0ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gUmVkdWNlKHZhbCxpdGVtKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdmFsW2l0ZW1dO1xyXG5cdFx0XHRcdH0sZGF0YSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGxldCByZXBsYWNlID0gbmV3IFJlZ0V4cCgne3tkYXRhJyArIHNlbGVjdG9yICsgJ319Jyk7XHJcblx0XHRcdHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZShyZXBsYWNlLHZhbHVlKTtcclxuXHRcdH0gXHJcblxyXG5cdFx0cmV0dXJuIHRlbXBsYXRlO1xyXG5cdH1cclxuXHJcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7XHJcblx0XHQnZWxlbWVudCc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBFbGVtZW50LFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSB7XHJcblx0XHRcdFx0XHRsZXQgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHgpO1xyXG5cdFx0XHRcdFx0aWYoZWwpIEVsZW1lbnQgPSBlbDtcclxuXHRcdFx0XHRcdGVsc2UgY29uc29sZS5lcnJvcignRWxlbWVudCBub3QgZm91bmQuJyk7XHJcblx0XHRcdFx0fWVsc2UgaWYoeCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSBFbGVtZW50ID0geDtcclxuXHRcdFx0XHRlbHNlIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgYXJndW1lbnQnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCdpdGVtcyc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBJdGVtcyxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHggaW5zdGFuY2VvZiBBcnJheSkgSXRlbXMgPSB4O1xyXG5cdFx0XHRcdGVsc2UgY29uc29sZS5lcnJvcignSXRlbXMgbXVzdCBiZSBhbiBhcnJheS4nKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCdzZWFyY2gnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gU2VhcmNoLFxyXG5cdFx0XHRzZXQ6IHNldFNlYXJjaFxyXG5cdFx0fSxcclxuXHRcdCdwbGFjZWhvbGRlcic6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBQbGFjZWhvbGRlcixcclxuXHRcdFx0c2V0OiBzZXRQbGFjZWhvbGRlclxyXG5cdFx0fSxcclxuXHRcdCdtdWx0aXBsZSc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBNdWx0aXBsZSxcclxuXHRcdFx0c2V0OiBzZXRNdWx0aXBsZVxyXG5cdFx0fSxcclxuXHRcdCdzZWxlY3RlZCc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBTZWxlY3RlZFxyXG5cdFx0fSxcclxuXHRcdCd0ZW1wbGF0ZSc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBUZW1wbGF0ZSxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcdFx0VGVtcGxhdGUgPSB4O1xyXG5cdFx0XHRcdFx0cmVuZGVySXRlbXMoKTtcclxuXHRcdFx0XHRcdHJlbmRlclNlbGVjdGlvbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGNvbnNvbGUuZXJyb3IoJ1RlbXBsYXRlIG11c3QgYmUgYSBzdHJpbmcuJyk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQndGFndGVtcGxhdGUnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gVGFnVGVtcGxhdGUgfHwgVGVtcGxhdGUsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZih0eXBlb2YgeCA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdFRhZ1RlbXBsYXRlID0geDtcclxuXHRcdFx0XHRcdHJlbmRlckl0ZW1zKCk7XHJcblx0XHRcdFx0XHRyZW5kZXJTZWxlY3Rpb24oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQnc2VsZWN0ZWR0ZW1wbGF0ZSc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBTZWxlY3RlZFRlbXBsYXRlIHx8IFRlbXBsYXRlLFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSB7XHJcblx0XHRcdFx0XHRTZWxlY3RlZFRlbXBsYXRlID0geDtcclxuXHRcdFx0XHRcdHJlbmRlckl0ZW1zKCk7XHJcblx0XHRcdFx0XHRyZW5kZXJTZWxlY3Rpb24oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQnc2VhcmNoZmllbGRzJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IFNlYXJjaEZpZWxkcyxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgU2VhcmNoRmllbGRzID0geDtcclxuXHRcdFx0XHRlbHNlIGNvbnNvbGUuZXJyb3IoJ1NlYXJjaEZpZWxkcyBtdXN0IGJlIGEgc3RyaW5nLicpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J29uc2VsZWN0Jzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IG9uU2VsZWN0LFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdmdW5jdGlvbicpIG9uU2VsZWN0ID0geDtcclxuXHRcdFx0XHRlbHNlIGlmKCF4KSBvblNlbGVjdCA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0dGhpcy5zZWxlY3QgPSBmdW5jdGlvbiBTZWxlY3QoaXRlbSkge1xyXG5cdFx0bGV0IG1hdGNoID0gSXRlbXMucmVkdWNlKChtLGkpID0+IG0gPSBpc0VxdWl2YWxlbnQoaXRlbSxpKSA/IGkgOiBtLG51bGwpO1xyXG5cdFx0aWYobWF0Y2gpIHNlbGVjdEl0ZW0obWF0Y2gpO1xyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBpc0VxdWl2YWxlbnQoYSwgYikge1xyXG5cdFx0XHRpZih0eXBlb2YgYSAhPT0gJ29iamVjdCcgJiYgdHlwZW9mIGIgIT09ICdvYmplY3QnKSByZXR1cm4gYSA9PT0gYjtcclxuXHRcdFx0bGV0IGFQcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEpO1xyXG5cdFx0XHRsZXQgYlByb3BzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYik7XHJcblxyXG5cdFx0XHRpZiAoYVByb3BzLmxlbmd0aCAhPT0gYlByb3BzLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBhUHJvcHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRsZXQgcHJvcE5hbWUgPSBhUHJvcHNbaV07XHJcblxyXG5cdFx0XHRcdGlmKGFbcHJvcE5hbWVdICE9PSBiW3Byb3BOYW1lXSkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cclxuXHRpbml0LmNhbGwodGhpcyk7XHJcblxyXG5cdGZ1bmN0aW9uIHNldEFyZ3Mob3B0cykge1xyXG4gICAgICAgIGZvcihsZXQga2V5IGluIGRlZmF1bHRzKSB0aGlzW2tleV0gPSAob3B0c1trZXldKSA/IG9wdHNba2V5XSA6IGRlZmF1bHRzW2tleV0gO1xyXG4gICAgfTtcclxuXHJcblx0cmV0dXJuIE9iamVjdC5mcmVlemUodGhpcyk7XHJcbiB9XHJcblxyXG5cclxuLyogU3ByZWFkIGl0IHRvIHRoZSB3b3JsZCEgKi9cclxuIChmdW5jdGlvbiBGYWN0b3J5IChmYWN0b3J5KSB7XHJcbiAgICBpZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIGRlZmluZSgnQ2hvb3NlQnVtcHMnLCBmYWN0b3J5KTtcclxuICAgIGVsc2UgaWYgKCB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgKSBtb2R1bGUuZXhwb3J0cyA9IGZhY3Rvcnk7XHJcbiAgICBlbHNlIHdpbmRvdy5DaG9vc2VCdW1wcyA9IGZhY3Rvcnk7XHJcbn0pKENob29zZUJ1bXBzKTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
