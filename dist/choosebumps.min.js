"use strict";function ChooseBumps(e,t){function n(){this.element=e,w.classList.add("choosebumps"),w.setAttribute("tabindex",0),w.getAttribute("placeholder")&&(W.placeholder=w.getAttribute("placeholder")),v(),C.call(this,t||{})}function r(e){return"string"!=typeof e?console.error("Placeholder must be a string."):(H=e,void w.querySelector(".cb-main-item").setAttribute("placeholder",H))}function c(e){z=!!e,z&&"object"===("undefined"==typeof N?"undefined":_typeof(N))&&N&&(N=[N])}function i(e){e===!0?(E(),w.classList.add("cb-active"),A.scrollTop=0,document.addEventListener("click",i),document.addEventListener("keydown",o),h(),j=!0):(m(),w.classList.remove("cb-active"),document.removeEventListener("click",i),document.removeEventListener("keydown",o),D=null,j=!1)}function o(e){switch(new RegExp("38|40|13").test(e.keyCode)&&e.preventDefault(),e.keyCode){case 38:e.preventDefault(),s();break;case 40:e.preventDefault(),u();break;case 13:if("function"==typeof F&&D===-1)return F(e.target.value),e.target.value="";if(D<0)return;d(V[parseInt(A.children[D].getAttribute("data-id"),10)],!0),D=null}}function l(e,t,n){n&&n.stopPropagation(),N&&N.constructor===Array?(N.splice(N.indexOf(e),1),N.length||(N=null)):N=null,N||w.querySelector(".cb-main-item").classList.add("cb-placeholder"),G&&t&&G(e),b(),E()}function u(){null===D&&(D=-1);var e=A.children.length-1;D=D<e?D+1:e,f()}function s(){A.children.length-1;D=D?D-1:null,f()}function a(){if(D&&!(D<0)){var e=A.children[D],t=A.scrollTop,n=A.scrollTop+A.clientHeight,r=e.offsetTop,c=e.offsetTop+e.clientHeight;r<t?A.scrollTop=e.offsetTop:c>n&&(A.scrollTop=c-A.clientHeight)}}function f(){var e=A.querySelector(".cb-selected");e&&e.classList.remove("cb-selected");var t=A.children[D];t&&t.classList.add("cb-selected"),a()}function d(e,t,n){w.querySelector(".cb-main-item").classList.remove("cb-placeholder"),m(),z?(N&&N.indexOf(e)<0?N.push(e):N=[e],E(),n&&n.stopPropagation(),h()):(N=e,i(!1)),I&&t&&I(e),b()}function p(e){O=!!e,O?!function(){w.classList.add("cb-search-enabled");var e=document.createElement("input");e.className="cb-search",e.setAttribute("type","text"),e.setAttribute("size",1),e.setAttribute("autocomplete","off"),e.addEventListener("keyup",function(t){new RegExp("38|40|13").test(t.keyCode)===!1&&this.value.length>=Q&&(U&&clearTimeout(U),U=setTimeout(function(){g(e.value,function(e){/{{.*}}/gi.test(K)&&(V=e),E(e),D=null,u()})},200))}),e.addEventListener("keypress",function(){this.setAttribute("size",this.value.length+1)}),w.querySelector(".cb-main-item").appendChild(e)}():w.classList.remove("cb-search-enabled")}function m(){O&&(w.querySelector(".cb-search").value="")}function h(){O&&w.querySelector(".cb-search").focus()}function g(e,t){function n(e){return Object.keys(e).reduce(function(t,c){var i=!1;return i="object"===_typeof(e[c])?n(e[c]):r.test(e[c]),i&&(t=!0),t},!1)}if(!e)return V;var r=new RegExp(e,"i");/{{.*}}/gi.test(K)?y(K.replace(/{{query}}/,e),t):t(V.filter(function(e){if(B){var t=!1;return B.split(" ").forEach(function(n){var c=n.split("."),i=c.reduce(function(e,t){return e[t]},e);r.test(i)&&(t=!0)}),t}return"string"==typeof e?r.test(e):n(e)}))}function v(){var e=document.createElement("div");e.className="cb-main-item cb-placeholder trigger";var t='<svg class="cb-caret trigger" viewBox="0 0 512 512" height="20" width="20">\n\t\t\t\t\t\t<path class="trigger" d="m508 108c-4-4-11-4-15 1l-237 271l-237-271c-4-5-11-5-15-1c-5 4-5 10-1 15l245 280c2 3 5 4 8 4c3 0 6-1 8-4l245-280c4-5 4-11-1-15z"></path>\n\t\t\t\t\t</svg>';e.innerHTML+=t,w.appendChild(e),A=document.createElement("div"),A.className="cb-items",w.appendChild(A),k=document.createElement("div"),k.className="cb-loader",w.appendChild(k),w.querySelector(".cb-main-item").addEventListener("click",function(e){e.stopPropagation(),i(!j)})}function b(){var e=w.querySelector(".cb-main-item");if(z){if([].slice.call(w.querySelectorAll(".cb-main-item .cb-tag")).forEach(function(t){e.removeChild(t)}),!N)return;N.forEach(function(t){var n=document.createElement("div");n.className="cb-tag",n.innerHTML=S(t,R||P)+'<svg viewBox="0 0 512 512">\n\t\t\t\t\t\t<path d="m271 256l238-238c4-4 4-11 0-15c-4-4-11-4-15 0l-238 238l-238-238c-4-4-11-4-15 0c-4 4-4 11 0 15l238 238l-238 238c-4 4-4 11 0 15c2 2 5 3 8 3c2 0 5-1 7-3l238-238l238 238c2 2 5 3 7 3c3 0 6-1 8-3c4-4 4-11 0-15z"></path>\n\t\t\t\t\t</svg>',n.querySelector("svg").addEventListener("click",l.bind(null,t,!0)),e.insertBefore(n,e.children[e.children.length-1])})}else{if(!N)return[].slice.call(e.querySelectorAll(".cb-selected-item,.cb-tag")).forEach(function(t){return e.removeChild(t)});var t=document.createElement("div");t.className="cb-selected-item",t.innerHTML=S(N,_||P);var n=w.querySelector(".cb-selected-item");n&&e.removeChild(n),e.insertBefore(t,e.children[e.children.length-1])}}function y(e,t){X&&(X.abort(),L(!1)),X=new XMLHttpRequest,X.open("GET",e),X.onreadystatechange=function(){4==this.readyState&&(L(!1),this.status>=200&&this.status<400&&(t(J?J(JSON.parse(this.responseText)):JSON.parse(this.responseText)),X=null))},X.send(),L(!0)}function L(e){e?(k.classList.add("active"),w.querySelector(".cb-caret").classList.add("hide")):(k.classList.remove("active"),w.querySelector(".cb-caret").classList.remove("hide"))}function E(e){A.innerHTML="",M&&(V=V.sort(function(e,t){return T(M,e)<T(M,t)?-1:T(M,e)>T(M,t)?1:0}));var t=null;V.forEach(function(n,r){if(!(e&&e.indexOf(n)<0||z&&N&&N.indexOf(n)>-1||!z&&N===n)){var c=document.createElement("div");c.setAttribute("data-id",r),c.innerHTML=S(n,P),c.addEventListener("click",d.bind(null,n,!0)),!M||t&&T(M,t)===T(M,n)||c.setAttribute("category",T(M,n)),t=n,A.appendChild(c)}})}function S(e,t){for(var n=/{{data\.?(.+?)?}}/,r=void 0;r=n.exec(t);){var c="",i=e;r[1]&&(c="."+r[1],i=T(r[1],e));var o=new RegExp("{{data"+c+"}}");t=t.replace(o,i)}return t}function T(e,t){return e.split(".").reduce(function(e,t){return e[t]},t)}function q(e,t){if("object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"object"!==("undefined"==typeof t?"undefined":_typeof(t)))return e===t;var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!==r.length)return!1;for(var c=0;c<n.length;c++){var i=n[c];if(e[i]!==t[i])return!1}return!0}function x(){if(N&&N.constructor===Array){var e=N.slice();e.forEach(function(e){l(e,!0)})}else l(N,!0);m()}function C(e){for(var t in W)this[t]=e[t]?e[t]:W[t]}if(this instanceof ChooseBumps==!1)return new ChooseBumps(e,t);var w=null,A=null,k=null,O=!1,N=null,j=!1,B=null,H=null,z=!1,M=null,P="",R=null,_=null,D=null,I=null,J=null,F=null,G=null,U=null,X=null,K=null,Q=0,V=[],W={placeholder:"Choose",items:[],search:!1,searchfields:"",multiple:!1,template:"{{data}}",tagtemplate:null,selectedtemplate:null,categorize:null,processing:null,minlength:null,onselect:null,onremove:null,onadd:null};return Object.defineProperties(this,{element:{get:function(){return w},set:function(e){if("string"==typeof e){var t=document.querySelector(e);t?w=t:console.error("Element not found.")}else e instanceof HTMLElement?w=e:console.error("Invalid argument")}},items:{get:function(){return K||V},set:function(e){e instanceof Array?V=e:"string"==typeof e?(K=e,/{{.*}}/gi.test(K)||y(K,function(e){V=e})):console.error("Items must be an array or URL.")}},minlength:{get:function(){return Q},set:function(e){Q=isNaN(e)?0:e}},search:{get:function(){return O},set:p},placeholder:{get:function(){return H},set:r},multiple:{get:function(){return z},set:c},selected:{get:function(){return N}},template:{get:function(){return P},set:function(e){"string"==typeof e?(P=e,E(),b()):console.error("Template must be a string.")}},tagtemplate:{get:function(){return R||P},set:function(e){"string"==typeof e&&(R=e,E(),b())}},selectedtemplate:{get:function(){return _||P},set:function(e){"string"==typeof e&&(_=e,E(),b())}},searchfields:{get:function(){return B},set:function(e){"string"==typeof e?B=e:console.error("SearchFields must be a string.")}},onselect:{get:function(){return I},set:function(e){"function"==typeof e?I=e:e||(I=null)}},processing:{get:function(){return J},set:function(e){"function"==typeof e?J=e:e||(J=null)}},onremove:{get:function(){return G},set:function(e){"function"==typeof e?G=e:e||(G=null)}},onadd:{get:function(){return F},set:function(e){"function"==typeof e?F=e:e||(F=null)}},categorize:{get:function(){return M},set:function(e){M="string"==typeof e?e:null,E()}}}),this.select=function(e){if(!e)return x();var t=V.reduce(function(t,n){return t=q(e,n)?n:t},null);t&&d(t)},this.remove=function(e){if(!e)return x();var t=V.reduce(function(t,n){return t=q(e,n)?n:t},null);t&&l(t,!0)},this.reset=x,n.call(this),Object.freeze(this)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define("ChooseBumps",e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e:window.ChooseBumps=e}(ChooseBumps);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNob29zZWJ1bXBzLmpzIl0sIm5hbWVzIjpbIkNob29zZUJ1bXBzIiwiZWxlbWVudCIsIm9wdGlvbnMiLCJpbml0IiwidGhpcyIsIkVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJkZWZhdWx0cyIsInBsYWNlaG9sZGVyIiwicmVuZGVySFRNTCIsInNldEFyZ3MiLCJjYWxsIiwic2V0UGxhY2Vob2xkZXIiLCJ4IiwiY29uc29sZSIsImVycm9yIiwiUGxhY2Vob2xkZXIiLCJxdWVyeVNlbGVjdG9yIiwic2V0TXVsdGlwbGUiLCJzdGF0ZSIsIk11bHRpcGxlIiwiU2VsZWN0ZWQiLCJfdHlwZW9mIiwic2V0T3BlbmVkIiwicmVuZGVySXRlbXMiLCJJdGVtQ29udGFpbmVyIiwic2Nyb2xsVG9wIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiQXJyb3dOYXZpZ2F0aW9uIiwiZm9jdXNTZWFyY2giLCJpc09wZW4iLCJyZXNldFNlYXJjaCIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJTZWxlY3RlZEluZGV4IiwiZSIsIlJlZ0V4cCIsInRlc3QiLCJrZXlDb2RlIiwicHJldmVudERlZmF1bHQiLCJzZWxlY3RQcmV2Iiwic2VsZWN0TmV4dCIsIm9uQWRkIiwidGFyZ2V0IiwidmFsdWUiLCJzZWxlY3RJdGVtIiwiSXRlbXMiLCJwYXJzZUludCIsImNoaWxkcmVuIiwicmVtb3ZlU2VsZWN0ZWQiLCJpdGVtIiwidHJpZ2dlckNhbGxiYWNrIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJjb25zdHJ1Y3RvciIsIkFycmF5Iiwic3BsaWNlIiwiaW5kZXhPZiIsImxlbmd0aCIsIm9uUmVtb3ZlIiwicmVuZGVyU2VsZWN0aW9uIiwibWF4IiwidXBkYXRlU2VsZWN0aW9uIiwic2Nyb2xsU2VsZWN0ZWRJbnRvVmlldyIsInNlbGVjdGVkSXRlbSIsImNvbnRhaW5lclRvcCIsImNvbnRhaW5lckJvdHRvbSIsImNsaWVudEhlaWdodCIsInNlbGVjdGVkSXRlbVRvcCIsIm9mZnNldFRvcCIsInNlbGVjdGVkSXRlbUJvdHRvbSIsIm9sZFNlbGVjdGlvbiIsImVsIiwicHVzaCIsIm9uU2VsZWN0Iiwic2V0U2VhcmNoIiwiU2VhcmNoIiwiU2VhcmNoQm94IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIk1pbkxlbmd0aCIsIlR5cGVUcmVzaG9sZCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzZWFyY2giLCJyZXN1bHQiLCJGZXRjaFVybCIsImFwcGVuZENoaWxkIiwiZm9jdXMiLCJxdWVyeSIsImNiIiwic2VhcmNoT2JqZWN0Iiwib2JqIiwiT2JqZWN0Iiwia2V5cyIsInJlZHVjZSIsInZhbCIsImtleSIsImNoZWNrIiwicmVnZXgiLCJmZXRjaEl0ZW1zIiwicmVwbGFjZSIsImZpbHRlciIsIlNlYXJjaEZpZWxkcyIsInNwbGl0IiwiZm9yRWFjaCIsImZpZWxkIiwiTWFpbkl0ZW0iLCJDYXJldCIsImlubmVySFRNTCIsIkxvYWRpbmdDb250YWluZXIiLCJtYWluSXRlbSIsInNsaWNlIiwicXVlcnlTZWxlY3RvckFsbCIsInQiLCJyZW1vdmVDaGlsZCIsInRhZyIsInBhcnNlVGVtcGxhdGUiLCJUYWdUZW1wbGF0ZSIsIlRlbXBsYXRlIiwiYmluZCIsImluc2VydEJlZm9yZSIsIlNlbGVjdGVkVGVtcGxhdGUiLCJwcmV2aW91c0l0ZW0iLCJ1cmwiLCJGZXRjaCIsImFib3J0IiwidG9nZ2xlTG9hZGVyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsIlByb2Nlc3NpbmciLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJzZW5kIiwiaXRlbXMiLCJDYXRlZ29yaXplIiwic29ydCIsImEiLCJiIiwiZ2V0UHJvcGVydHlCeVN0cmluZyIsImluZGV4Iiwib3B0aW9uIiwiZGF0YSIsInRlbXBsYXRlIiwicmUiLCJtIiwiZXhlYyIsInNlbGVjdG9yIiwib2JqZWN0IiwiaXNFcXVpdmFsZW50IiwiYVByb3BzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImJQcm9wcyIsImkiLCJwcm9wTmFtZSIsIlJlc2V0IiwiY29weSIsIm9wdHMiLCJzZWFyY2hmaWVsZHMiLCJtdWx0aXBsZSIsInRhZ3RlbXBsYXRlIiwic2VsZWN0ZWR0ZW1wbGF0ZSIsImNhdGVnb3JpemUiLCJwcm9jZXNzaW5nIiwibWlubGVuZ3RoIiwib25zZWxlY3QiLCJvbnJlbW92ZSIsIm9uYWRkIiwiZGVmaW5lUHJvcGVydGllcyIsImdldCIsInNldCIsIkhUTUxFbGVtZW50IiwiaXNOYU4iLCJzZWxlY3RlZCIsInNlbGVjdCIsIm1hdGNoIiwicmVzZXQiLCJmcmVlemUiLCJTeW1ib2wiLCJpdGVyYXRvciIsImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJleHBvcnRzIiwibW9kdWxlIiwid2luZG93Il0sIm1hcHBpbmdzIjoiQUFBQSxZQVFBLFNBQVNBLGFBQVlDLEVBQVFDLEdBNEM1QixRQUFTQyxLQUNSQyxLQUFLSCxRQUFVQSxFQUNmSSxFQUFRQyxVQUFVQyxJQUFJLGVBQ3RCRixFQUFRRyxhQUFhLFdBQVcsR0FDN0JILEVBQVFJLGFBQWEsaUJBQWdCQyxFQUFTQyxZQUFjTixFQUFRSSxhQUFhLGdCQUNwRkcsSUFFQUMsRUFBUUMsS0FBS1YsS0FBS0YsT0FHbkIsUUFBU2EsR0FBZUMsR0FDdkIsTUFBZ0IsZ0JBQU5BLEdBQXVCQyxRQUFRQyxNQUFNLGtDQUMvQ0MsRUFBY0gsTUFDZFgsR0FBUWUsY0FBYyxpQkFBaUJaLGFBQWEsY0FBY1csSUFHbkUsUUFBU0UsR0FBWUMsR0FDcEJDLElBQVdELEVBQ1JDLEdBQWlDLFlBQWIsbUJBQUFDLEdBQUEsWUFBQUMsUUFBQUQsS0FBeUJBLElBQVVBLEdBQVlBLElBOURsQyxRQW1FNUJFLEdBQVVKLEdBQ2ZBLEtBQVUsR0FDWkssSUFDQXRCLEVBQVFDLFVBQVVDLElBQUksYUFDdEJxQixFQUFjQyxVQUFZLEVBQzFC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LEdBQVFySSxFQUFNaUQsT0FBTyxTQUFDc0QsRUFBRVEsR0FXM0IsTUFYaUNSLEdBQUlJLEVBQWF2RyxFQUFLMkcsR0FBS0EsRUFBSVIsR0FBRSxLQUNoRThCLElBQU90SSxFQUFXc0ksSUFHdEJuTCxLQUFLZ0MsT0FBUyxTQUFnQmtCLEdBQzdCLElBQUlBLEVBQU0sTUFBTzZHLElBQ2pCLElBQUlvQixHQUFRckksRUFBTWlELE9BQU8sU0FBQ3NELEVBQUVRLEdBYTNCLE1BYmlDUixHQUFJSSxFQUFhdkcsRUFBSzJHLEdBQUtBLEVBQUlSLEdBQUUsS0FDaEU4QixJQUFPbEksRUFBZWtJLEdBQU0sSUErQmhDbkwsS0FBS29MLE1BQVFyQixFQUdiaEssRUFBS1csS0FBS1YsTUFNSDZGLE9BQU93RixPQUFPckwsTUE5a0J0QixHQUFJcUIsU0FBNEIsa0JBQVhpSyxTQUFvRCxnQkFBcEJBLFFBQU9DLFNBQXdCLFNBQVUzRixHQUFPLGFBQWNBLElBQVMsU0FBVUEsR0FBTyxNQUFPQSxJQUF5QixrQkFBWDBGLFNBQXlCMUYsRUFBSXRDLGNBQWdCZ0ksT0FBUyxlQUFrQjFGLEtBbWxCek8sU0FBbUI0RixHQUNPLGtCQUFYQyxTQUF5QkEsT0FBT0MsSUFBTUQsT0FBTyxjQUFlRCxHQUMzQyxZQUFaLG1CQUFBRyxTQUFBLFlBQUF0SyxRQUFBc0ssVUFBdUJDLE9BQU9ELFFBQVVILEVBQ3BESyxPQUFPak0sWUFBYzRMLEdBQzNCNUwiLCJmaWxlIjoiY2hvb3NlYnVtcHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vKiAgQ2hvb3NlQnVtcHNcclxuICogIEEgZHJvcGRvd24gc28gc2ltcGxlIGl0IHdpbGwgZ2l2ZSB5b3UgY2hvb3NlLWJ1bXBzIVxyXG4gKiAgQXV0aG9yOiBjYXIuamFjb2JzZW5AZ21haWwuY29tXHJcbiAqICBMaWNlbnNlOiBNSVRcclxuICovXHJcblxyXG5mdW5jdGlvbiBDaG9vc2VCdW1wcyhlbGVtZW50LG9wdGlvbnMpIHtcclxuXHRpZih0aGlzIGluc3RhbmNlb2YgQ2hvb3NlQnVtcHMgPT09IGZhbHNlKSByZXR1cm4gbmV3IENob29zZUJ1bXBzKGVsZW1lbnQsb3B0aW9ucyk7XHJcblxyXG5cdGxldCBFbGVtZW50ID0gbnVsbDtcclxuXHRsZXQgSXRlbUNvbnRhaW5lciA9IG51bGw7XHJcblx0bGV0IExvYWRpbmdDb250YWluZXIgPSBudWxsO1xyXG5cdGxldCBTZWFyY2ggPSBmYWxzZTtcclxuXHRsZXQgU2VsZWN0ZWQgPSBudWxsO1xyXG5cdGxldCBpc09wZW4gPSBmYWxzZTtcclxuXHRsZXQgU2VhcmNoRmllbGRzID0gbnVsbDtcclxuXHRsZXQgUGxhY2Vob2xkZXIgPSBudWxsO1xyXG5cdGxldCBNdWx0aXBsZSA9IGZhbHNlO1xyXG5cdGxldCBDYXRlZ29yaXplID0gbnVsbDtcclxuXHRsZXQgVGVtcGxhdGUgPSAnJztcclxuXHRsZXQgVGFnVGVtcGxhdGUgPSBudWxsO1xyXG5cdGxldCBTZWxlY3RlZFRlbXBsYXRlID0gbnVsbDtcclxuXHRsZXQgU2VsZWN0ZWRJbmRleCA9IG51bGw7XHJcblx0bGV0IG9uU2VsZWN0ID0gbnVsbDtcclxuXHRsZXQgUHJvY2Vzc2luZyA9IG51bGw7XHJcblx0bGV0IG9uQWRkID0gbnVsbDtcclxuXHRsZXQgb25SZW1vdmUgPSBudWxsO1xyXG5cdGxldCBUeXBlVHJlc2hvbGQgPSBudWxsO1xyXG5cdGxldCBGZXRjaCA9IG51bGw7XHJcblx0bGV0IEZldGNoVXJsID0gbnVsbDtcclxuXHRsZXQgTWluTGVuZ3RoID0gMDtcclxuXHRsZXQgSXRlbXMgPSBbXTtcclxuXHJcblx0bGV0IGRlZmF1bHRzID0ge1xyXG5cdFx0cGxhY2Vob2xkZXI6ICdDaG9vc2UnLFxyXG5cdFx0aXRlbXM6IFtdLFxyXG5cdFx0c2VhcmNoOiBmYWxzZSxcclxuXHRcdHNlYXJjaGZpZWxkczogJycsXHJcblx0XHRtdWx0aXBsZTogZmFsc2UsXHJcblx0XHR0ZW1wbGF0ZTogJ3t7ZGF0YX19JyxcclxuXHRcdHRhZ3RlbXBsYXRlOiBudWxsLFxyXG5cdFx0c2VsZWN0ZWR0ZW1wbGF0ZTogbnVsbCxcclxuXHRcdGNhdGVnb3JpemU6IG51bGwsXHJcblx0XHRwcm9jZXNzaW5nOiBudWxsLFxyXG5cdFx0bWlubGVuZ3RoOiBudWxsLFxyXG5cdFx0b25zZWxlY3Q6IG51bGwsXHJcblx0XHRvbnJlbW92ZTogbnVsbCxcclxuXHRcdG9uYWRkOiBudWxsXHJcblx0fTtcclxuXHJcblx0ZnVuY3Rpb24gaW5pdCgpIHtcclxuXHRcdHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcblx0XHRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Nob29zZWJ1bXBzJyk7XHJcblx0XHRFbGVtZW50LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLDApO1xyXG5cdFx0aWYoRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJykpIGRlZmF1bHRzLnBsYWNlaG9sZGVyID0gRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XHJcblx0XHRyZW5kZXJIVE1MKCk7XHJcblxyXG5cdFx0c2V0QXJncy5jYWxsKHRoaXMsb3B0aW9ucyB8fCB7fSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBzZXRQbGFjZWhvbGRlcih4KSB7XHJcblx0XHRpZih0eXBlb2YgeCAhPT0gJ3N0cmluZycpIHJldHVybiBjb25zb2xlLmVycm9yKCdQbGFjZWhvbGRlciBtdXN0IGJlIGEgc3RyaW5nLicpO1xyXG5cdFx0UGxhY2Vob2xkZXIgPSB4O1xyXG5cdFx0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2ItbWFpbi1pdGVtJykuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsUGxhY2Vob2xkZXIpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gc2V0TXVsdGlwbGUoc3RhdGUpIHtcclxuXHRcdE11bHRpcGxlID0gKHN0YXRlKSA/IHRydWUgOiBmYWxzZTtcclxuXHRcdGlmKE11bHRpcGxlKSBpZih0eXBlb2YgU2VsZWN0ZWQgPT09ICdvYmplY3QnICYmIFNlbGVjdGVkKSBTZWxlY3RlZCA9IFtTZWxlY3RlZF07XHJcblx0fVxyXG5cclxuXHQvKiBJbnRlcmFjdGlvbnMgKi9cclxuXHJcblx0ZnVuY3Rpb24gc2V0T3BlbmVkKHN0YXRlKSB7XHJcblx0XHRpZihzdGF0ZSA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRyZW5kZXJJdGVtcygpO1xyXG5cdFx0XHRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NiLWFjdGl2ZScpO1xyXG5cdFx0XHRJdGVtQ29udGFpbmVyLnNjcm9sbFRvcCA9IDA7XHJcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZXRPcGVuZWQpO1xyXG5cdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJyxBcnJvd05hdmlnYXRpb24pO1xyXG5cdFx0XHRmb2N1c1NlYXJjaCgpO1xyXG5cdFx0XHRpc09wZW4gPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHJlc2V0U2VhcmNoKCk7XHJcblx0XHRcdEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2ItYWN0aXZlJyk7XHJcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZXRPcGVuZWQpO1xyXG5cdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJyxBcnJvd05hdmlnYXRpb24pO1xyXG5cdFx0XHRTZWxlY3RlZEluZGV4ID0gbnVsbDtcclxuXHRcdFx0aXNPcGVuID0gZmFsc2U7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBBcnJvd05hdmlnYXRpb24oZSkge1xyXG5cdFx0aWYobmV3IFJlZ0V4cCgnMzh8NDB8MTMnKS50ZXN0KGUua2V5Q29kZSkpIGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHN3aXRjaChlLmtleUNvZGUpIHtcclxuXHRcdFx0Y2FzZSAzODpcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRzZWxlY3RQcmV2KCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIDQwOlxyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHNlbGVjdE5leHQoKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgMTM6XHJcblx0XHRcdGlmKHR5cGVvZiBvbkFkZCA9PT0gJ2Z1bmN0aW9uJyAmJiBTZWxlY3RlZEluZGV4ID09PSAtMSl7XHJcblx0XHRcdFx0b25BZGQoZS50YXJnZXQudmFsdWUpO1xyXG5cdFx0XHRcdHJldHVybiBlLnRhcmdldC52YWx1ZSA9ICcnO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmKFNlbGVjdGVkSW5kZXggPCAwKSByZXR1cm47XHJcblx0XHRcdHNlbGVjdEl0ZW0oSXRlbXNbcGFyc2VJbnQoSXRlbUNvbnRhaW5lci5jaGlsZHJlbltTZWxlY3RlZEluZGV4XS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSwxMCldLHRydWUpO1xyXG5cdFx0XHRTZWxlY3RlZEluZGV4ID0gbnVsbDtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKiBTZWxlY3RpbmcgKi9cclxuXHJcblx0ZnVuY3Rpb24gcmVtb3ZlU2VsZWN0ZWQoaXRlbSx0cmlnZ2VyQ2FsbGJhY2ssZXZlbnQpIHtcclxuXHRcdGlmKGV2ZW50KSBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdGlmKFNlbGVjdGVkICYmIFNlbGVjdGVkLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xyXG5cdFx0XHRTZWxlY3RlZC5zcGxpY2UoU2VsZWN0ZWQuaW5kZXhPZihpdGVtKSwxKTtcclxuXHRcdFx0aWYoIVNlbGVjdGVkLmxlbmd0aCkgU2VsZWN0ZWQgPSBudWxsO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdFNlbGVjdGVkID0gbnVsbDtcclxuXHRcdH1cclxuXHJcblx0XHRpZighU2VsZWN0ZWQpIEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLW1haW4taXRlbScpLmNsYXNzTGlzdC5hZGQoJ2NiLXBsYWNlaG9sZGVyJyk7XHJcblx0XHRpZihvblJlbW92ZSAmJiB0cmlnZ2VyQ2FsbGJhY2spIG9uUmVtb3ZlKGl0ZW0pO1xyXG5cdFx0cmVuZGVyU2VsZWN0aW9uKCk7XHJcblx0XHRyZW5kZXJJdGVtcygpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gc2VsZWN0TmV4dCgpIHtcclxuICAgICAgICBpZihTZWxlY3RlZEluZGV4ID09PSBudWxsKSBTZWxlY3RlZEluZGV4ID0gLTE7XHJcbiAgICAgICAgbGV0IG1heCA9IEl0ZW1Db250YWluZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMTtcclxuXHJcbiAgICAgICAgU2VsZWN0ZWRJbmRleCA9IChTZWxlY3RlZEluZGV4IDwgbWF4KSA/IFNlbGVjdGVkSW5kZXggKyAxIDogbWF4O1xyXG4gICAgICAgIHVwZGF0ZVNlbGVjdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNlbGVjdFByZXYoKSB7XHJcbiAgICAgICAgbGV0IG1heCA9IEl0ZW1Db250YWluZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMTtcclxuXHJcbiAgICAgICAgU2VsZWN0ZWRJbmRleCA9ICghU2VsZWN0ZWRJbmRleCkgPyBudWxsIDogU2VsZWN0ZWRJbmRleCAtIDE7XHJcbiAgICAgICAgdXBkYXRlU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2Nyb2xsU2VsZWN0ZWRJbnRvVmlldygpIHtcclxuXHRcdGlmKCFTZWxlY3RlZEluZGV4IHx8IFNlbGVjdGVkSW5kZXggPCAwKSByZXR1cm47XHJcblx0XHRsZXQgc2VsZWN0ZWRJdGVtID0gSXRlbUNvbnRhaW5lci5jaGlsZHJlbltTZWxlY3RlZEluZGV4XTtcclxuXHRcdGxldCBjb250YWluZXJUb3AgPSBJdGVtQ29udGFpbmVyLnNjcm9sbFRvcDtcclxuXHRcdGxldCBjb250YWluZXJCb3R0b20gPSBJdGVtQ29udGFpbmVyLnNjcm9sbFRvcCArIEl0ZW1Db250YWluZXIuY2xpZW50SGVpZ2h0O1xyXG5cdFx0bGV0IHNlbGVjdGVkSXRlbVRvcCA9IHNlbGVjdGVkSXRlbS5vZmZzZXRUb3A7XHJcblx0XHRsZXQgc2VsZWN0ZWRJdGVtQm90dG9tID0gc2VsZWN0ZWRJdGVtLm9mZnNldFRvcCArIHNlbGVjdGVkSXRlbS5jbGllbnRIZWlnaHQ7XHJcblx0XHRpZihzZWxlY3RlZEl0ZW1Ub3AgPCBjb250YWluZXJUb3ApIEl0ZW1Db250YWluZXIuc2Nyb2xsVG9wID0gc2VsZWN0ZWRJdGVtLm9mZnNldFRvcDtcclxuXHRcdGVsc2UgaWYoc2VsZWN0ZWRJdGVtQm90dG9tID4gY29udGFpbmVyQm90dG9tKSBJdGVtQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNlbGVjdGVkSXRlbUJvdHRvbSAtIEl0ZW1Db250YWluZXIuY2xpZW50SGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGlvbigpIHtcclxuICAgICAgICB2YXIgb2xkU2VsZWN0aW9uID0gSXRlbUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY2Itc2VsZWN0ZWQnKTtcclxuICAgICAgICBpZihvbGRTZWxlY3Rpb24pIG9sZFNlbGVjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYi1zZWxlY3RlZCcpO1xyXG4gICAgICAgIGxldCBlbCA9IEl0ZW1Db250YWluZXIuY2hpbGRyZW5bU2VsZWN0ZWRJbmRleF07XHJcbiAgICAgICAgaWYoZWwpIGVsLmNsYXNzTGlzdC5hZGQoJ2NiLXNlbGVjdGVkJyk7XHJcbiAgICAgICAgc2Nyb2xsU2VsZWN0ZWRJbnRvVmlldygpO1xyXG4gICAgfVxyXG5cclxuXHRmdW5jdGlvbiBzZWxlY3RJdGVtKGl0ZW0sdHJpZ2dlckNhbGxiYWNrLGV2ZW50KSB7XHJcblx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1tYWluLWl0ZW0nKS5jbGFzc0xpc3QucmVtb3ZlKCdjYi1wbGFjZWhvbGRlcicpO1xyXG5cdFx0cmVzZXRTZWFyY2goKTtcclxuXHJcblx0XHRpZihNdWx0aXBsZSkge1xyXG5cdFx0XHRpZihTZWxlY3RlZCAmJiBTZWxlY3RlZC5pbmRleE9mKGl0ZW0pIDwgMCkgU2VsZWN0ZWQucHVzaChpdGVtKTtcclxuXHRcdFx0ZWxzZSBTZWxlY3RlZCA9IFtpdGVtXTtcclxuXHJcblx0XHRcdHJlbmRlckl0ZW1zKCk7XHJcblx0XHRcdGlmKGV2ZW50KSBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0Zm9jdXNTZWFyY2goKTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHRTZWxlY3RlZCA9IGl0ZW07XHJcblx0XHRcdHNldE9wZW5lZChmYWxzZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYob25TZWxlY3QgJiYgdHJpZ2dlckNhbGxiYWNrKSBvblNlbGVjdChpdGVtKTtcclxuXHRcdHJlbmRlclNlbGVjdGlvbigpO1xyXG5cdH1cclxuXHJcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcbiAgICAvKiBTZWFyY2hpbmcgKi9cclxuXHJcbiAgICBmdW5jdGlvbiBzZXRTZWFyY2goc3RhdGUpIHtcclxuXHRcdFNlYXJjaCA9IChzdGF0ZSkgPyB0cnVlIDogZmFsc2U7XHJcblxyXG5cdFx0aWYoU2VhcmNoKSB7XHJcblx0XHRcdEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2Itc2VhcmNoLWVuYWJsZWQnKTtcclxuXHRcdFx0bGV0IFNlYXJjaEJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcblx0XHRcdFx0U2VhcmNoQm94LmNsYXNzTmFtZSA9ICdjYi1zZWFyY2gnO1xyXG5cdFx0XHRcdFNlYXJjaEJveC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCd0ZXh0Jyk7XHJcblx0XHRcdFx0U2VhcmNoQm94LnNldEF0dHJpYnV0ZSgnc2l6ZScsMSk7XHJcblx0XHRcdFx0U2VhcmNoQm94LnNldEF0dHJpYnV0ZSgnYXV0b2NvbXBsZXRlJywnb2ZmJyk7XHJcblxyXG5cdFx0XHRcdFNlYXJjaEJveC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsZnVuY3Rpb24gS2V5VXAoZSkge1xyXG5cdFx0XHRcdFx0aWYobmV3IFJlZ0V4cCgnMzh8NDB8MTMnKS50ZXN0KGUua2V5Q29kZSkgPT09IGZhbHNlICYmIHRoaXMudmFsdWUubGVuZ3RoID49IE1pbkxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRUeXBlVHJlc2hvbGQgJiYgY2xlYXJUaW1lb3V0KFR5cGVUcmVzaG9sZCk7XHJcblx0XHRcdFx0XHRcdFR5cGVUcmVzaG9sZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdFx0XHRzZWFyY2goU2VhcmNoQm94LnZhbHVlLGZ1bmN0aW9uKHJlc3VsdCl7XHJcblx0XHRcdFx0XHRcdFx0XHRpZigve3suKn19L2lnLnRlc3QoRmV0Y2hVcmwpKSBJdGVtcyA9IHJlc3VsdDtcclxuXHRcdFx0XHRcdFx0XHRcdHJlbmRlckl0ZW1zKHJlc3VsdCk7XHJcblx0XHRcdFx0XHRcdFx0XHRTZWxlY3RlZEluZGV4ID0gbnVsbDtcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGVjdE5leHQoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fSwyMDApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRTZWFyY2hCb3guYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLGZ1bmN0aW9uIEtleVByZXNzKCkge1xyXG5cdFx0XHRcdFx0dGhpcy5zZXRBdHRyaWJ1dGUoJ3NpemUnLHRoaXMudmFsdWUubGVuZ3RoICsgMSk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1tYWluLWl0ZW0nKS5hcHBlbmRDaGlsZChTZWFyY2hCb3gpO1xyXG5cdFx0fWVsc2UgRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjYi1zZWFyY2gtZW5hYmxlZCcpO1xyXG5cdH1cclxuXHJcbiAgICBmdW5jdGlvbiByZXNldFNlYXJjaCgpIHtcclxuXHRcdGlmKCFTZWFyY2gpIHJldHVybjtcclxuXHRcdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLXNlYXJjaCcpLnZhbHVlID0gJyc7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBmb2N1c1NlYXJjaCgpIHtcclxuXHRcdGlmKCFTZWFyY2gpIHJldHVybjtcclxuXHRcdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLXNlYXJjaCcpLmZvY3VzKCk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBzZWFyY2gocXVlcnksY2IpIHtcclxuXHRcdGlmKCFxdWVyeSkgcmV0dXJuIEl0ZW1zO1xyXG5cdFx0bGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChxdWVyeSwnaScpO1xyXG5cclxuXHRcdGlmKC97ey4qfX0vaWcudGVzdChGZXRjaFVybCkpIHtcclxuXHRcdFx0ZmV0Y2hJdGVtcyhGZXRjaFVybC5yZXBsYWNlKC97e3F1ZXJ5fX0vLHF1ZXJ5KSxjYik7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0Y2IoSXRlbXMuZmlsdGVyKGZ1bmN0aW9uIEZpbHRlcih4KSB7XHJcblx0XHRcdFx0aWYoU2VhcmNoRmllbGRzKSB7XHJcblx0XHRcdFx0XHRsZXQgc3RhdGUgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFNlYXJjaEZpZWxkcy5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gRm9yRWFjaChmaWVsZCkge1xyXG5cdFx0XHRcdFx0XHRsZXQga2V5cyA9IGZpZWxkLnNwbGl0KCcuJyk7XHJcblx0XHRcdFx0XHRcdGxldCB2YWx1ZSA9IGtleXMucmVkdWNlKGZ1bmN0aW9uIFJlZHVjZSh2YWwsaXRlbSkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiB2YWxbaXRlbV07XHJcblx0XHRcdFx0XHRcdH0seCk7XHJcblxyXG5cdFx0XHRcdFx0XHRpZihyZWdleC50ZXN0KHZhbHVlKSkgc3RhdGUgPSB0cnVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0cmV0dXJuIHN0YXRlO1xyXG5cdFx0XHRcdH1lbHNlXHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSByZXR1cm4gcmVnZXgudGVzdCh4KTtcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRyZXR1cm4gc2VhcmNoT2JqZWN0KHgpO1xyXG5cdFx0XHR9KSk7XHJcblx0XHR9XHJcblxyXG5cclxuXHJcblxyXG5cdFx0ZnVuY3Rpb24gc2VhcmNoT2JqZWN0KG9iaikge1xyXG5cdFx0XHRyZXR1cm4gT2JqZWN0LmtleXMob2JqKS5yZWR1Y2UoZnVuY3Rpb24gUmVkdWNlKHZhbCxrZXkpIHtcclxuXHRcdFx0XHRsZXQgY2hlY2sgPSBmYWxzZTtcclxuXHRcdFx0XHRpZih0eXBlb2Ygb2JqW2tleV0gPT09ICdvYmplY3QnKSBjaGVjayA9IHNlYXJjaE9iamVjdChvYmpba2V5XSk7XHJcblx0XHRcdFx0ZWxzZSBjaGVjayA9IHJlZ2V4LnRlc3Qob2JqW2tleV0pO1xyXG5cclxuXHRcdFx0XHRpZihjaGVjaykgdmFsID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHZhbDtcclxuXHRcdFx0fSxmYWxzZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuXHQvKiBSZW5kZXJpbmcgKi9cclxuXHJcblx0ZnVuY3Rpb24gcmVuZGVySFRNTCgpIHsgLy9jb21tZW50XHJcblx0XHRsZXQgTWFpbkl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0TWFpbkl0ZW0uY2xhc3NOYW1lID0gJ2NiLW1haW4taXRlbSBjYi1wbGFjZWhvbGRlciB0cmlnZ2VyJztcclxuXHJcblxyXG5cdFx0bGV0IENhcmV0ID0gYDxzdmcgY2xhc3M9XCJjYi1jYXJldCB0cmlnZ2VyXCIgdmlld0JveD1cIjAgMCA1MTIgNTEyXCIgaGVpZ2h0PVwiMjBcIiB3aWR0aD1cIjIwXCI+XHJcblx0XHRcdFx0XHRcdDxwYXRoIGNsYXNzPVwidHJpZ2dlclwiIGQ9XCJtNTA4IDEwOGMtNC00LTExLTQtMTUgMWwtMjM3IDI3MWwtMjM3LTI3MWMtNC01LTExLTUtMTUtMWMtNSA0LTUgMTAtMSAxNWwyNDUgMjgwYzIgMyA1IDQgOCA0YzMgMCA2LTEgOC00bDI0NS0yODBjNC01IDQtMTEtMS0xNXpcIj48L3BhdGg+XHJcblx0XHRcdFx0XHQ8L3N2Zz5gO1xyXG5cclxuXHRcdE1haW5JdGVtLmlubmVySFRNTCArPSBDYXJldDtcclxuXHRcdEVsZW1lbnQuYXBwZW5kQ2hpbGQoTWFpbkl0ZW0pO1xyXG5cclxuXHRcdEl0ZW1Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdEl0ZW1Db250YWluZXIuY2xhc3NOYW1lID0gJ2NiLWl0ZW1zJztcclxuXHRcdEVsZW1lbnQuYXBwZW5kQ2hpbGQoSXRlbUNvbnRhaW5lcik7XHJcblxyXG5cdFx0TG9hZGluZ0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0TG9hZGluZ0NvbnRhaW5lci5jbGFzc05hbWUgPSAnY2ItbG9hZGVyJztcclxuXHRcdEVsZW1lbnQuYXBwZW5kQ2hpbGQoTG9hZGluZ0NvbnRhaW5lcik7XHJcblxyXG5cdFx0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2ItbWFpbi1pdGVtJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLChlKSA9PiB7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdHNldE9wZW5lZCghaXNPcGVuKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gcmVuZGVyU2VsZWN0aW9uKCkge1xyXG5cclxuXHRcdGxldCBtYWluSXRlbSA9IEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLW1haW4taXRlbScpO1xyXG5cclxuXHRcdGlmKE11bHRpcGxlKSB7XHJcblx0XHRcdFtdLnNsaWNlLmNhbGwoRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2ItbWFpbi1pdGVtIC5jYi10YWcnKSkuZm9yRWFjaCgodCkgPT4ge1xyXG5cdFx0XHRcdG1haW5JdGVtLnJlbW92ZUNoaWxkKHQpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGlmKCFTZWxlY3RlZCkgcmV0dXJuO1xyXG5cdFx0XHRTZWxlY3RlZC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG5cdFx0XHRcdGxldCB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRcdHRhZy5jbGFzc05hbWUgPSAnY2ItdGFnJztcclxuXHRcdFx0XHRcdHRhZy5pbm5lckhUTUwgPSBwYXJzZVRlbXBsYXRlKGl0ZW0sVGFnVGVtcGxhdGUgfHwgVGVtcGxhdGUpICsgYDxzdmcgdmlld0JveD1cIjAgMCA1MTIgNTEyXCI+XHJcblx0XHRcdFx0XHRcdDxwYXRoIGQ9XCJtMjcxIDI1NmwyMzgtMjM4YzQtNCA0LTExIDAtMTVjLTQtNC0xMS00LTE1IDBsLTIzOCAyMzhsLTIzOC0yMzhjLTQtNC0xMS00LTE1IDBjLTQgNC00IDExIDAgMTVsMjM4IDIzOGwtMjM4IDIzOGMtNCA0LTQgMTEgMCAxNWMyIDIgNSAzIDggM2MyIDAgNS0xIDctM2wyMzgtMjM4bDIzOCAyMzhjMiAyIDUgMyA3IDNjMyAwIDYtMSA4LTNjNC00IDQtMTEgMC0xNXpcIj48L3BhdGg+XHJcblx0XHRcdFx0XHQ8L3N2Zz5gO1xyXG5cclxuXHRcdFx0XHRcdHRhZy5xdWVyeVNlbGVjdG9yKCdzdmcnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycscmVtb3ZlU2VsZWN0ZWQuYmluZChudWxsLGl0ZW0sdHJ1ZSkpO1xyXG5cclxuXHRcdFx0XHRtYWluSXRlbS5pbnNlcnRCZWZvcmUodGFnLG1haW5JdGVtLmNoaWxkcmVuW21haW5JdGVtLmNoaWxkcmVuLmxlbmd0aCAtIDFdKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpZighU2VsZWN0ZWQpIHJldHVybiBbXS5zbGljZS5jYWxsKG1haW5JdGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYi1zZWxlY3RlZC1pdGVtLC5jYi10YWcnKSkuZm9yRWFjaCggZSA9PiBtYWluSXRlbS5yZW1vdmVDaGlsZChlKSk7XHJcblx0XHRcdGxldCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0aXRlbS5jbGFzc05hbWUgPSAnY2Itc2VsZWN0ZWQtaXRlbSc7XHJcblx0XHRcdFx0aXRlbS5pbm5lckhUTUwgPSBwYXJzZVRlbXBsYXRlKFNlbGVjdGVkLFNlbGVjdGVkVGVtcGxhdGUgfHwgVGVtcGxhdGUpO1xyXG5cclxuXHJcblx0XHRcdGxldCBwcmV2aW91c0l0ZW0gPSBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1zZWxlY3RlZC1pdGVtJyk7XHJcblx0XHRcdGlmKHByZXZpb3VzSXRlbSkgbWFpbkl0ZW0ucmVtb3ZlQ2hpbGQocHJldmlvdXNJdGVtKTtcclxuXHRcdFx0bWFpbkl0ZW0uaW5zZXJ0QmVmb3JlKGl0ZW0sbWFpbkl0ZW0uY2hpbGRyZW5bbWFpbkl0ZW0uY2hpbGRyZW4ubGVuZ3RoIC0gMV0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZmV0Y2hJdGVtcyh1cmwsY2IpIHtcclxuXHRcdGlmKEZldGNoKSB7XHJcblx0XHRcdEZldGNoLmFib3J0KCk7XHJcblx0XHRcdHRvZ2dsZUxvYWRlcihmYWxzZSk7XHJcblx0XHR9XHJcblx0XHRGZXRjaCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cdFx0RmV0Y2gub3BlbignR0VUJyx1cmwpO1xyXG5cdFx0RmV0Y2gub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0aWYodGhpcy5yZWFkeVN0YXRlID09IDQpIHtcclxuXHRcdFx0XHR0b2dnbGVMb2FkZXIoZmFsc2UpO1xyXG5cdFx0XHRcdGlmKHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDQwMCkge1xyXG5cdFx0XHRcdFx0Y2IoKFByb2Nlc3NpbmcpID8gUHJvY2Vzc2luZyhKU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KSkgOiBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KSk7XHJcblx0XHRcdFx0XHRGZXRjaCA9IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRGZXRjaC5zZW5kKCk7XHJcblx0XHR0b2dnbGVMb2FkZXIodHJ1ZSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiB0b2dnbGVMb2FkZXIoc3RhdGUpIHtcclxuXHRcdGlmKHN0YXRlKSB7XHJcblx0XHRcdExvYWRpbmdDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblx0XHRcdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLWNhcmV0JykuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdExvYWRpbmdDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0XHRcdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLWNhcmV0JykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuXHRcdEl0ZW1Db250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcblxyXG5cdFx0aWYoQ2F0ZWdvcml6ZSlcclxuXHRcdFx0SXRlbXMgPSBJdGVtcy5zb3J0KChhLGIpID0+IHtcclxuXHRcdFx0XHRpZihnZXRQcm9wZXJ0eUJ5U3RyaW5nKENhdGVnb3JpemUsYSkgPCBnZXRQcm9wZXJ0eUJ5U3RyaW5nKENhdGVnb3JpemUsYikpIHJldHVybiAtMTtcclxuXHRcdFx0XHRpZihnZXRQcm9wZXJ0eUJ5U3RyaW5nKENhdGVnb3JpemUsYSkgPiBnZXRQcm9wZXJ0eUJ5U3RyaW5nKENhdGVnb3JpemUsYikpIHJldHVybiAxO1xyXG5cdFx0XHRcdHJldHVybiAwO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRsZXQgcHJldmlvdXNJdGVtID0gbnVsbDtcclxuXHRcdEl0ZW1zLmZvckVhY2goKGl0ZW0saW5kZXgpID0+IHtcclxuXHRcdFx0aWYoaXRlbXMgJiYgaXRlbXMuaW5kZXhPZihpdGVtKSA8IDApIHJldHVybjtcclxuXHRcdFx0aWYoTXVsdGlwbGUgJiYgU2VsZWN0ZWQgJiYgU2VsZWN0ZWQuaW5kZXhPZihpdGVtKSA+IC0xIHx8ICFNdWx0aXBsZSAmJiBTZWxlY3RlZCA9PT0gaXRlbSkgcmV0dXJuO1xyXG5cdFx0XHRsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0b3B0aW9uLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGluZGV4KTtcclxuXHRcdFx0XHRvcHRpb24uaW5uZXJIVE1MID0gcGFyc2VUZW1wbGF0ZShpdGVtLFRlbXBsYXRlKTtcclxuXHRcdFx0XHRvcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdEl0ZW0uYmluZChudWxsLGl0ZW0sdHJ1ZSkpO1xyXG5cclxuXHRcdFx0aWYoQ2F0ZWdvcml6ZSAmJiAoIXByZXZpb3VzSXRlbSB8fCBnZXRQcm9wZXJ0eUJ5U3RyaW5nKENhdGVnb3JpemUscHJldmlvdXNJdGVtKSAhPT0gZ2V0UHJvcGVydHlCeVN0cmluZyhDYXRlZ29yaXplLGl0ZW0pKSkgb3B0aW9uLnNldEF0dHJpYnV0ZSgnY2F0ZWdvcnknLGdldFByb3BlcnR5QnlTdHJpbmcoQ2F0ZWdvcml6ZSxpdGVtKSk7XHJcblxyXG5cdFx0XHRwcmV2aW91c0l0ZW0gPSBpdGVtO1xyXG5cdFx0XHRJdGVtQ29udGFpbmVyLmFwcGVuZENoaWxkKG9wdGlvbik7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHBhcnNlVGVtcGxhdGUoZGF0YSx0ZW1wbGF0ZSkge1xyXG5cdFx0bGV0IHJlID0gL3t7ZGF0YVxcLj8oLis/KT99fS87XHJcblx0XHRsZXQgbTtcclxuXHRcdHdoaWxlKG0gPSByZS5leGVjKHRlbXBsYXRlKSkge1xyXG5cdFx0XHRsZXQgc2VsZWN0b3IgPSAnJztcclxuXHRcdFx0bGV0IHZhbHVlID0gZGF0YTtcclxuXHRcdFx0aWYobVsxXSkge1xyXG5cdFx0XHRcdHNlbGVjdG9yID0gJy4nICsgbVsxXTtcclxuXHRcdFx0XHR2YWx1ZSA9IGdldFByb3BlcnR5QnlTdHJpbmcobVsxXSxkYXRhKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bGV0IHJlcGxhY2UgPSBuZXcgUmVnRXhwKCd7e2RhdGEnICsgc2VsZWN0b3IgKyAnfX0nKTtcclxuXHRcdFx0dGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKHJlcGxhY2UsdmFsdWUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0ZW1wbGF0ZTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGdldFByb3BlcnR5QnlTdHJpbmcoc2VsZWN0b3Isb2JqZWN0KSB7XHJcblx0XHRyZXR1cm4gc2VsZWN0b3Iuc3BsaXQoJy4nKS5yZWR1Y2UoKHZhbCxpdGVtKSA9PiB7XHJcblx0XHRcdHJldHVybiB2YWxbaXRlbV07XHJcblx0XHR9LG9iamVjdCk7XHJcblx0fVxyXG5cclxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtcclxuXHRcdCdlbGVtZW50Jzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IEVsZW1lbnQsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZih0eXBlb2YgeCA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdGxldCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoeCk7XHJcblx0XHRcdFx0XHRpZihlbCkgRWxlbWVudCA9IGVsO1xyXG5cdFx0XHRcdFx0ZWxzZSBjb25zb2xlLmVycm9yKCdFbGVtZW50IG5vdCBmb3VuZC4nKTtcclxuXHRcdFx0XHR9ZWxzZSBpZih4IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIEVsZW1lbnQgPSB4O1xyXG5cdFx0XHRcdGVsc2UgY29uc29sZS5lcnJvcignSW52YWxpZCBhcmd1bWVudCcpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J2l0ZW1zJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IEZldGNoVXJsIHx8IEl0ZW1zLFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYoeCBpbnN0YW5jZW9mIEFycmF5KSBJdGVtcyA9IHg7XHJcblx0XHRcdFx0ZWxzZSBpZih0eXBlb2YgeCA9PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcdFx0RmV0Y2hVcmwgPSB4XHJcblx0XHRcdFx0XHRpZighKC97ey4qfX0vaWcudGVzdChGZXRjaFVybCkpKSBmZXRjaEl0ZW1zKEZldGNoVXJsLGZ1bmN0aW9uKHJlc3VsdCkge1xyXG5cdFx0XHRcdFx0XHRJdGVtcyA9IHJlc3VsdDtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGNvbnNvbGUuZXJyb3IoJ0l0ZW1zIG11c3QgYmUgYW4gYXJyYXkgb3IgVVJMLicpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J21pbmxlbmd0aCc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBNaW5MZW5ndGgsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZihpc05hTih4KSkgTWluTGVuZ3RoID0gMDtcclxuXHRcdFx0XHRlbHNlIE1pbkxlbmd0aCA9IHg7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQnc2VhcmNoJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IFNlYXJjaCxcclxuXHRcdFx0c2V0OiBzZXRTZWFyY2hcclxuXHRcdH0sXHJcblx0XHQncGxhY2Vob2xkZXInOiB7XHJcblx0XHRcdGdldDogKCkgPT4gUGxhY2Vob2xkZXIsXHJcblx0XHRcdHNldDogc2V0UGxhY2Vob2xkZXJcclxuXHRcdH0sXHJcblx0XHQnbXVsdGlwbGUnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gTXVsdGlwbGUsXHJcblx0XHRcdHNldDogc2V0TXVsdGlwbGVcclxuXHRcdH0sXHJcblx0XHQnc2VsZWN0ZWQnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gU2VsZWN0ZWRcclxuXHRcdH0sXHJcblx0XHQndGVtcGxhdGUnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gVGVtcGxhdGUsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZih0eXBlb2YgeCA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdFRlbXBsYXRlID0geDtcclxuXHRcdFx0XHRcdHJlbmRlckl0ZW1zKCk7XHJcblx0XHRcdFx0XHRyZW5kZXJTZWxlY3Rpb24oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBjb25zb2xlLmVycm9yKCdUZW1wbGF0ZSBtdXN0IGJlIGEgc3RyaW5nLicpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J3RhZ3RlbXBsYXRlJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IFRhZ1RlbXBsYXRlIHx8IFRlbXBsYXRlLFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSB7XHJcblx0XHRcdFx0XHRUYWdUZW1wbGF0ZSA9IHg7XHJcblx0XHRcdFx0XHRyZW5kZXJJdGVtcygpO1xyXG5cdFx0XHRcdFx0cmVuZGVyU2VsZWN0aW9uKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J3NlbGVjdGVkdGVtcGxhdGUnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gU2VsZWN0ZWRUZW1wbGF0ZSB8fCBUZW1wbGF0ZSxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcdFx0U2VsZWN0ZWRUZW1wbGF0ZSA9IHg7XHJcblx0XHRcdFx0XHRyZW5kZXJJdGVtcygpO1xyXG5cdFx0XHRcdFx0cmVuZGVyU2VsZWN0aW9uKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J3NlYXJjaGZpZWxkcyc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBTZWFyY2hGaWVsZHMsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZih0eXBlb2YgeCA9PT0gJ3N0cmluZycpIFNlYXJjaEZpZWxkcyA9IHg7XHJcblx0XHRcdFx0ZWxzZSBjb25zb2xlLmVycm9yKCdTZWFyY2hGaWVsZHMgbXVzdCBiZSBhIHN0cmluZy4nKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCdvbnNlbGVjdCc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBvblNlbGVjdCxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nKSBvblNlbGVjdCA9IHg7XHJcblx0XHRcdFx0ZWxzZSBpZigheCkgb25TZWxlY3QgPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J3Byb2Nlc3NpbmcnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gUHJvY2Vzc2luZyxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nKSBQcm9jZXNzaW5nID0geDtcclxuXHRcdFx0XHRlbHNlIGlmKCF4KSBQcm9jZXNzaW5nID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCdvbnJlbW92ZSc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBvblJlbW92ZSxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nKSBvblJlbW92ZSA9IHg7XHJcblx0XHRcdFx0ZWxzZSBpZigheCkgb25SZW1vdmUgPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J29uYWRkJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IG9uQWRkLFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdmdW5jdGlvbicpIG9uQWRkID0geDtcclxuXHRcdFx0XHRlbHNlIGlmKCF4KSBvbkFkZCA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQnY2F0ZWdvcml6ZSc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBDYXRlZ29yaXplLFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSBDYXRlZ29yaXplID0geDtcclxuXHRcdFx0XHRlbHNlIENhdGVnb3JpemUgPSBudWxsO1xyXG5cclxuXHRcdFx0XHRyZW5kZXJJdGVtcygpXHQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0dGhpcy5zZWxlY3QgPSBmdW5jdGlvbiBTZWxlY3QoaXRlbSkge1xyXG5cdFx0aWYoIWl0ZW0pIHJldHVybiBSZXNldCgpO1xyXG5cdFx0bGV0IG1hdGNoID0gSXRlbXMucmVkdWNlKChtLGkpID0+IG0gPSBpc0VxdWl2YWxlbnQoaXRlbSxpKSA/IGkgOiBtLG51bGwpO1xyXG5cdFx0aWYobWF0Y2gpIHNlbGVjdEl0ZW0obWF0Y2gpO1xyXG5cdH07XHJcblxyXG5cdHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gUmVtb3ZlKGl0ZW0pIHtcclxuXHRcdGlmKCFpdGVtKSByZXR1cm4gUmVzZXQoKTtcclxuXHRcdGxldCBtYXRjaCA9IEl0ZW1zLnJlZHVjZSgobSxpKSA9PiBtID0gaXNFcXVpdmFsZW50KGl0ZW0saSkgPyBpIDogbSxudWxsKTtcclxuXHRcdGlmKG1hdGNoKSByZW1vdmVTZWxlY3RlZChtYXRjaCx0cnVlKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGlzRXF1aXZhbGVudChhLCBiKSB7XHJcblx0XHRpZih0eXBlb2YgYSAhPT0gJ29iamVjdCcgJiYgdHlwZW9mIGIgIT09ICdvYmplY3QnKSByZXR1cm4gYSA9PT0gYjtcclxuXHRcdGxldCBhUHJvcHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhKTtcclxuXHRcdGxldCBiUHJvcHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKTtcclxuXHJcblx0XHRpZiAoYVByb3BzLmxlbmd0aCAhPT0gYlByb3BzLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgYVByb3BzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGxldCBwcm9wTmFtZSA9IGFQcm9wc1tpXTtcclxuXHJcblx0XHRcdGlmKGFbcHJvcE5hbWVdICE9PSBiW3Byb3BOYW1lXSkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBSZXNldCgpIHtcclxuXHRcdGlmKFNlbGVjdGVkICYmIFNlbGVjdGVkLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xyXG5cdFx0XHR2YXIgY29weSA9IFNlbGVjdGVkLnNsaWNlKCk7XHJcblx0XHRcdGNvcHkuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XHJcblx0XHRcdFx0cmVtb3ZlU2VsZWN0ZWQoaXRlbSx0cnVlKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0cmVtb3ZlU2VsZWN0ZWQoU2VsZWN0ZWQsdHJ1ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmVzZXRTZWFyY2goKTtcclxuXHR9XHJcblxyXG5cdHRoaXMucmVzZXQgPSBSZXNldDtcclxuXHJcblxyXG5cdGluaXQuY2FsbCh0aGlzKTtcclxuXHJcblx0ZnVuY3Rpb24gc2V0QXJncyhvcHRzKSB7XHJcbiAgICAgICAgZm9yKGxldCBrZXkgaW4gZGVmYXVsdHMpIHRoaXNba2V5XSA9IChvcHRzW2tleV0pID8gb3B0c1trZXldIDogZGVmYXVsdHNba2V5XSA7XHJcbiAgICB9O1xyXG5cclxuXHRyZXR1cm4gT2JqZWN0LmZyZWV6ZSh0aGlzKTtcclxuIH1cclxuXHJcblxyXG4vKiBTcHJlYWQgaXQgdG8gdGhlIHdvcmxkISAqL1xyXG4gKGZ1bmN0aW9uIEZhY3RvcnkgKGZhY3RvcnkpIHtcclxuICAgIGlmICggdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkgZGVmaW5lKCdDaG9vc2VCdW1wcycsIGZhY3RvcnkpO1xyXG4gICAgZWxzZSBpZiAoIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyApIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeTtcclxuICAgIGVsc2Ugd2luZG93LkNob29zZUJ1bXBzID0gZmFjdG9yeTtcclxufSkoQ2hvb3NlQnVtcHMpO1xyXG4iXX0=
