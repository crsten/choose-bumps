"use strict";function ChooseBumps(e,t){function n(){this.element=e,C.classList.add("choosebumps"),C.setAttribute("tabindex",0),C.getAttribute("placeholder")&&(Y.placeholder=C.getAttribute("placeholder")),y(),A.call(this,t||{})}function r(e){return"string"!=typeof e?console.error("Placeholder must be a string."):(H=e,void C.querySelector(".cb-main-item").setAttribute("placeholder",H))}function c(e){M=!!e,M&&"object"===("undefined"==typeof N?"undefined":_typeof(N))&&N&&(N=[N])}function o(e){e===!0?(L(),C.classList.add("cb-active"),k.scrollTop=0,document.addEventListener("click",o),document.addEventListener("keydown",i),h(),j=!0):(m(),C.classList.remove("cb-active"),document.removeEventListener("click",o),document.removeEventListener("keydown",i),I=null,j=!1)}function i(e){switch(new RegExp("38|40|13").test(e.keyCode)&&e.preventDefault(),e.keyCode){case 38:e.preventDefault(),s();break;case 40:e.preventDefault(),u();break;case 13:if("function"==typeof G&&I===-1)return G(e.target.value),e.target.value="";if(I<0)return;d(W[parseInt(k.children[I].getAttribute("data-id"),10)],!0),I=null}}function l(e,t,n){n&&n.stopPropagation(),N&&N.constructor===Array?(N.splice(N.indexOf(e),1),N.length||(N=null)):N=null,N||C.querySelector(".cb-main-item").classList.add("cb-placeholder"),U&&t&&U(e),v(),L()}function u(){null===I&&(I=-1);var e=k.children.length-1;I=I<e?I+1:e,f()}function s(){k.children.length-1;I=I?I-1:null,f()}function a(){if(I&&!(I<0)){var e=k.children[I],t=k.scrollTop,n=k.scrollTop+k.clientHeight,r=e.offsetTop,c=e.offsetTop+e.clientHeight;r<t?k.scrollTop=e.offsetTop:c>n&&(k.scrollTop=c-k.clientHeight)}}function f(){var e=k.querySelector(".cb-selected");e&&e.classList.remove("cb-selected");var t=k.children[I];t&&t.classList.add("cb-selected"),a()}function d(e,t,n){C.querySelector(".cb-main-item").classList.remove("cb-placeholder"),m(),M?(N&&N.indexOf(e)<0?N.push(e):N=[e],L(),n&&n.stopPropagation(),h()):(N=e,o(!1)),J&&t&&J(e),v()}function p(e){O=!!e,O?!function(){C.classList.add("cb-search-enabled");var e=document.createElement("input");e.className="cb-search",e.setAttribute("type","text"),e.setAttribute("size",1),e.setAttribute("autocomplete","off"),e.addEventListener("keyup",function(t){k.removeAttribute("no-results-text"),new RegExp("38|40|13").test(t.keyCode)===!1&&this.value.length>=V&&(X&&clearTimeout(X),X=setTimeout(function(){g(e.value,function(t){/{{.*}}/gi.test(Q)&&(W=t),!W.length&&z&&k.setAttribute("no-results-text",z.replace("{{query}}",e.value)),L(t),I=null,u()})},200))}),e.addEventListener("keypress",function(){this.setAttribute("size",this.value.length+1)}),C.querySelector(".cb-main-item").appendChild(e)}():C.classList.remove("cb-search-enabled")}function m(){O&&(C.querySelector(".cb-search").value="")}function h(){O&&C.querySelector(".cb-search").focus()}function g(e,t){function n(e){return Object.keys(e).reduce(function(t,c){var o=!1;return o="object"===_typeof(e[c])?n(e[c]):r.test(e[c]),o&&(t=!0),t},!1)}if(!e)return W;var r=new RegExp(e,"i");/{{.*}}/gi.test(Q)?b(Q.replace(/{{query}}/,e),t):t(W.filter(function(e){if(B){var t=!1;return B.split(" ").forEach(function(n){var c=n.split("."),o=c.reduce(function(e,t){return e[t]},e);r.test(o)&&(t=!0)}),t}return"string"==typeof e?r.test(e):n(e)}))}function y(){var e=document.createElement("div");e.className="cb-main-item cb-placeholder trigger";var t='<svg class="cb-caret trigger" viewBox="0 0 512 512" height="20" width="20">\n\t\t\t\t\t\t<path class="trigger" d="m508 108c-4-4-11-4-15 1l-237 271l-237-271c-4-5-11-5-15-1c-5 4-5 10-1 15l245 280c2 3 5 4 8 4c3 0 6-1 8-4l245-280c4-5 4-11-1-15z"></path>\n\t\t\t\t\t</svg>';e.innerHTML+=t,C.appendChild(e),k=document.createElement("div"),k.className="cb-items",C.appendChild(k),w=document.createElement("div"),w.className="cb-loader",C.appendChild(w),C.querySelector(".cb-main-item").addEventListener("click",function(e){e.stopPropagation(),o(!j)})}function v(){var e=C.querySelector(".cb-main-item");if(M){if([].slice.call(C.querySelectorAll(".cb-main-item .cb-tag")).forEach(function(t){e.removeChild(t)}),!N)return;N.forEach(function(t){var n=document.createElement("div");n.className="cb-tag",n.innerHTML=S(t,_||R)+'<svg viewBox="0 0 512 512">\n\t\t\t\t\t\t<path d="m271 256l238-238c4-4 4-11 0-15c-4-4-11-4-15 0l-238 238l-238-238c-4-4-11-4-15 0c-4 4-4 11 0 15l238 238l-238 238c-4 4-4 11 0 15c2 2 5 3 8 3c2 0 5-1 7-3l238-238l238 238c2 2 5 3 7 3c3 0 6-1 8-3c4-4 4-11 0-15z"></path>\n\t\t\t\t\t</svg>',n.querySelector("svg").addEventListener("click",l.bind(null,t,!0)),e.insertBefore(n,e.children[e.children.length-1])})}else{if(!N)return[].slice.call(e.querySelectorAll(".cb-selected-item,.cb-tag")).forEach(function(t){return e.removeChild(t)});var t=document.createElement("div");t.className="cb-selected-item",t.innerHTML=S(N,D||R);var n=C.querySelector(".cb-selected-item");n&&e.removeChild(n),e.insertBefore(t,e.children[e.children.length-1])}}function b(e,t){K&&(K.abort(),E(!1)),K=new XMLHttpRequest,K.open("GET",e),K.onreadystatechange=function(){4==this.readyState&&(E(!1),this.status>=200&&this.status<400?(t(F?F(JSON.parse(this.responseText)):JSON.parse(this.responseText)),K=null):(t([]),K=null))},K.send(),E(!0)}function E(e){e?(w.style.display="block",C.querySelector(".cb-caret").style.display="none"):(w.style.display="",C.querySelector(".cb-caret").style.display="")}function L(e){k.innerHTML="",P&&(W=W.sort(function(e,t){return x(P,e)<x(P,t)?-1:x(P,e)>x(P,t)?1:0}));var t=null;W.forEach(function(n,r){if(!(e&&e.indexOf(n)<0||M&&N&&N.indexOf(n)>-1||!M&&N===n)){var c=document.createElement("div");c.setAttribute("data-id",r),c.innerHTML=S(n,R),c.addEventListener("click",d.bind(null,n,!0)),!P||t&&x(P,t)===x(P,n)||c.setAttribute("category",x(P,n)),t=n,k.appendChild(c)}})}function S(e,t){for(var n=/{{data\.?(.+?)?}}/,r=void 0;r=n.exec(t);){var c="",o=e;r[1]&&(c="."+r[1],o=x(r[1],e));var i=new RegExp("{{data"+c+"}}");t=t.replace(i,o)}return t}function x(e,t){return e.split(".").reduce(function(e,t){return e[t]},t)}function T(e,t){if("object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"object"!==("undefined"==typeof t?"undefined":_typeof(t)))return e===t;var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!==r.length)return!1;for(var c=0;c<n.length;c++){var o=n[c];if(e[o]!==t[o])return!1}return!0}function q(){if(N&&N.constructor===Array){var e=N.slice();e.forEach(function(e){l(e,!0)})}else l(N,!0);m()}function A(e){for(var t in Y)this[t]=e[t]?e[t]:Y[t]}if(this instanceof ChooseBumps==!1)return new ChooseBumps(e,t);var C=null,k=null,w=null,O=!1,N=null,j=!1,B=null,H=null,z=null,M=!1,P=null,R="",_=null,D=null,I=null,J=null,F=null,G=null,U=null,X=null,K=null,Q=null,V=0,W=[],Y={placeholder:"Choose",items:[],search:!1,searchfields:"",noresults:"",multiple:!1,template:"{{data}}",tagtemplate:null,selectedtemplate:null,categorize:null,processing:null,minlength:null,onselect:null,onremove:null,onadd:null};return Object.defineProperties(this,{element:{get:function(){return C},set:function(e){if("string"==typeof e){var t=document.querySelector(e);t?C=t:console.error("Element not found.")}else e instanceof HTMLElement?C=e:console.error("Invalid argument")}},items:{get:function(){return Q||W},set:function(e){e instanceof Array?W=e:"string"==typeof e?(Q=e,/{{.*}}/gi.test(Q)||b(Q,function(e){W=e})):console.error("Items must be an array or URL.")}},minlength:{get:function(){return V},set:function(e){V=isNaN(e)?0:e}},search:{get:function(){return O},set:p},placeholder:{get:function(){return H},set:r},noresults:{get:function(){return z},set:function(e){z="string"==typeof e?e:null}},multiple:{get:function(){return M},set:c},selected:{get:function(){return N}},template:{get:function(){return R},set:function(e){"string"==typeof e?(R=e,L(),v()):console.error("Template must be a string.")}},tagtemplate:{get:function(){return _||R},set:function(e){"string"==typeof e&&(_=e,L(),v())}},selectedtemplate:{get:function(){return D||R},set:function(e){"string"==typeof e&&(D=e,L(),v())}},searchfields:{get:function(){return B},set:function(e){"string"==typeof e?B=e:console.error("SearchFields must be a string.")}},onselect:{get:function(){return J},set:function(e){"function"==typeof e?J=e:e||(J=null)}},processing:{get:function(){return F},set:function(e){"function"==typeof e?F=e:e||(F=null)}},onremove:{get:function(){return U},set:function(e){"function"==typeof e?U=e:e||(U=null)}},onadd:{get:function(){return G},set:function(e){"function"==typeof e?G=e:e||(G=null)}},categorize:{get:function(){return P},set:function(e){P="string"==typeof e?e:null,L()}}}),this.select=function(e){if(!e)return q();Q&&/{{.*}}/gi.test(Q)&&(W=[e]);var t=W.reduce(function(t,n){return t=T(e,n)?n:t},null);t&&d(t)},this.remove=function(e){if(!e)return q();var t=W.reduce(function(t,n){return t=T(e,n)?n:t},null);t&&l(t,!0)},this.reset=q,n.call(this),Object.freeze(this)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define("ChooseBumps",e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e:window.ChooseBumps=e}(ChooseBumps);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNob29zZWJ1bXBzLmpzIl0sIm5hbWVzIjpbIkNob29zZUJ1bXBzIiwiZWxlbWVudCIsIm9wdGlvbnMiLCJpbml0IiwidGhpcyIsIkVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJkZWZhdWx0cyIsInBsYWNlaG9sZGVyIiwicmVuZGVySFRNTCIsInNldEFyZ3MiLCJjYWxsIiwic2V0UGxhY2Vob2xkZXIiLCJ4IiwiY29uc29sZSIsImVycm9yIiwiUGxhY2Vob2xkZXIiLCJxdWVyeVNlbGVjdG9yIiwic2V0TXVsdGlwbGUiLCJzdGF0ZSIsIk11bHRpcGxlIiwiU2VsZWN0ZWQiLCJfdHlwZW9mIiwic2V0T3BlbmVkIiwicmVuZGVySXRlbXMiLCJJdGVtQ29udGFpbmVyIiwic2Nyb2xsVG9wIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiQXJyb3dOYXZpZ2F0aW9uIiwiZm9jdXNTZWFyY2giLCJpc09wZW4iLCJyZXNldFNlYXJjaCIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJTZWxlY3RlZEluZGV4IiwiZSIsIlJlZ0V4cCIsInRlc3QiLCJrZXlDb2RlIiwicHJldmVudERlZmF1bHQiLCJzZWxlY3RQcmV2Iiwic2VsZWN0TmV4dCIsIm9uQWRkIiwidGFyZ2V0IiwidmFsdWUiLCJzZWxlY3RJdGVtIiwiSXRlbXMiLCJwYXJzZUludCIsImNoaWxkcmVuIiwicmVtb3ZlU2VsZWN0ZWQiLCJpdGVtIiwidHJpZ2dlckNhbGxiYWNrIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJjb25zdHJ1Y3RvciIsIkFycmF5Iiwic3BsaWNlIiwiaW5kZXhPZiIsImxlbmd0aCIsIm9uUmVtb3ZlIiwicmVuZGVyU2VsZWN0aW9uIiwibWF4IiwidXBkYXRlU2VsZWN0aW9uIiwic2Nyb2xsU2VsZWN0ZWRJbnRvVmlldyIsInNlbGVjdGVkSXRlbSIsImNvbnRhaW5lclRvcCIsImNvbnRhaW5lckJvdHRvbSIsImNsaWVudEhlaWdodCIsInNlbGVjdGVkSXRlbVRvcCIsIm9mZnNldFRvcCIsInNlbGVjdGVkSXRlbUJvdHRvbSIsIm9sZFNlbGVjdGlvbiIsImVsIiwicHVzaCIsIm9uU2VsZWN0Iiwic2V0U2VhcmNoIiwiU2VhcmNoIiwiU2VhcmNoQm94IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInJlbW92ZUF0dHJpYnV0ZSIsIk1pbkxlbmd0aCIsIlR5cGVUcmVzaG9sZCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzZWFyY2giLCJyZXN1bHQiLCJGZXRjaFVybCIsIk5vUmVzdWx0cyIsInJlcGxhY2UiLCJhcHBlbmRDaGlsZCIsImZvY3VzIiwicXVlcnkiLCJjYiIsInNlYXJjaE9iamVjdCIsIm9iaiIsIk9iamVjdCIsImtleXMiLCJyZWR1Y2UiLCJ2YWwiLCJrZXkiLCJjaGVjayIsInJlZ2V4IiwiZmV0Y2hJdGVtcyIsImZpbHRlciIsIlNlYXJjaEZpZWxkcyIsInNwbGl0IiwiZm9yRWFjaCIsImZpZWxkIiwiTWFpbkl0ZW0iLCJDYXJldCIsImlubmVySFRNTCIsIkxvYWRpbmdDb250YWluZXIiLCJtYWluSXRlbSIsInNsaWNlIiwicXVlcnlTZWxlY3RvckFsbCIsInQiLCJyZW1vdmVDaGlsZCIsInRhZyIsInBhcnNlVGVtcGxhdGUiLCJUYWdUZW1wbGF0ZSIsIlRlbXBsYXRlIiwiYmluZCIsImluc2VydEJlZm9yZSIsIlNlbGVjdGVkVGVtcGxhdGUiLCJwcmV2aW91c0l0ZW0iLCJ1cmwiLCJGZXRjaCIsImFib3J0IiwidG9nZ2xlTG9hZGVyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsIlByb2Nlc3NpbmciLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJzZW5kIiwic3R5bGUiLCJkaXNwbGF5IiwiaXRlbXMiLCJDYXRlZ29yaXplIiwic29ydCIsImEiLCJiIiwiZ2V0UHJvcGVydHlCeVN0cmluZyIsImluZGV4Iiwib3B0aW9uIiwiZGF0YSIsInRlbXBsYXRlIiwicmUiLCJtIiwiZXhlYyIsInNlbGVjdG9yIiwib2JqZWN0IiwiaXNFcXVpdmFsZW50IiwiYVByb3BzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImJQcm9wcyIsImkiLCJwcm9wTmFtZSIsIlJlc2V0IiwiY29weSIsIm9wdHMiLCJzZWFyY2hmaWVsZHMiLCJub3Jlc3VsdHMiLCJtdWx0aXBsZSIsInRhZ3RlbXBsYXRlIiwic2VsZWN0ZWR0ZW1wbGF0ZSIsImNhdGVnb3JpemUiLCJwcm9jZXNzaW5nIiwibWlubGVuZ3RoIiwib25zZWxlY3QiLCJvbnJlbW92ZSIsIm9uYWRkIiwiZGVmaW5lUHJvcGVydGllcyIsImdldCIsInNldCIsIkhUTUxFbGVtZW50IiwiaXNOYU4iLCJzZWxlY3RlZCIsInNlbGVjdCIsIm1hdGNoIiwicmVzZXQiLCJmcmVlemUiLCJTeW1ib2wiLCJpdGVyYXRvciIsImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJleHBvcnRzIiwibW9kdWxlIiwid2luZG93Il0sIm1hcHBpbmdzIjoiQUFBQSxZQVFBLFNBQVNBLGFBQVlDLEVBQVFDLEdBOEM1QixRQUFTQyxLQUNSQyxLQUFLSCxRQUFVQSxFQUNmSSxFQUFRQyxVQUFVQyxJQUFJLGVBQ3RCRixFQUFRRyxhQUFhLFdBQVcsR0FDN0JILEVBQVFJLGFBQWEsaUJBQWdCQyxFQUFTQyxZQUFjTixFQUFRSSxhQUFhLGdCQUNwRkcsSUFFQUMsRUFBUUMsS0FBS1YsS0FBS0YsT0FHbkIsUUFBU2EsR0FBZUMsR0FDdkIsTUFBZ0IsZ0JBQU5BLEdBQXVCQyxRQUFRQyxNQUFNLGtDQUMvQ0MsRUFBY0gsTUFDZFgsR0FBUWUsY0FBYyxpQkFBaUJaLGFBQWEsY0FBY1csSUFHbkUsUUFBU0UsR0FBWUMsR0FDcEJDLElBQVdELEVBQ1JDLEdBQWlDLFlBQWIsbUJBQUFDLEdBQUEsWUFBQUMsUUFBQUQsS0FBeUJBLElBQVVBLEdBQVlBLElBaEVsQyxRQXFFNUJFLEdBQVVKLEdBQ2ZB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M0ssUUFBQTJLLFVBQXVCQyxPQUFPRCxRQUFVSCxFQUNwREssT0FBT3RNLFlBQWNpTSxHQUMzQmpNIiwiZmlsZSI6ImNob29zZWJ1bXBzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxuLyogIENob29zZUJ1bXBzXHJcbiAqICBBIGRyb3Bkb3duIHNvIHNpbXBsZSBpdCB3aWxsIGdpdmUgeW91IGNob29zZS1idW1wcyFcclxuICogIEF1dGhvcjogY2FyLmphY29ic2VuQGdtYWlsLmNvbVxyXG4gKiAgTGljZW5zZTogTUlUXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gQ2hvb3NlQnVtcHMoZWxlbWVudCxvcHRpb25zKSB7XHJcblx0aWYodGhpcyBpbnN0YW5jZW9mIENob29zZUJ1bXBzID09PSBmYWxzZSkgcmV0dXJuIG5ldyBDaG9vc2VCdW1wcyhlbGVtZW50LG9wdGlvbnMpO1xyXG5cclxuXHRsZXQgRWxlbWVudCA9IG51bGw7XHJcblx0bGV0IEl0ZW1Db250YWluZXIgPSBudWxsO1xyXG5cdGxldCBMb2FkaW5nQ29udGFpbmVyID0gbnVsbDtcclxuXHRsZXQgU2VhcmNoID0gZmFsc2U7XHJcblx0bGV0IFNlbGVjdGVkID0gbnVsbDtcclxuXHRsZXQgaXNPcGVuID0gZmFsc2U7XHJcblx0bGV0IFNlYXJjaEZpZWxkcyA9IG51bGw7XHJcblx0bGV0IFBsYWNlaG9sZGVyID0gbnVsbDtcclxuXHRsZXQgTm9SZXN1bHRzID0gbnVsbDtcclxuXHRsZXQgTXVsdGlwbGUgPSBmYWxzZTtcclxuXHRsZXQgQ2F0ZWdvcml6ZSA9IG51bGw7XHJcblx0bGV0IFRlbXBsYXRlID0gJyc7XHJcblx0bGV0IFRhZ1RlbXBsYXRlID0gbnVsbDtcclxuXHRsZXQgU2VsZWN0ZWRUZW1wbGF0ZSA9IG51bGw7XHJcblx0bGV0IFNlbGVjdGVkSW5kZXggPSBudWxsO1xyXG5cdGxldCBvblNlbGVjdCA9IG51bGw7XHJcblx0bGV0IFByb2Nlc3NpbmcgPSBudWxsO1xyXG5cdGxldCBvbkFkZCA9IG51bGw7XHJcblx0bGV0IG9uUmVtb3ZlID0gbnVsbDtcclxuXHRsZXQgVHlwZVRyZXNob2xkID0gbnVsbDtcclxuXHRsZXQgRmV0Y2ggPSBudWxsO1xyXG5cdGxldCBGZXRjaFVybCA9IG51bGw7XHJcblx0bGV0IE1pbkxlbmd0aCA9IDA7XHJcblx0bGV0IEl0ZW1zID0gW107XHJcblxyXG5cdGxldCBkZWZhdWx0cyA9IHtcclxuXHRcdHBsYWNlaG9sZGVyOiAnQ2hvb3NlJyxcclxuXHRcdGl0ZW1zOiBbXSxcclxuXHRcdHNlYXJjaDogZmFsc2UsXHJcblx0XHRzZWFyY2hmaWVsZHM6ICcnLFxyXG5cdFx0bm9yZXN1bHRzOiAnJyxcclxuXHRcdG11bHRpcGxlOiBmYWxzZSxcclxuXHRcdHRlbXBsYXRlOiAne3tkYXRhfX0nLFxyXG5cdFx0dGFndGVtcGxhdGU6IG51bGwsXHJcblx0XHRzZWxlY3RlZHRlbXBsYXRlOiBudWxsLFxyXG5cdFx0Y2F0ZWdvcml6ZTogbnVsbCxcclxuXHRcdHByb2Nlc3Npbmc6IG51bGwsXHJcblx0XHRtaW5sZW5ndGg6IG51bGwsXHJcblx0XHRvbnNlbGVjdDogbnVsbCxcclxuXHRcdG9ucmVtb3ZlOiBudWxsLFxyXG5cdFx0b25hZGQ6IG51bGxcclxuXHR9O1xyXG5cclxuXHRmdW5jdGlvbiBpbml0KCkge1xyXG5cdFx0dGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuXHRcdEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2hvb3NlYnVtcHMnKTtcclxuXHRcdEVsZW1lbnQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsMCk7XHJcblx0XHRpZihFbGVtZW50LmdldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKSkgZGVmYXVsdHMucGxhY2Vob2xkZXIgPSBFbGVtZW50LmdldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKTtcclxuXHRcdHJlbmRlckhUTUwoKTtcclxuXHJcblx0XHRzZXRBcmdzLmNhbGwodGhpcyxvcHRpb25zIHx8IHt9KTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHNldFBsYWNlaG9sZGVyKHgpIHtcclxuXHRcdGlmKHR5cGVvZiB4ICE9PSAnc3RyaW5nJykgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1BsYWNlaG9sZGVyIG11c3QgYmUgYSBzdHJpbmcuJyk7XHJcblx0XHRQbGFjZWhvbGRlciA9IHg7XHJcblx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1tYWluLWl0ZW0nKS5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyxQbGFjZWhvbGRlcik7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBzZXRNdWx0aXBsZShzdGF0ZSkge1xyXG5cdFx0TXVsdGlwbGUgPSAoc3RhdGUpID8gdHJ1ZSA6IGZhbHNlO1xyXG5cdFx0aWYoTXVsdGlwbGUpIGlmKHR5cGVvZiBTZWxlY3RlZCA9PT0gJ29iamVjdCcgJiYgU2VsZWN0ZWQpIFNlbGVjdGVkID0gW1NlbGVjdGVkXTtcclxuXHR9XHJcblxyXG5cdC8qIEludGVyYWN0aW9ucyAqL1xyXG5cclxuXHRmdW5jdGlvbiBzZXRPcGVuZWQoc3RhdGUpIHtcclxuXHRcdGlmKHN0YXRlID09PSB0cnVlKSB7XHJcblx0XHRcdHJlbmRlckl0ZW1zKCk7XHJcblx0XHRcdEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2ItYWN0aXZlJyk7XHJcblx0XHRcdEl0ZW1Db250YWluZXIuc2Nyb2xsVG9wID0gMDtcclxuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNldE9wZW5lZCk7XHJcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLEFycm93TmF2aWdhdGlvbik7XHJcblx0XHRcdGZvY3VzU2VhcmNoKCk7XHJcblx0XHRcdGlzT3BlbiA9IHRydWU7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0cmVzZXRTZWFyY2goKTtcclxuXHRcdFx0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjYi1hY3RpdmUnKTtcclxuXHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNldE9wZW5lZCk7XHJcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLEFycm93TmF2aWdhdGlvbik7XHJcblx0XHRcdFNlbGVjdGVkSW5kZXggPSBudWxsO1xyXG5cdFx0XHRpc09wZW4gPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIEFycm93TmF2aWdhdGlvbihlKSB7XHJcblx0XHRpZihuZXcgUmVnRXhwKCczOHw0MHwxMycpLnRlc3QoZS5rZXlDb2RlKSkgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0c3dpdGNoKGUua2V5Q29kZSkge1xyXG5cdFx0XHRjYXNlIDM4OlxyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHNlbGVjdFByZXYoKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgNDA6XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0c2VsZWN0TmV4dCgpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAxMzpcclxuXHRcdFx0aWYodHlwZW9mIG9uQWRkID09PSAnZnVuY3Rpb24nICYmIFNlbGVjdGVkSW5kZXggPT09IC0xKXtcclxuXHRcdFx0XHRvbkFkZChlLnRhcmdldC52YWx1ZSk7XHJcblx0XHRcdFx0cmV0dXJuIGUudGFyZ2V0LnZhbHVlID0gJyc7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoU2VsZWN0ZWRJbmRleCA8IDApIHJldHVybjtcclxuXHRcdFx0c2VsZWN0SXRlbShJdGVtc1twYXJzZUludChJdGVtQ29udGFpbmVyLmNoaWxkcmVuW1NlbGVjdGVkSW5kZXhdLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpLDEwKV0sdHJ1ZSk7XHJcblx0XHRcdFNlbGVjdGVkSW5kZXggPSBudWxsO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qIFNlbGVjdGluZyAqL1xyXG5cclxuXHRmdW5jdGlvbiByZW1vdmVTZWxlY3RlZChpdGVtLHRyaWdnZXJDYWxsYmFjayxldmVudCkge1xyXG5cdFx0aWYoZXZlbnQpIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0aWYoU2VsZWN0ZWQgJiYgU2VsZWN0ZWQuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XHJcblx0XHRcdFNlbGVjdGVkLnNwbGljZShTZWxlY3RlZC5pbmRleE9mKGl0ZW0pLDEpO1xyXG5cdFx0XHRpZighU2VsZWN0ZWQubGVuZ3RoKSBTZWxlY3RlZCA9IG51bGw7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0U2VsZWN0ZWQgPSBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmKCFTZWxlY3RlZCkgRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2ItbWFpbi1pdGVtJykuY2xhc3NMaXN0LmFkZCgnY2ItcGxhY2Vob2xkZXInKTtcclxuXHRcdGlmKG9uUmVtb3ZlICYmIHRyaWdnZXJDYWxsYmFjaykgb25SZW1vdmUoaXRlbSk7XHJcblx0XHRyZW5kZXJTZWxlY3Rpb24oKTtcclxuXHRcdHJlbmRlckl0ZW1zKCk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBzZWxlY3ROZXh0KCkge1xyXG4gICAgICAgIGlmKFNlbGVjdGVkSW5kZXggPT09IG51bGwpIFNlbGVjdGVkSW5kZXggPSAtMTtcclxuICAgICAgICBsZXQgbWF4ID0gSXRlbUNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICBTZWxlY3RlZEluZGV4ID0gKFNlbGVjdGVkSW5kZXggPCBtYXgpID8gU2VsZWN0ZWRJbmRleCArIDEgOiBtYXg7XHJcbiAgICAgICAgdXBkYXRlU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2VsZWN0UHJldigpIHtcclxuICAgICAgICBsZXQgbWF4ID0gSXRlbUNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICBTZWxlY3RlZEluZGV4ID0gKCFTZWxlY3RlZEluZGV4KSA/IG51bGwgOiBTZWxlY3RlZEluZGV4IC0gMTtcclxuICAgICAgICB1cGRhdGVTZWxlY3Rpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzY3JvbGxTZWxlY3RlZEludG9WaWV3KCkge1xyXG5cdFx0aWYoIVNlbGVjdGVkSW5kZXggfHwgU2VsZWN0ZWRJbmRleCA8IDApIHJldHVybjtcclxuXHRcdGxldCBzZWxlY3RlZEl0ZW0gPSBJdGVtQ29udGFpbmVyLmNoaWxkcmVuW1NlbGVjdGVkSW5kZXhdO1xyXG5cdFx0bGV0IGNvbnRhaW5lclRvcCA9IEl0ZW1Db250YWluZXIuc2Nyb2xsVG9wO1xyXG5cdFx0bGV0IGNvbnRhaW5lckJvdHRvbSA9IEl0ZW1Db250YWluZXIuc2Nyb2xsVG9wICsgSXRlbUNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XHJcblx0XHRsZXQgc2VsZWN0ZWRJdGVtVG9wID0gc2VsZWN0ZWRJdGVtLm9mZnNldFRvcDtcclxuXHRcdGxldCBzZWxlY3RlZEl0ZW1Cb3R0b20gPSBzZWxlY3RlZEl0ZW0ub2Zmc2V0VG9wICsgc2VsZWN0ZWRJdGVtLmNsaWVudEhlaWdodDtcclxuXHRcdGlmKHNlbGVjdGVkSXRlbVRvcCA8IGNvbnRhaW5lclRvcCkgSXRlbUNvbnRhaW5lci5zY3JvbGxUb3AgPSBzZWxlY3RlZEl0ZW0ub2Zmc2V0VG9wO1xyXG5cdFx0ZWxzZSBpZihzZWxlY3RlZEl0ZW1Cb3R0b20gPiBjb250YWluZXJCb3R0b20pIEl0ZW1Db250YWluZXIuc2Nyb2xsVG9wID0gc2VsZWN0ZWRJdGVtQm90dG9tIC0gSXRlbUNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0aW9uKCkge1xyXG4gICAgICAgIHZhciBvbGRTZWxlY3Rpb24gPSBJdGVtQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5jYi1zZWxlY3RlZCcpO1xyXG4gICAgICAgIGlmKG9sZFNlbGVjdGlvbikgb2xkU2VsZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2NiLXNlbGVjdGVkJyk7XHJcbiAgICAgICAgbGV0IGVsID0gSXRlbUNvbnRhaW5lci5jaGlsZHJlbltTZWxlY3RlZEluZGV4XTtcclxuICAgICAgICBpZihlbCkgZWwuY2xhc3NMaXN0LmFkZCgnY2Itc2VsZWN0ZWQnKTtcclxuICAgICAgICBzY3JvbGxTZWxlY3RlZEludG9WaWV3KCk7XHJcbiAgICB9XHJcblxyXG5cdGZ1bmN0aW9uIHNlbGVjdEl0ZW0oaXRlbSx0cmlnZ2VyQ2FsbGJhY2ssZXZlbnQpIHtcclxuXHRcdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLW1haW4taXRlbScpLmNsYXNzTGlzdC5yZW1vdmUoJ2NiLXBsYWNlaG9sZGVyJyk7XHJcblx0XHRyZXNldFNlYXJjaCgpO1xyXG5cclxuXHRcdGlmKE11bHRpcGxlKSB7XHJcblx0XHRcdGlmKFNlbGVjdGVkICYmIFNlbGVjdGVkLmluZGV4T2YoaXRlbSkgPCAwKSBTZWxlY3RlZC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHRlbHNlIFNlbGVjdGVkID0gW2l0ZW1dO1xyXG5cclxuXHRcdFx0cmVuZGVySXRlbXMoKTtcclxuXHRcdFx0aWYoZXZlbnQpIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRmb2N1c1NlYXJjaCgpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdFNlbGVjdGVkID0gaXRlbTtcclxuXHRcdFx0c2V0T3BlbmVkKGZhbHNlKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZihvblNlbGVjdCAmJiB0cmlnZ2VyQ2FsbGJhY2spIG9uU2VsZWN0KGl0ZW0pO1xyXG5cdFx0cmVuZGVyU2VsZWN0aW9uKCk7XHJcblx0fVxyXG5cclxuXHQvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5cclxuICAgIC8qIFNlYXJjaGluZyAqL1xyXG5cclxuICAgIGZ1bmN0aW9uIHNldFNlYXJjaChzdGF0ZSkge1xyXG5cdFx0U2VhcmNoID0gKHN0YXRlKSA/IHRydWUgOiBmYWxzZTtcclxuXHJcblx0XHRpZihTZWFyY2gpIHtcclxuXHRcdFx0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjYi1zZWFyY2gtZW5hYmxlZCcpO1xyXG5cdFx0XHRsZXQgU2VhcmNoQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuXHRcdFx0XHRTZWFyY2hCb3guY2xhc3NOYW1lID0gJ2NiLXNlYXJjaCc7XHJcblx0XHRcdFx0U2VhcmNoQm94LnNldEF0dHJpYnV0ZSgndHlwZScsJ3RleHQnKTtcclxuXHRcdFx0XHRTZWFyY2hCb3guc2V0QXR0cmlidXRlKCdzaXplJywxKTtcclxuXHRcdFx0XHRTZWFyY2hCb3guc2V0QXR0cmlidXRlKCdhdXRvY29tcGxldGUnLCdvZmYnKTtcclxuXHJcblx0XHRcdFx0U2VhcmNoQm94LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJyxmdW5jdGlvbiBLZXlVcChlKSB7XHJcblx0XHRcdFx0XHRJdGVtQ29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnbm8tcmVzdWx0cy10ZXh0Jyk7XHJcblx0XHRcdFx0XHRpZihuZXcgUmVnRXhwKCczOHw0MHwxMycpLnRlc3QoZS5rZXlDb2RlKSA9PT0gZmFsc2UgJiYgdGhpcy52YWx1ZS5sZW5ndGggPj0gTWluTGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFR5cGVUcmVzaG9sZCAmJiBjbGVhclRpbWVvdXQoVHlwZVRyZXNob2xkKTtcclxuXHRcdFx0XHRcdFx0VHlwZVRyZXNob2xkID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0XHRcdHNlYXJjaChTZWFyY2hCb3gudmFsdWUsZnVuY3Rpb24ocmVzdWx0KXtcclxuXHRcdFx0XHRcdFx0XHRcdGlmKC97ey4qfX0vaWcudGVzdChGZXRjaFVybCkpIEl0ZW1zID0gcmVzdWx0O1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdGlmKCFJdGVtcy5sZW5ndGggJiYgTm9SZXN1bHRzKSBJdGVtQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnbm8tcmVzdWx0cy10ZXh0JyxOb1Jlc3VsdHMucmVwbGFjZSgne3txdWVyeX19JyxTZWFyY2hCb3gudmFsdWUpKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRyZW5kZXJJdGVtcyhyZXN1bHQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0U2VsZWN0ZWRJbmRleCA9IG51bGw7XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxlY3ROZXh0KCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH0sMjAwKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0U2VhcmNoQm94LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJyxmdW5jdGlvbiBLZXlQcmVzcygpIHtcclxuXHRcdFx0XHRcdHRoaXMuc2V0QXR0cmlidXRlKCdzaXplJyx0aGlzLnZhbHVlLmxlbmd0aCArIDEpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2ItbWFpbi1pdGVtJykuYXBwZW5kQ2hpbGQoU2VhcmNoQm94KTtcclxuXHRcdH1lbHNlIEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2Itc2VhcmNoLWVuYWJsZWQnKTtcclxuXHR9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzZXRTZWFyY2goKSB7XHJcblx0XHRpZighU2VhcmNoKSByZXR1cm47XHJcblx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1zZWFyY2gnKS52YWx1ZSA9ICcnO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZm9jdXNTZWFyY2goKSB7XHJcblx0XHRpZighU2VhcmNoKSByZXR1cm47XHJcblx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1zZWFyY2gnKS5mb2N1cygpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gc2VhcmNoKHF1ZXJ5LGNiKSB7XHJcblx0XHRpZighcXVlcnkpIHJldHVybiBJdGVtcztcclxuXHRcdGxldCByZWdleCA9IG5ldyBSZWdFeHAocXVlcnksJ2knKTtcclxuXHJcblx0XHRpZigve3suKn19L2lnLnRlc3QoRmV0Y2hVcmwpKSB7XHJcblx0XHRcdGZldGNoSXRlbXMoRmV0Y2hVcmwucmVwbGFjZSgve3txdWVyeX19LyxxdWVyeSksY2IpO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdGNiKEl0ZW1zLmZpbHRlcihmdW5jdGlvbiBGaWx0ZXIoeCkge1xyXG5cdFx0XHRcdGlmKFNlYXJjaEZpZWxkcykge1xyXG5cdFx0XHRcdFx0bGV0IHN0YXRlID0gZmFsc2U7XHJcblx0XHRcdFx0XHRTZWFyY2hGaWVsZHMuc3BsaXQoJyAnKS5mb3JFYWNoKGZ1bmN0aW9uIEZvckVhY2goZmllbGQpIHtcclxuXHRcdFx0XHRcdFx0bGV0IGtleXMgPSBmaWVsZC5zcGxpdCgnLicpO1xyXG5cdFx0XHRcdFx0XHRsZXQgdmFsdWUgPSBrZXlzLnJlZHVjZShmdW5jdGlvbiBSZWR1Y2UodmFsLGl0ZW0pIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdmFsW2l0ZW1dO1xyXG5cdFx0XHRcdFx0XHR9LHgpO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYocmVnZXgudGVzdCh2YWx1ZSkpIHN0YXRlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdHJldHVybiBzdGF0ZTtcclxuXHRcdFx0XHR9ZWxzZVxyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgcmV0dXJuIHJlZ2V4LnRlc3QoeCk7XHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0cmV0dXJuIHNlYXJjaE9iamVjdCh4KTtcclxuXHRcdFx0fSkpO1xyXG5cdFx0fVxyXG5cclxuXHJcblxyXG5cclxuXHRcdGZ1bmN0aW9uIHNlYXJjaE9iamVjdChvYmopIHtcclxuXHRcdFx0cmV0dXJuIE9iamVjdC5rZXlzKG9iaikucmVkdWNlKGZ1bmN0aW9uIFJlZHVjZSh2YWwsa2V5KSB7XHJcblx0XHRcdFx0bGV0IGNoZWNrID0gZmFsc2U7XHJcblx0XHRcdFx0aWYodHlwZW9mIG9ialtrZXldID09PSAnb2JqZWN0JykgY2hlY2sgPSBzZWFyY2hPYmplY3Qob2JqW2tleV0pO1xyXG5cdFx0XHRcdGVsc2UgY2hlY2sgPSByZWdleC50ZXN0KG9ialtrZXldKTtcclxuXHJcblx0XHRcdFx0aWYoY2hlY2spIHZhbCA9IHRydWU7XHJcblxyXG5cdFx0XHRcdHJldHVybiB2YWw7XHJcblx0XHRcdH0sZmFsc2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcblx0LyogUmVuZGVyaW5nICovXHJcblxyXG5cdGZ1bmN0aW9uIHJlbmRlckhUTUwoKSB7IC8vY29tbWVudFxyXG5cdFx0bGV0IE1haW5JdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdE1haW5JdGVtLmNsYXNzTmFtZSA9ICdjYi1tYWluLWl0ZW0gY2ItcGxhY2Vob2xkZXIgdHJpZ2dlcic7XHJcblxyXG5cclxuXHRcdGxldCBDYXJldCA9IGA8c3ZnIGNsYXNzPVwiY2ItY2FyZXQgdHJpZ2dlclwiIHZpZXdCb3g9XCIwIDAgNTEyIDUxMlwiIGhlaWdodD1cIjIwXCIgd2lkdGg9XCIyMFwiPlxyXG5cdFx0XHRcdFx0XHQ8cGF0aCBjbGFzcz1cInRyaWdnZXJcIiBkPVwibTUwOCAxMDhjLTQtNC0xMS00LTE1IDFsLTIzNyAyNzFsLTIzNy0yNzFjLTQtNS0xMS01LTE1LTFjLTUgNC01IDEwLTEgMTVsMjQ1IDI4MGMyIDMgNSA0IDggNGMzIDAgNi0xIDgtNGwyNDUtMjgwYzQtNSA0LTExLTEtMTV6XCI+PC9wYXRoPlxyXG5cdFx0XHRcdFx0PC9zdmc+YDtcclxuXHJcblx0XHRNYWluSXRlbS5pbm5lckhUTUwgKz0gQ2FyZXQ7XHJcblx0XHRFbGVtZW50LmFwcGVuZENoaWxkKE1haW5JdGVtKTtcclxuXHJcblx0XHRJdGVtQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRJdGVtQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdjYi1pdGVtcyc7XHJcblx0XHRFbGVtZW50LmFwcGVuZENoaWxkKEl0ZW1Db250YWluZXIpO1xyXG5cclxuXHRcdExvYWRpbmdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdExvYWRpbmdDb250YWluZXIuY2xhc3NOYW1lID0gJ2NiLWxvYWRlcic7XHJcblx0XHRFbGVtZW50LmFwcGVuZENoaWxkKExvYWRpbmdDb250YWluZXIpO1xyXG5cclxuXHRcdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLW1haW4taXRlbScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoZSkgPT4ge1xyXG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRzZXRPcGVuZWQoIWlzT3Blbik7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHJlbmRlclNlbGVjdGlvbigpIHtcclxuXHJcblx0XHRsZXQgbWFpbkl0ZW0gPSBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1tYWluLWl0ZW0nKTtcclxuXHJcblx0XHRpZihNdWx0aXBsZSkge1xyXG5cdFx0XHRbXS5zbGljZS5jYWxsKEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNiLW1haW4taXRlbSAuY2ItdGFnJykpLmZvckVhY2goKHQpID0+IHtcclxuXHRcdFx0XHRtYWluSXRlbS5yZW1vdmVDaGlsZCh0KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRpZighU2VsZWN0ZWQpIHJldHVybjtcclxuXHRcdFx0U2VsZWN0ZWQuZm9yRWFjaChpdGVtID0+IHtcclxuXHRcdFx0XHRsZXQgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0XHR0YWcuY2xhc3NOYW1lID0gJ2NiLXRhZyc7XHJcblx0XHRcdFx0XHR0YWcuaW5uZXJIVE1MID0gcGFyc2VUZW1wbGF0ZShpdGVtLFRhZ1RlbXBsYXRlIHx8IFRlbXBsYXRlKSArIGA8c3ZnIHZpZXdCb3g9XCIwIDAgNTEyIDUxMlwiPlxyXG5cdFx0XHRcdFx0XHQ8cGF0aCBkPVwibTI3MSAyNTZsMjM4LTIzOGM0LTQgNC0xMSAwLTE1Yy00LTQtMTEtNC0xNSAwbC0yMzggMjM4bC0yMzgtMjM4Yy00LTQtMTEtNC0xNSAwYy00IDQtNCAxMSAwIDE1bDIzOCAyMzhsLTIzOCAyMzhjLTQgNC00IDExIDAgMTVjMiAyIDUgMyA4IDNjMiAwIDUtMSA3LTNsMjM4LTIzOGwyMzggMjM4YzIgMiA1IDMgNyAzYzMgMCA2LTEgOC0zYzQtNCA0LTExIDAtMTV6XCI+PC9wYXRoPlxyXG5cdFx0XHRcdFx0PC9zdmc+YDtcclxuXHJcblx0XHRcdFx0XHR0YWcucXVlcnlTZWxlY3Rvcignc3ZnJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHJlbW92ZVNlbGVjdGVkLmJpbmQobnVsbCxpdGVtLHRydWUpKTtcclxuXHJcblx0XHRcdFx0bWFpbkl0ZW0uaW5zZXJ0QmVmb3JlKHRhZyxtYWluSXRlbS5jaGlsZHJlblttYWluSXRlbS5jaGlsZHJlbi5sZW5ndGggLSAxXSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aWYoIVNlbGVjdGVkKSByZXR1cm4gW10uc2xpY2UuY2FsbChtYWluSXRlbS5xdWVyeVNlbGVjdG9yQWxsKCcuY2Itc2VsZWN0ZWQtaXRlbSwuY2ItdGFnJykpLmZvckVhY2goIGUgPT4gbWFpbkl0ZW0ucmVtb3ZlQ2hpbGQoZSkpO1xyXG5cdFx0XHRsZXQgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRpdGVtLmNsYXNzTmFtZSA9ICdjYi1zZWxlY3RlZC1pdGVtJztcclxuXHRcdFx0aXRlbS5pbm5lckhUTUwgPSBwYXJzZVRlbXBsYXRlKFNlbGVjdGVkLFNlbGVjdGVkVGVtcGxhdGUgfHwgVGVtcGxhdGUpO1xyXG5cclxuXHRcdFx0bGV0IHByZXZpb3VzSXRlbSA9IEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNiLXNlbGVjdGVkLWl0ZW0nKTtcclxuXHRcdFx0aWYocHJldmlvdXNJdGVtKSBtYWluSXRlbS5yZW1vdmVDaGlsZChwcmV2aW91c0l0ZW0pO1xyXG5cdFx0XHRtYWluSXRlbS5pbnNlcnRCZWZvcmUoaXRlbSxtYWluSXRlbS5jaGlsZHJlblttYWluSXRlbS5jaGlsZHJlbi5sZW5ndGggLSAxXSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBmZXRjaEl0ZW1zKHVybCxjYikge1xyXG5cdFx0aWYoRmV0Y2gpIHtcclxuXHRcdFx0RmV0Y2guYWJvcnQoKTtcclxuXHRcdFx0dG9nZ2xlTG9hZGVyKGZhbHNlKTtcclxuXHRcdH1cclxuXHRcdEZldGNoID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblx0XHRGZXRjaC5vcGVuKCdHRVQnLHVybCk7XHJcblx0XHRGZXRjaC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRpZih0aGlzLnJlYWR5U3RhdGUgPT0gNCkge1xyXG5cdFx0XHRcdHRvZ2dsZUxvYWRlcihmYWxzZSk7XHJcblx0XHRcdFx0aWYodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgNDAwKSB7XHJcblx0XHRcdFx0XHRjYigoUHJvY2Vzc2luZykgPyBQcm9jZXNzaW5nKEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpKSA6IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpKTtcclxuXHRcdFx0XHRcdEZldGNoID0gbnVsbDtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdGNiKFtdKTtcclxuXHRcdFx0XHRcdEZldGNoID0gbnVsbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdEZldGNoLnNlbmQoKTtcclxuXHRcdHRvZ2dsZUxvYWRlcih0cnVlKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHRvZ2dsZUxvYWRlcihzdGF0ZSkge1xyXG5cdFx0aWYoc3RhdGUpIHtcclxuXHRcdFx0TG9hZGluZ0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHRcdFx0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2ItY2FyZXQnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdExvYWRpbmdDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG5cdFx0XHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYi1jYXJldCcpLnN0eWxlLmRpc3BsYXkgPSAnJztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcblx0XHRJdGVtQ29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG5cclxuXHRcdGlmKENhdGVnb3JpemUpXHJcblx0XHRcdEl0ZW1zID0gSXRlbXMuc29ydCgoYSxiKSA9PiB7XHJcblx0XHRcdFx0aWYoZ2V0UHJvcGVydHlCeVN0cmluZyhDYXRlZ29yaXplLGEpIDwgZ2V0UHJvcGVydHlCeVN0cmluZyhDYXRlZ29yaXplLGIpKSByZXR1cm4gLTE7XHJcblx0XHRcdFx0aWYoZ2V0UHJvcGVydHlCeVN0cmluZyhDYXRlZ29yaXplLGEpID4gZ2V0UHJvcGVydHlCeVN0cmluZyhDYXRlZ29yaXplLGIpKSByZXR1cm4gMTtcclxuXHRcdFx0XHRyZXR1cm4gMDtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0bGV0IHByZXZpb3VzSXRlbSA9IG51bGw7XHJcblx0XHRJdGVtcy5mb3JFYWNoKChpdGVtLGluZGV4KSA9PiB7XHJcblx0XHRcdGlmKGl0ZW1zICYmIGl0ZW1zLmluZGV4T2YoaXRlbSkgPCAwKSByZXR1cm47XHJcblx0XHRcdGlmKE11bHRpcGxlICYmIFNlbGVjdGVkICYmIFNlbGVjdGVkLmluZGV4T2YoaXRlbSkgPiAtMSB8fCAhTXVsdGlwbGUgJiYgU2VsZWN0ZWQgPT09IGl0ZW0pIHJldHVybjtcclxuXHRcdFx0bGV0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRcdG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpbmRleCk7XHJcblx0XHRcdFx0b3B0aW9uLmlubmVySFRNTCA9IHBhcnNlVGVtcGxhdGUoaXRlbSxUZW1wbGF0ZSk7XHJcblx0XHRcdFx0b3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3RJdGVtLmJpbmQobnVsbCxpdGVtLHRydWUpKTtcclxuXHJcblx0XHRcdGlmKENhdGVnb3JpemUgJiYgKCFwcmV2aW91c0l0ZW0gfHwgZ2V0UHJvcGVydHlCeVN0cmluZyhDYXRlZ29yaXplLHByZXZpb3VzSXRlbSkgIT09IGdldFByb3BlcnR5QnlTdHJpbmcoQ2F0ZWdvcml6ZSxpdGVtKSkpIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ2NhdGVnb3J5JyxnZXRQcm9wZXJ0eUJ5U3RyaW5nKENhdGVnb3JpemUsaXRlbSkpO1xyXG5cclxuXHRcdFx0cHJldmlvdXNJdGVtID0gaXRlbTtcclxuXHRcdFx0SXRlbUNvbnRhaW5lci5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBwYXJzZVRlbXBsYXRlKGRhdGEsdGVtcGxhdGUpIHtcclxuXHRcdGxldCByZSA9IC97e2RhdGFcXC4/KC4rPyk/fX0vO1xyXG5cdFx0bGV0IG07XHJcblx0XHR3aGlsZShtID0gcmUuZXhlYyh0ZW1wbGF0ZSkpIHtcclxuXHRcdFx0bGV0IHNlbGVjdG9yID0gJyc7XHJcblx0XHRcdGxldCB2YWx1ZSA9IGRhdGE7XHJcblx0XHRcdGlmKG1bMV0pIHtcclxuXHRcdFx0XHRzZWxlY3RvciA9ICcuJyArIG1bMV07XHJcblx0XHRcdFx0dmFsdWUgPSBnZXRQcm9wZXJ0eUJ5U3RyaW5nKG1bMV0sZGF0YSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGxldCByZXBsYWNlID0gbmV3IFJlZ0V4cCgne3tkYXRhJyArIHNlbGVjdG9yICsgJ319Jyk7XHJcblx0XHRcdHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZShyZXBsYWNlLHZhbHVlKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGVtcGxhdGU7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBnZXRQcm9wZXJ0eUJ5U3RyaW5nKHNlbGVjdG9yLG9iamVjdCkge1xyXG5cdFx0cmV0dXJuIHNlbGVjdG9yLnNwbGl0KCcuJykucmVkdWNlKCh2YWwsaXRlbSkgPT4ge1xyXG5cdFx0XHRyZXR1cm4gdmFsW2l0ZW1dO1xyXG5cdFx0fSxvYmplY3QpO1xyXG5cdH1cclxuXHJcblx0LyogLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuXHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7XHJcblx0XHQnZWxlbWVudCc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBFbGVtZW50LFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSB7XHJcblx0XHRcdFx0XHRsZXQgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHgpO1xyXG5cdFx0XHRcdFx0aWYoZWwpIEVsZW1lbnQgPSBlbDtcclxuXHRcdFx0XHRcdGVsc2UgY29uc29sZS5lcnJvcignRWxlbWVudCBub3QgZm91bmQuJyk7XHJcblx0XHRcdFx0fWVsc2UgaWYoeCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSBFbGVtZW50ID0geDtcclxuXHRcdFx0XHRlbHNlIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgYXJndW1lbnQnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCdpdGVtcyc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBGZXRjaFVybCB8fCBJdGVtcyxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHggaW5zdGFuY2VvZiBBcnJheSkgSXRlbXMgPSB4O1xyXG5cdFx0XHRcdGVsc2UgaWYodHlwZW9mIHggPT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdEZldGNoVXJsID0geFxyXG5cdFx0XHRcdFx0aWYoISgve3suKn19L2lnLnRlc3QoRmV0Y2hVcmwpKSkgZmV0Y2hJdGVtcyhGZXRjaFVybCxmdW5jdGlvbihyZXN1bHQpIHtcclxuXHRcdFx0XHRcdFx0SXRlbXMgPSByZXN1bHQ7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBjb25zb2xlLmVycm9yKCdJdGVtcyBtdXN0IGJlIGFuIGFycmF5IG9yIFVSTC4nKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCdtaW5sZW5ndGgnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gTWluTGVuZ3RoLFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYoaXNOYU4oeCkpIE1pbkxlbmd0aCA9IDA7XHJcblx0XHRcdFx0ZWxzZSBNaW5MZW5ndGggPSB4O1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J3NlYXJjaCc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBTZWFyY2gsXHJcblx0XHRcdHNldDogc2V0U2VhcmNoXHJcblx0XHR9LFxyXG5cdFx0J3BsYWNlaG9sZGVyJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IFBsYWNlaG9sZGVyLFxyXG5cdFx0XHRzZXQ6IHNldFBsYWNlaG9sZGVyXHJcblx0XHR9LFxyXG5cdFx0J25vcmVzdWx0cyc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBOb1Jlc3VsdHMsXHJcblx0XHRcdHNldDogKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgTm9SZXN1bHRzID0gdmFsdWU7XHJcblx0XHRcdFx0ZWxzZSBOb1Jlc3VsdHMgPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J211bHRpcGxlJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IE11bHRpcGxlLFxyXG5cdFx0XHRzZXQ6IHNldE11bHRpcGxlXHJcblx0XHR9LFxyXG5cdFx0J3NlbGVjdGVkJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IFNlbGVjdGVkXHJcblx0XHR9LFxyXG5cdFx0J3RlbXBsYXRlJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IFRlbXBsYXRlLFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSB7XHJcblx0XHRcdFx0XHRUZW1wbGF0ZSA9IHg7XHJcblx0XHRcdFx0XHRyZW5kZXJJdGVtcygpO1xyXG5cdFx0XHRcdFx0cmVuZGVyU2VsZWN0aW9uKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgY29uc29sZS5lcnJvcignVGVtcGxhdGUgbXVzdCBiZSBhIHN0cmluZy4nKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCd0YWd0ZW1wbGF0ZSc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBUYWdUZW1wbGF0ZSB8fCBUZW1wbGF0ZSxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcdFx0VGFnVGVtcGxhdGUgPSB4O1xyXG5cdFx0XHRcdFx0cmVuZGVySXRlbXMoKTtcclxuXHRcdFx0XHRcdHJlbmRlclNlbGVjdGlvbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCdzZWxlY3RlZHRlbXBsYXRlJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IFNlbGVjdGVkVGVtcGxhdGUgfHwgVGVtcGxhdGUsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZih0eXBlb2YgeCA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdFNlbGVjdGVkVGVtcGxhdGUgPSB4O1xyXG5cdFx0XHRcdFx0cmVuZGVySXRlbXMoKTtcclxuXHRcdFx0XHRcdHJlbmRlclNlbGVjdGlvbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCdzZWFyY2hmaWVsZHMnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gU2VhcmNoRmllbGRzLFxyXG5cdFx0XHRzZXQ6ICh4KSA9PiB7XHJcblx0XHRcdFx0aWYodHlwZW9mIHggPT09ICdzdHJpbmcnKSBTZWFyY2hGaWVsZHMgPSB4O1xyXG5cdFx0XHRcdGVsc2UgY29uc29sZS5lcnJvcignU2VhcmNoRmllbGRzIG11c3QgYmUgYSBzdHJpbmcuJyk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQnb25zZWxlY3QnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gb25TZWxlY3QsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZih0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJykgb25TZWxlY3QgPSB4O1xyXG5cdFx0XHRcdGVsc2UgaWYoIXgpIG9uU2VsZWN0ID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCdwcm9jZXNzaW5nJzoge1xyXG5cdFx0XHRnZXQ6ICgpID0+IFByb2Nlc3NpbmcsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZih0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJykgUHJvY2Vzc2luZyA9IHg7XHJcblx0XHRcdFx0ZWxzZSBpZigheCkgUHJvY2Vzc2luZyA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHQnb25yZW1vdmUnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gb25SZW1vdmUsXHJcblx0XHRcdHNldDogKHgpID0+IHtcclxuXHRcdFx0XHRpZih0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJykgb25SZW1vdmUgPSB4O1xyXG5cdFx0XHRcdGVsc2UgaWYoIXgpIG9uUmVtb3ZlID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdCdvbmFkZCc6IHtcclxuXHRcdFx0Z2V0OiAoKSA9PiBvbkFkZCxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nKSBvbkFkZCA9IHg7XHJcblx0XHRcdFx0ZWxzZSBpZigheCkgb25BZGQgPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0J2NhdGVnb3JpemUnOiB7XHJcblx0XHRcdGdldDogKCkgPT4gQ2F0ZWdvcml6ZSxcclxuXHRcdFx0c2V0OiAoeCkgPT4ge1xyXG5cdFx0XHRcdGlmKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgQ2F0ZWdvcml6ZSA9IHg7XHJcblx0XHRcdFx0ZWxzZSBDYXRlZ29yaXplID0gbnVsbDtcclxuXHJcblx0XHRcdFx0cmVuZGVySXRlbXMoKVx0O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdHRoaXMuc2VsZWN0ID0gZnVuY3Rpb24gU2VsZWN0KGl0ZW0pIHtcclxuXHRcdGlmKCFpdGVtKSByZXR1cm4gUmVzZXQoKTtcclxuXHJcblx0XHRpZihGZXRjaFVybCAmJiAve3suKn19L2lnLnRlc3QoRmV0Y2hVcmwpKSB7XHJcblx0XHRcdEl0ZW1zID0gW2l0ZW1dO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCBtYXRjaCA9IEl0ZW1zLnJlZHVjZSgobSxpKSA9PiBtID0gaXNFcXVpdmFsZW50KGl0ZW0saSkgPyBpIDogbSxudWxsKTtcclxuXHRcdGlmKG1hdGNoKSBzZWxlY3RJdGVtKG1hdGNoKTtcclxuXHR9O1xyXG5cclxuXHR0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uIFJlbW92ZShpdGVtKSB7XHJcblx0XHRpZighaXRlbSkgcmV0dXJuIFJlc2V0KCk7XHJcblx0XHRsZXQgbWF0Y2ggPSBJdGVtcy5yZWR1Y2UoKG0saSkgPT4gbSA9IGlzRXF1aXZhbGVudChpdGVtLGkpID8gaSA6IG0sbnVsbCk7XHJcblx0XHRpZihtYXRjaCkgcmVtb3ZlU2VsZWN0ZWQobWF0Y2gsdHJ1ZSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBpc0VxdWl2YWxlbnQoYSwgYikge1xyXG5cdFx0aWYodHlwZW9mIGEgIT09ICdvYmplY3QnICYmIHR5cGVvZiBiICE9PSAnb2JqZWN0JykgcmV0dXJuIGEgPT09IGI7XHJcblx0XHRsZXQgYVByb3BzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYSk7XHJcblx0XHRsZXQgYlByb3BzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYik7XHJcblxyXG5cdFx0aWYgKGFQcm9wcy5sZW5ndGggIT09IGJQcm9wcy5sZW5ndGgpIHJldHVybiBmYWxzZTtcclxuXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGFQcm9wcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRsZXQgcHJvcE5hbWUgPSBhUHJvcHNbaV07XHJcblxyXG5cdFx0XHRpZihhW3Byb3BOYW1lXSAhPT0gYltwcm9wTmFtZV0pIHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gUmVzZXQoKSB7XHJcblx0XHRpZihTZWxlY3RlZCAmJiBTZWxlY3RlZC5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcclxuXHRcdFx0dmFyIGNvcHkgPSBTZWxlY3RlZC5zbGljZSgpO1xyXG5cdFx0XHRjb3B5LmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xyXG5cdFx0XHRcdHJlbW92ZVNlbGVjdGVkKGl0ZW0sdHJ1ZSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fWVsc2V7XHJcblx0XHRcdHJlbW92ZVNlbGVjdGVkKFNlbGVjdGVkLHRydWUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJlc2V0U2VhcmNoKCk7XHJcblx0fVxyXG5cclxuXHR0aGlzLnJlc2V0ID0gUmVzZXQ7XHJcblxyXG5cclxuXHRpbml0LmNhbGwodGhpcyk7XHJcblxyXG5cdGZ1bmN0aW9uIHNldEFyZ3Mob3B0cykge1xyXG4gICAgICAgIGZvcihsZXQga2V5IGluIGRlZmF1bHRzKSB0aGlzW2tleV0gPSAob3B0c1trZXldKSA/IG9wdHNba2V5XSA6IGRlZmF1bHRzW2tleV0gO1xyXG4gICAgfTtcclxuXHJcblx0cmV0dXJuIE9iamVjdC5mcmVlemUodGhpcyk7XHJcbiB9XHJcblxyXG5cclxuLyogU3ByZWFkIGl0IHRvIHRoZSB3b3JsZCEgKi9cclxuIChmdW5jdGlvbiBGYWN0b3J5IChmYWN0b3J5KSB7XHJcbiAgICBpZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIGRlZmluZSgnQ2hvb3NlQnVtcHMnLCBmYWN0b3J5KTtcclxuICAgIGVsc2UgaWYgKCB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgKSBtb2R1bGUuZXhwb3J0cyA9IGZhY3Rvcnk7XHJcbiAgICBlbHNlIHdpbmRvdy5DaG9vc2VCdW1wcyA9IGZhY3Rvcnk7XHJcbn0pKENob29zZUJ1bXBzKTtcclxuIl19
